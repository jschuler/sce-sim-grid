{"version":3,"sources":["webpack://sceSimGrid/webpack/universalModuleDefinition","webpack://sceSimGrid/webpack/bootstrap","webpack://sceSimGrid/external \"react\"","webpack://sceSimGrid/external \"@patternfly/react-core\"","webpack://sceSimGrid/external \"@patternfly/react-icons\"","webpack://sceSimGrid/external \"classnames\"","webpack://sceSimGrid/external \"react-infinite-scroll-component\"","webpack://sceSimGrid/external \"@patternfly/react-core/dist/js/experimental\"","webpack://sceSimGrid/./src/components/utils/jsonix.js","webpack://sceSimGrid/./src/schemas/scesim.js","webpack://sceSimGrid/./src/schemas/dmn.js","webpack://sceSimGrid/external \"@patternfly/patternfly/patternfly.css\"","webpack://sceSimGrid/external \"@patternfly/patternfly/patternfly-addons.css\"","webpack://sceSimGrid/./src/components/utils/jsonixUtils.ts","webpack://sceSimGrid/./src/components/utils/useKeyPress.ts","webpack://sceSimGrid/./src/components/utils/misc.ts","webpack://sceSimGrid/./src/components/utils/useDebounce.ts","webpack://sceSimGrid/./src/components/Cell/Input.tsx","webpack://sceSimGrid/./src/components/Cell/Select.tsx","webpack://sceSimGrid/./src/components/Spinner/Spinner.tsx","webpack://sceSimGrid/./src/components/Editor/Editor.tsx","webpack://sceSimGrid/./src/components/Sidebar/Sidebar.tsx","webpack://sceSimGrid/./src/components/Toolbar/ChangeTracker.tsx","webpack://sceSimGrid/./src/components/Toolbar/HelpModal.tsx","webpack://sceSimGrid/./src/components/Toolbar/Search.tsx","webpack://sceSimGrid/./src/components/Toolbar/EditorToolbar.tsx","webpack://sceSimGrid/./src/components/EditorContainer/scesimUtils.ts","webpack://sceSimGrid/./src/components/EditorContainer/EditorContainer.tsx","webpack://sceSimGrid/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","_jsonix_xmldom","_jsonix_xmlhttprequest","_jsonix_fs","Jsonix","singleFile","Util","extend","destination","source","undefined","Class","parent","initialize","Type","this","apply","arguments","extended","empty","len","length","XML","XMLNS_NS","XMLNS_P","DOM","isDomImplementationAvailable","document","exists","implementation","isFunction","createDocument","DOMImplementation","ActiveXObject","Error","serialize","node","Ensure","ensureExists","XMLSerializer","serializeToString","xml","parse","text","DOMParser","parseFromString","doc","loadXML","url","encodeURIComponent","request","XMLHttpRequest","open","overrideMimeType","send","responseXML","load","callback","options","Request","INSTANCE","issue","transport","result","documentElement","isString","responseText","xlinkFixRequired","isXlinkFixRequired","navigator","userAgent","test","vendor","el","createElement","setAttributeNS","appendChild","testString","indexOf","factories","onSuccess","onFailure","ensureString","ensureFunction","ensureObject","createTransport","method","async","isBoolean","proxy","PROXY","user","password","isObject","headers","header","setRequestHeader","data","that","onreadystatechange","handleTransport","setTimeout","readyState","status","index","e","CLASS_NAME","Schema","Model","isUndefined","isNumber","isNaN","isNumberOrNaN","toString","isArray","concat","unshift","callee","isDate","getTimezoneOffset","setUTCFullYear","isRegExp","exec","ignoreCase","isNode","Node","nodeType","nodeName","isEqual","a","b","report","doReport","_keys","keys","obj","start","stop","step","args","slice","solo","start_","stop_","step_","Math","max","ceil","idx","range","Array","_range","atype","btype","getTime","global","multiline","aSerialized","bSerialized","aKeys","bKeys","andex","bndex","kndex","cloneObject","target","defaultValue","typeOfDefaultValue","candidateValue","NumberUtils","isInteger","StringUtils","trim","String","str","replace","isEmpty","isNotBlank","whitespaceCharacters","whitespaceCharactersMap","splitBySeparatorChars","separatorChars","split","list","sizePlus1","match","charAt","push","substring","ensureBoolean","ensureNumber","ensureNumberOrNaN","ensureInteger","ensureDate","Date","ensureArray","QName","namespaceURI","localPart","prefix","string","one","two","three","colonPosition","toCanonicalString","namespaceContext","getPrefix","clone","equals","fromString","qNameAsString","defaultNamespaceURI","prefixedName","leftBracket","rightBracket","lastIndexOf","getNamespaceURI","fromObject","lp","fromObjectOrString","Calendar","year","NaN","month","day","hour","minute","second","fractionalSecond","timezone","date","validateYear","validateMonth","validateYearMonthDay","validateMonthDay","validateDay","validateHour","validateMinute","validateSecond","validateFractionalSecond","validateTimezone","initialDate","setUTCMonth","setUTCDate","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","timezoneOffset","MIN_TIMEZONE","MAX_TIMEZONE","DAYS_IN_MONTH","maxDaysInMonth","Input","attributes","eventType","pns","rootPnsItem","hasNext","next","enter","leave","firstChild","nextSibling","pushNS","nodeValue","popNS","nextSibling1","parentNode","getName","getNameKey","getText","nextTag","et","skipElement","START_ELEMENT","numberOfOpenTags","getElementText","content","retrieveElement","element","retrieveAttributes","getAttributeCount","getAttributeName","attribute","getAttributeNameKey","getAttributeValue","getAttributeValueNS","getAttributeValueNSViaElement","getAttributeNS","getAttributeValueNSViaAttribute","attributeNode","getAttributeNodeNS","getAttributeNodeNSViaElement","getAttributeNodeNSViaAttributes","potentialNode","getElement","pindex","parentPnsItem","pnsItem","reference","alength","aindex","attributeName","isNS","pop","END_ELEMENT","PROCESSING_INSTRUCTION","CHARACTERS","COMMENT","SPACE","START_DOCUMENT","END_DOCUMENT","ENTITY_REFERENCE","ATTRIBUTE","DTD","CDATA","NAMESPACE","NOTATION_DECLARATION","ENTITY_DECLARATION","Output","nodes","nsp","namespacePrefixIndex","xmldom","rootNspItem","namespacePrefixes","destroy","writeStartDocument","writeEndDocument","writeStartElement","qualifiedName","createElementNS","createNode","peek","declareNamespace","declareNamespaces","writeEndElement","writeCharacters","createTextNode","writeCdata","parts","jndex","writeCdataWithoutCdend","createCDATASection","writeAttribute","setAttribute","setAttributeNode","writeNode","importedNode","importNode","nindex","parentNspItem","nspItem","Mapping","Style","marshaller","unmarshaller","elementInfo","classInfo","enumLeafInfo","anyAttributePropertyInfo","anyElementPropertyInfo","attributePropertyInfo","elementMapPropertyInfo","elementPropertyInfo","elementsPropertyInfo","elementRefPropertyInfo","elementRefsPropertyInfo","valuePropertyInfo","STYLES","Styled","mappingStyle","standard","Binding","Marshalls","Element","marshalElement","context","output","scope","elementValue","convertToTypedNamedValue","declaredTypeInfo","typeInfo","actualTypeInfo","supportXsiType","typeInfoByValue","getTypeInfoByValue","typeName","xsiTypeName","xsiType","XSD","print","XSI","TYPE_QNAME","marshal","getTypeInfoByElementName","getElementInfo","AsElementRef","convertToNamedValue","propertyName","Unmarshalls","WrapperElement","mixed","unmarshalWrapperElement","input","unmarshalElement","allowTypedObject","allowDom","getTypeInfoByInputElement","typedNamedValue","unmarshal","convertFromTypedNamedValue","xsiTypeInfo","NAMESPACE_URI","TYPE","getTypeInfoByTypeNameKey","AsSimplifiedElementRef","Marshaller","marshalString","marshalDocument","Simplified","Unmarshaller","unmarshalString","unmarshalDocument","unmarshalURL","unmarshalFile","fileName","readFile","err","_result","TypeInfo","baseTypeInfo","isBasedOn","currentTypeInfo","ClassInfo","localName","instanceFactory","properties","propertiesMap","structure","targetNamespace","defaultElementNamespaceURI","defaultAttributeNamespaceURI","built","mapping","ln","dens","tns","dans","bti","inF","tn","ps","propertyInfos","getPropertyInfoByName","build","resolveTypeInfo","elements","anyAttribute","any","buildStructure","TYPE_NAME","attributeCount","attributeNameKey","attributeValue","unmarshalPropertyValue","propertyInfo","unmarshalProperty","elementNameKey","anyPropertyInfo","mixedPropertyInfo","propertyValue","setProperty","unmarshalValue","isMarshallable","isInstance","PropertyInfo","addProperty","type","propertyInfoCreators","aa","addDefaultNamespaces","ae","em","es","er","ers","v","EnumLeafInfo","entries","values","vs","items","reprint","ElementInfo","elementName","substitutionHead","en","ti","sh","sc","collection","col","mno","mxo","rq","required","minOccurs","maxOccurs","doBuild","AnyAttributePropertyInfo","convertFromAttributeName","convertToAttributeName","SingleTypePropertyInfo","AttributePropertyInfo","an","ValuePropertyInfo","cdata","asCDATA","AbstractElementsPropertyInfo","wrapperElementName","wen","item","buildStructureElements","ElementPropertyInfo","ElementsPropertyInfo","elementTypeInfos","elementTypeInfosMap","etis","elementTypeInfo","eti","etiti","etien","ElementMapPropertyInfo","entryTypeInfo","k","entry","collectionEntry","singleEntry","map","AbstractElementRefsPropertyInfo","dom","typed","mx","marshalItem","propertyElementTypeInfo","getPropertyElementTypeInfo","contextElementTypeInfo","buildStructureElementTypeInfos","substitutionMembers","getSubstitutionMembers","substitutionElementInfo","ElementRefPropertyInfo","ElementRefsPropertyInfo","AnyElementPropertyInfo","Module","typeInfos","elementInfos","tis","typeInfoName","initializeTypeInfos","eis","initializeElementInfos","typeInfoMappings","typeInfoMapping","createTypeInfo","elementInfoMappings","elementInfoMapping","createElementInfo","typeInfoCreators","initializeNames","createClassInfo","createEnumLeafInfo","createList","separator","sep","listTypeInfo","List","registerTypeInfos","registerTypeInfo","buildTypeInfos","registerElementInfos","registerElementInfo","buildElementInfos","cs","Standard","simplified","PREFIX","qname","AnyType","AnySimpleType","trimmedSeparator","simpleType","LIST","Strings","NormalizedString","Token","Language","Name","NCName","NMToken","NMTokens","Boolean","Base64Binary","charToByte","byteToChar","charTable","_char","charCodeAt","encode","decode","uarray","byte0","byte1","byte2","char0","char1","char2","char3","floor","j","HexBinary","charToQuartet","byteToDuplet","charTableLowerCase","toLowerCase","Number","Infinity","Float","MIN_VALUE","MAX_VALUE","Decimal","Integer","NonPositiveInteger","NegativeInteger","Long","Int","Short","Byte","NonNegativeInteger","UnsignedLong","UnsignedInt","UnsignedShort","UnsignedByte","PositiveInteger","Double","AnyURI","qName","RegExp","DATETIME_PATTERN","parseDateTime","DATE_PATTERN","parseDate","TIME_PATTERN","parseTime","GYEAR_MONTH_PATTERN","parseGYearMonth","GYEAR_PATTERN","parseGYear","GMONTH_DAY_PATTERN","parseGMonthDay","GMONTH_PATTERN","parseGMonth","GDAY_PATTERN","parseGDay","gYearMonthExpression","results","parseInt","parseTimezoneString","gYearExpression","gMonthDayExpression","gMonthExpression","gDayExpression","expression","parseFloat","TIMEZONE_PATTERN","printDateTime","printDate","printTime","printGYearMonth","printGMonthDay","printGYear","printGMonth","printGDay","fractionalString","printDateString","printTimeString","printTimezoneString","printYear","printMonth","printDay","printHour","printMinute","printSecond","printFractionalSecond","sign","getDate","getMonth","getFullYear","printSignedYear","printInteger","dotIndex","YEAR_PATTERN","MONTH_PATTERN","SINGLE_MONTH_PATTERN","DAY_PATTERN","SINGLE_DAY_PATTERN","DATE_PART_PATTERN","TIME_PART_PATTERN","Duration","years","months","days","hours","minutes","seconds","validate","ifExistsEnsureUnsignedInteger","message","ifExistsEnsureUnsignedNumber","durationExpression","PATTERN","duration","DateTime","DateTimeAsDate","unknownTimezone","calendar","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","localTimezone","originalTimezone","correctedValue","getHours","getMinutes","getSeconds","getMilliseconds","Time","TimeAsDate","time","correctedTime","timezoneHours","correctedTimeInSeconds","DateAsDate","localDate","nextDay","GYearMonth","GYear","GMonthDay","GDay","GMonth","ID","IDREF","IDREFS","NIL","Context","typeNameKeyToTypeInfo","substitutionMembersMap","scopedElementInfosMap","mappings","registerBuiltinTypeInfos","prefixNamespaces","createModule","processModules","builtinTypeInfos","substitutionHeadKey","scopeKey","scopedElementInfos","typeInfoByName","getTypeInfoByName","getTypeInfoByTypeName","typeNameKey","scopedElementInfo","globalScopedElementInfos","globalScopedElementInfo","createMarshaller","createUnmarshaller","defaultPrefix","scesim","dmn","SceSimRules","DmnRules","sceSimContext","dmnContext","sceSimUnmarshaller","dmnUnmarshaller","sceSimMarshaller","dmnMarshaller","getJsonFromSceSim","setSceSimFromJson","json","getJsonFromDmn","setDmnFromJson","useKeyPress","targetKey","fn","useEffect","ref","id","withModifier","withShift","isActive","current","addEventListener","downHandler","removeEventListener","event","keyCode","getAttribute","ctrlKey","metaKey","shiftKey","setCaretPosition","caretPos","selectionStart","focus","setSelectionRange","setCaretPositionAtEnd","end","focusCell","focusTimeout","scrollTo","getElementById","scrollIntoView","behavior","block","inline","getRowColumnFromId","currentIdArr","row","column","useDebounce","delay","useState","debouncedValue","setDebouncedValue","handler","clearTimeout","React","originalValue","path","isReadOnly","setEditable","deactivateAndFocusCell","onSave","setValue","savedValue","setSavedValue","overflown","setOverflown","isReadOnlyState","setReadOnlyState","thisElement","save","log","onMouseOver","isOverflown","scrollHeight","clientHeight","scrollWidth","clientWidth","className","style","cursor","textAlign","onChange","currentTarget","onBlur","aria-label","readOnly","distance","exitDelay","trigger","prevProps","nextProps","whyDidYouRender","customName","Select","onSelectToggleCallback","isExpanded","setExpanded","selected","setSelected","savedSelection","setSavedSelection","onToggle","querySelector","selectOptions","option","isSelected","expanded","toggleId","variant","SelectVariant","single","onSelect","selection","selections","ariaLabelledBy","onKeyDown","Spinner","size","headingLevel","Editor","columnDefs","columns","filteredRows","definitions","columnNames","lastForcedUpdate","editableCell","expandedSelect","setExpandedSelect","currentPage","setCurrentPage","columnDefsState","setColumnDefsState","fetchedRows","setFetchedRows","definitionsState","setDefinitionsState","columnNamesState","setColumnNamesState","lastForcedUpdateState","editorRef","setNumGivenColumns","numGiven","setNumExpectColumns","numExpect","JSON","stringify","num","deactivateCell","activateAndFocusCell","activateCell","onCellClick","onCellDoubleClick","copyText","select","execCommand","stopPropagation","activeElement","targetId","newRow","currentId","maxRow","newCol","maxCol","other","given","gridColumn","children","group","expect","givenChild","expectChild","dataLength","page","prevState","hasMore","loader","scrollableTarget","rowIndex","cell","columnGroup","columnName","component","cellIndex","inputId","typeArr","typeString","onClick","onDoubleClick","DefinitionsDrawerPanel","dmnFilePath","dmnFilePathState","setDmnFilePathState","onCopy","classNames","aria-labelledby","aria-controls","aria-expanded","color","complex","typeRef","toggleText","elementKey","simple","ChangeTracker","undoRedo","onUndo","onRedo","stateFromProps","setStateFromProps","getChangeText","undoList","isDisabled","change","isInline","changeTracker","redoList","HelpModal","isOpen","onClose","isSmall","title","actions","isFooterLeftAligned","Search","searchValue","setSearchValue","debouncedSearchTerm","otherItems","givenItems","expectItems","handleSearchChange","onSelectToggle","currentSelection","filter","placeholder","forEach","placeholderText","isGrouped","label","EditorToolbar","allRowsLength","filteredRowsLength","filterRows","isModelOpen","setModalOpen","toolbarStateFromProps","setToolbarStateFromProps","getDmnFilePath","simulation","simulationDescriptor","getColumnNames","factMappings","factMapping","expressionAlias","factAlias","expressionIdentifier","getColumns","byGroup","columnDefsOther","columnDefsGiven","columnDefsExpect","numOther","fieldIndices","field","getRows","rows","scenarios","scenario","dataRow","dataPath","totalColumnsLength","hasExpressionIdentifierName","from","factMappingValues","factMappingValue","rawValue","getDefinitions","itemDefinition","def","definitionTypes","itemComponent","allowedValues","drgElement","typeDefinitions","_title","question","choices","allowedAnswers","variable","EditorContainer","model","showSidePanel","increaseRows","dataJson","initialColumns","initialRows","isDrawerExpanded","setDrawerExpanded","skipUpdate","setUndoRedo","allRows","setAllRows","setFilteredRows","setDmnFilePath","dmnName","getDmnName","setColumns","initialColumnNames","setColumnNames","initialItemToColumnIndexMap","itemToColumnIndexMap","setItemToColumnIndexMap","filterSelection","setFilterSelection","now","setLastForcedUpdateState","initialDefinitions","setDefinitions","updatedColumns","updatedRows","indexMap","updatedDefinitions","clonedChanges","lastChange","previousState","previousValue","clonedRedoList","lastRedo","rowsToFilter","searchRE","rowsAfterFilter","found","sel","columnIndex","role","tabIndex","console"],"mappings":"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CACX5S,UAAW,gCACXD,aAAc,gDAEf,CACD4L,SAAU,mBACViH,YAAa,iBACbC,iBAAkB,gBACjB,CACDlH,SAAU,sBACViH,YAAa,oBACbC,iBAAkB,gBACjB,CACDlH,SAAU,sBACViH,YAAa,oBACbC,iBAAkB,cACjB,CACDlH,SAAU,yBACViH,YAAa,uBACbC,iBAAkB,cACjB,CACDlH,SAAU,eACViH,YAAa,cACZ,CACDjH,SAAU,yBACViH,YAAa,uBACbC,iBAAkB,0BACjB,CACDlH,SAAU,2BACViH,YAAa,yBACbC,iBAAkB,cACjB,CACDlH,SAAU,SACViH,YAAa,CACX5S,UAAW,QACXD,aAAc,gDAEf,CACD4L,SAAU,2BACViH,YAAa,0BACZ,CACDjH,SAAU,aACViH,YAAa,WACbC,iBAAkB,cACjB,CACDlH,SAAU,eACViH,YAAa,aACbC,iBAAkB,cACjB,CACDlH,SAAU,oBACViH,YAAa,kBACbC,iBAAkB,gBACjB,CACDlH,SAAU,mBACViH,YAAa,iBACbC,iBAAkB,YACjB,CACDlH,SAAU,oBACViH,YAAa,kBACbC,iBAAkB,aACjB,CACDlH,SAAU,cACViH,YAAa,CACX5S,UAAW,aACXD,aAAc,gDAEf,CACD4L,SAAU,aACViH,YAAa,WACbC,iBAAkB,cACjB,CACDlH,SAAU,YACViH,YAAa,UACbC,iBAAkB,cACjB,CACDlH,SAAU,WACViH,YAAa,SACbC,iBAAkB,gBACjB,CACDlH,SAAU,kBACViH,YAAa,gBACbC,iBAAkB,cACjB,CACDlH,SAAU,uBACViH,YAAa,qBACbC,iBAAkB,cACjB,CACDlH,SAAU,oBACViH,YAAa,kBACbC,iBAAkB,cACjB,CACDlH,SAAU,cACViH,YAAa,YACbC,iBAAkB,cACjB,CACDlH,SAAU,YACViH,YAAa,CACX5S,UAAW,WACXD,aAAc,+CAEhB8S,iBAAkB,CAChB7S,UAAW,QACXD,aAAc,6CAEf,CACD4L,SAAU,eACViH,YAAa,cACZ,CACDjH,SAAU,gBACViH,YAAa,cACbC,iBAAkB,gBACjB,CACDlH,SAAU,UACViH,YAAa,CACX5S,UAA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","file":"sce-sim-grid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"sceSimGrid\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sceSimGrid\"] = factory();\n\telse\n\t\troot[\"sceSimGrid\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = require(\"react\");","module.exports = require(\"@patternfly/react-core\");","module.exports = require(\"@patternfly/react-icons\");","module.exports = require(\"classnames\");","module.exports = require(\"react-infinite-scroll-component\");","module.exports = require(\"@patternfly/react-core/dist/js/experimental\");","/* eslint-disable */\r\n\r\n/**\r\n * Copied jsonix locally to make this fix: https://github.com/boundlessgeo/jsonix/commit/3342c011779261a860488b1a692fa09910cd273e\r\n * Webpack does not like the define. See https://github.com/highsource/jsonix/issues/171\r\n * \r\n * TODO: Get rid of this file and instead maybe monkey patch the dependency in node_modules\r\n */\r\n\r\nvar _jsonix_factory = function(_jsonix_xmldom, _jsonix_xmlhttprequest, _jsonix_fs)\r\n{\r\n\t// Complete Jsonix script is included below \r\nvar Jsonix = {\r\n\tsingleFile : true\r\n};\r\nJsonix.Util = {};\r\n\r\nJsonix.Util.extend = function(destination, source) {\r\n\tdestination = destination || {};\r\n\tif (source) {\r\n\t\t/*jslint forin: true */\r\n\t\tfor ( var property in source) {\r\n\t\t\tvar value = source[property];\r\n\t\t\tif (value !== undefined) {\r\n\t\t\t\tdestination[property] = value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * IE doesn't include the toString property when iterating over an\r\n\t\t * object's properties with the for(property in object) syntax.\r\n\t\t * Explicitly check if the source has its own toString property.\r\n\t\t */\r\n\r\n\t\t/*\r\n\t\t * FF/Windows < 2.0.0.13 reports \"Illegal operation on WrappedNative\r\n\t\t * prototype object\" when calling hawOwnProperty if the source object is\r\n\t\t * an instance of window.Event.\r\n\t\t */\r\n\r\n\t\t// REWORK\r\n\t\t// Node.js\r\n\t\t// sourceIsEvt = typeof window !== 'undefined' && window !== null && typeof window.Event === \"function\" && source instanceof window.Event;\r\n\r\n\t\t// if (!sourceIsEvt && source.hasOwnProperty && source.hasOwnProperty('toString')) {\r\n\t\t// \tdestination.toString = source.toString;\r\n\t\t// }\r\n\t}\r\n\treturn destination;\r\n};\r\nJsonix.Class = function() {\r\n\tvar Class = function() {\r\n\t\tthis.initialize.apply(this, arguments);\r\n\t};\r\n\tvar extended = {};\r\n\tvar empty = function() {\r\n\t};\r\n\tvar parent, initialize, Type;\r\n\tfor (var i = 0, len = arguments.length; i < len; ++i) {\r\n\t\tType = arguments[i];\r\n\t\tif (typeof Type == \"function\") {\r\n\t\t\t// make the class passed as the first argument the superclass\r\n\t\t\tif (i === 0 && len > 1) {\r\n\t\t\t\tinitialize = Type.prototype.initialize;\r\n\t\t\t\t// replace the initialize method with an empty function,\r\n\t\t\t\t// because we do not want to create a real instance here\r\n\t\t\t\tType.prototype.initialize = empty;\r\n\t\t\t\t// the line below makes sure that the new class has a\r\n\t\t\t\t// superclass\r\n\t\t\t\textended = new Type();\r\n\t\t\t\t// restore the original initialize method\r\n\t\t\t\tif (initialize === undefined) {\r\n\t\t\t\t\tdelete Type.prototype.initialize;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tType.prototype.initialize = initialize;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// get the prototype of the superclass\r\n\t\t\tparent = Type.prototype;\r\n\t\t} else {\r\n\t\t\t// in this case we're extending with the prototype\r\n\t\t\tparent = Type;\r\n\t\t}\r\n\t\tJsonix.Util.extend(extended, parent);\r\n\t}\r\n\tClass.prototype = extended;\r\n\treturn Class;\r\n};\r\n\r\nJsonix.XML = {\r\n\t\tXMLNS_NS : 'http://www.w3.org/2000/xmlns/',\r\n\t\tXMLNS_P : 'xmlns'\r\n};\r\n\r\n\r\nJsonix.DOM = {\r\n\tisDomImplementationAvailable : function () {\r\n\t\tif (typeof _jsonix_xmldom !== 'undefined')\r\n\t\t{\r\n\t\t\treturn true;\r\n\t\t} else if (typeof document !== 'undefined' && Jsonix.Util.Type.exists(document.implementation) && Jsonix.Util.Type.isFunction(document.implementation.createDocument)) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t},\r\n\tcreateDocument : function() {\r\n\t\t// REWORK\r\n\t\t// Node.js\r\n\t\tif (typeof _jsonix_xmldom !== 'undefined')\r\n\t\t{\r\n\t\t\treturn new (_jsonix_xmldom.DOMImplementation)().createDocument();\r\n\t\t} else if (typeof document !== 'undefined' && Jsonix.Util.Type.exists(document.implementation) && Jsonix.Util.Type.isFunction(document.implementation.createDocument)) {\r\n\t\t\treturn document.implementation.createDocument('', '', null);\r\n\t\t} else if (typeof ActiveXObject !== 'undefined') {\r\n\t\t\treturn new ActiveXObject('MSXML2.DOMDocument');\r\n\t\t} else {\r\n\t\t\tthrow new Error('Error created the DOM document.');\r\n\t\t}\r\n\t},\r\n\tserialize : function(node) {\r\n\t\tJsonix.Util.Ensure.ensureExists(node);\r\n\t\t// REWORK\r\n\t\t// Node.js\r\n\t\tif (typeof _jsonix_xmldom !== 'undefined')\r\n\t\t{\r\n\t\t\treturn (new (_jsonix_xmldom).XMLSerializer()).serializeToString(node);\r\n\t\t} else if (Jsonix.Util.Type.exists(XMLSerializer)) {\r\n\t\t\treturn (new XMLSerializer()).serializeToString(node);\r\n\t\t} else if (Jsonix.Util.Type.exists(node.xml)) {\r\n\t\t\treturn node.xml;\r\n\t\t} else {\r\n\t\t\tthrow new Error('Could not serialize the node, neither XMLSerializer nor the [xml] property were found.');\r\n\t\t}\r\n\t},\r\n\tparse : function(text) {\r\n\t\tJsonix.Util.Ensure.ensureExists(text);\r\n\t\tif (typeof _jsonix_xmldom !== 'undefined')\r\n\t\t{\r\n\t\t\treturn (new (_jsonix_xmldom).DOMParser()).parseFromString(text, 'application/xml');\r\n\t\t} else if (typeof DOMParser != 'undefined') {\r\n\t\t\treturn (new DOMParser()).parseFromString(text, 'application/xml');\r\n\t\t} else if (typeof ActiveXObject != 'undefined') {\r\n\t\t\tvar doc = Jsonix.DOM.createDocument('', '');\r\n\t\t\tdoc.loadXML(text);\r\n\t\t\treturn doc;\r\n\t\t} else {\r\n\t\t\tvar url = 'data:text/xml;charset=utf-8,' + encodeURIComponent(text);\r\n\t\t\tvar request = new XMLHttpRequest();\r\n\t\t\trequest.open('GET', url, false);\r\n\t\t\tif (request.overrideMimeType) {\r\n\t\t\t\trequest.overrideMimeType(\"text/xml\");\r\n\t\t\t}\r\n\t\t\trequest.send(null);\r\n\t\t\treturn request.responseXML;\r\n\t\t}\r\n\t},\r\n\tload : function(url, callback, options) {\r\n\r\n\t\tvar request = Jsonix.Request.INSTANCE;\r\n\r\n\t\trequest.issue(\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t\tfunction(transport) {\r\n\t\t\t\t\t\t\tvar result;\r\n\t\t\t\t\t\t\tif (Jsonix.Util.Type.exists(transport.responseXML) && Jsonix.Util.Type.exists(transport.responseXML.documentElement)) {\r\n\t\t\t\t\t\t\t\tresult = transport.responseXML;\r\n\t\t\t\t\t\t\t} else if (Jsonix.Util.Type.isString(transport.responseText)) {\r\n\t\t\t\t\t\t\t\tresult = Jsonix.DOM.parse(transport.responseText);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthrow new Error('Response does not have valid [responseXML] or [responseText].');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcallback(result);\r\n\r\n\t\t\t\t\t\t}, function(transport) {\r\n\t\t\t\t\t\t\tthrow new Error('Could not retrieve XML from URL [' + url\t+ '].');\r\n\r\n\t\t\t\t\t\t}, options);\r\n\t},\r\n\txlinkFixRequired : null,\r\n\tisXlinkFixRequired : function ()\r\n\t{\r\n\t\tif (Jsonix.DOM.xlinkFixRequired === null)\r\n\t\t{\r\n\t\t\tif (typeof navigator === 'undefined')\r\n\t\t\t{\r\n\t\t\t\tJsonix.DOM.xlinkFixRequired = false;\r\n\t\t\t}\r\n\t\t\telse if (!!navigator.userAgent && (/Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)))\r\n\t\t\t{\r\n\t\t\t\tvar doc = Jsonix.DOM.createDocument();\r\n\t\t\t\tvar el = doc.createElement('test');\r\n\t\t\t\tel.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', 'urn:test');\r\n\t\t\t\tdoc.appendChild(el);\r\n\t\t\t\tvar testString = Jsonix.DOM.serialize(doc);\r\n\t\t\t\tJsonix.DOM.xlinkFixRequired = (testString.indexOf('xmlns:xlink') === -1);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tJsonix.DOM.xlinkFixRequired = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn Jsonix.DOM.xlinkFixRequired;\r\n\t}\r\n};\r\nJsonix.Request = Jsonix\r\n\t\t.Class({\r\n\t\t\t// REWORK\r\n\t\t\tfactories : [ function() {\r\n\t\t\t\treturn new XMLHttpRequest();\r\n\t\t\t}, function() {\r\n\t\t\t\treturn new ActiveXObject('Msxml2.XMLHTTP');\r\n\t\t\t}, function() {\r\n\t\t\t\treturn new ActiveXObject(\"Msxml2.XMLHTTP.6.0\");\r\n\t\t\t}, function() {\r\n\t\t\t\treturn new ActiveXObject(\"Msxml2.XMLHTTP.3.0\");\r\n\t\t\t}, function() {\r\n\t\t\t\treturn new ActiveXObject('Microsoft.XMLHTTP');\r\n\t\t\t}, function() {\r\n\t\t\t\t// Node.js\r\n\t\t\t\tif (typeof _jsonix_xmlhttprequest !== 'undefined')\r\n\t\t\t\t{\r\n\t\t\t\t\tvar XMLHttpRequest = _jsonix_xmlhttprequest.XMLHttpRequest;\r\n\t\t\t\t\treturn new XMLHttpRequest();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}],\r\n\t\t\tinitialize : function() {\r\n\t\t\t},\r\n\t\t\tissue : function(url, onSuccess, onFailure, options) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureString(url);\r\n\t\t\t\tif (Jsonix.Util.Type.exists(onSuccess)) {\r\n\t\t\t\t\tJsonix.Util.Ensure.ensureFunction(onSuccess);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonSuccess = function() {\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif (Jsonix.Util.Type.exists(onFailure)) {\r\n\t\t\t\t\tJsonix.Util.Ensure.ensureFunction(onFailure);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonFailure = function() {\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tif (Jsonix.Util.Type.exists(options)) {\r\n\t\t\t\t\tJsonix.Util.Ensure.ensureObject(options);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptions = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar transport = this.createTransport();\r\n\r\n\t\t\t\tvar method = Jsonix.Util.Type.isString(options.method) ? options.method\r\n\t\t\t\t\t\t: 'GET';\r\n\t\t\t\tvar async = Jsonix.Util.Type.isBoolean(options.async) ? options.async\r\n\t\t\t\t\t\t: true;\r\n\t\t\t\tvar proxy = Jsonix.Util.Type.isString(options.proxy) ? options.proxy\r\n\t\t\t\t\t\t: Jsonix.Request.PROXY;\r\n\r\n\t\t\t\tvar user = Jsonix.Util.Type.isString(options.user) ? options.user\r\n\t\t\t\t\t\t: null;\r\n\t\t\t\tvar password = Jsonix.Util.Type.isString(options.password) ? options.password\r\n\t\t\t\t\t\t: null;\r\n\r\n\t\t\t\tif (Jsonix.Util.Type.isString(proxy) && (url.indexOf(\"http\") === 0)) {\r\n\t\t\t\t\turl = proxy + encodeURIComponent(url);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (Jsonix.Util.Type.isString(user)) {\r\n\t\t\t\t\ttransport.open(method, url, async, user, password);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttransport.open(method, url, async);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (Jsonix.Util.Type.isObject(options.headers)) {\r\n\r\n\t\t\t\t\tfor ( var header in options.headers) {\r\n\t\t\t\t\t\tif (options.headers.hasOwnProperty(header)) {\r\n\t\t\t\t\t\t\ttransport.setRequestHeader(header,\r\n\t\t\t\t\t\t\t\t\toptions.headers[header]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar data = Jsonix.Util.Type.exists(options.data) ? options.data\r\n\t\t\t\t\t\t: null;\r\n\t\t\t\tif (!async) {\r\n\t\t\t\t\ttransport.send(data);\r\n\t\t\t\t\tthis.handleTransport(transport, onSuccess, onFailure);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar that = this;\r\n\t\t\t\t\tif (typeof window !== 'undefined') {\r\n\r\n\t\t\t\t\t\ttransport.onreadystatechange = function() {\r\n\t\t\t\t\t\t\tthat.handleTransport(transport, onSuccess,\r\n\t\t\t\t\t\t\t\t\tonFailure);\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\t\t\ttransport.send(data);\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ttransport.onreadystatechange = function() {\r\n\t\t\t\t\t\t\tthat.handleTransport(transport, onSuccess, onFailure);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\ttransport.send(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn transport;\r\n\r\n\t\t\t},\r\n\t\t\thandleTransport : function(transport, onSuccess, onFailure) {\r\n\t\t\t\tif (transport.readyState == 4) {\r\n\t\t\t\t\tif (!transport.status || (transport.status >= 200 && transport.status < 300)) {\r\n\t\t\t\t\t\tonSuccess(transport);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (transport.status && (transport.status < 200 || transport.status >= 300)) {\r\n\t\t\t\t\t\tonFailure(transport);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcreateTransport : function() {\r\n\t\t\t\tfor ( var index = 0, length = this.factories.length; index < length; index++) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar transport = this.factories[index]();\r\n\t\t\t\t\t\tif (transport !== null) {\r\n\t\t\t\t\t\t\treturn transport;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t// TODO log\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthrow new Error('Could not create XML HTTP transport.');\r\n\t\t\t},\r\n\t\t\tCLASS_NAME : 'Jsonix.Request'\r\n\t\t});\r\nJsonix.Request.INSTANCE = new Jsonix.Request();\r\nJsonix.Request.PROXY = null;\r\nJsonix.Schema = {};\r\nJsonix.Model = {};\r\nJsonix.Util.Type = {\r\n\texists : function(value) {\r\n\t\treturn (typeof value !== 'undefined' && value !== null);\r\n\t},\r\n\tisUndefined : function(value) {\r\n\t\treturn typeof value === 'undefined';\r\n\t},\r\n\tisString : function(value) {\r\n\t\treturn typeof value === 'string';\r\n\t},\r\n\tisBoolean : function(value) {\r\n\t\treturn typeof value === 'boolean';\r\n\t},\r\n\tisObject : function(value) {\r\n\t\treturn typeof value === 'object';\r\n\t},\r\n\tisFunction : function(value) {\r\n\t\treturn typeof value === 'function';\r\n\t},\r\n\tisNumber : function(value) {\r\n\t\treturn (typeof value === 'number') && !isNaN(value);\r\n\t},\r\n\tisNumberOrNaN : function(value) {\r\n\t\treturn (value === +value) || (Object.prototype.toString.call(value) === '[object Number]');\r\n\t},\r\n\tisNaN : function(value) {\r\n\t\treturn Jsonix.Util.Type.isNumberOrNaN(value) && isNaN(value);\r\n\t},\r\n\tisArray : function(value) {\r\n\t\t// return value instanceof Array;\r\n\t\treturn !!(value && value.concat && value.unshift && !value.callee);\r\n\t},\r\n\tisDate : function(value) {\r\n\t\treturn !!(value && value.getTimezoneOffset && value.setUTCFullYear);\r\n\t},\r\n\tisRegExp : function(value) {\r\n\t\treturn !!(value && value.test && value.exec && (value.ignoreCase || value.ignoreCase === false));\r\n\t},\r\n\tisNode : function(value) {\r\n\t\treturn (typeof Node === \"object\" || typeof Node === \"function\") ? (value instanceof Node) : (value && (typeof value === \"object\") && (typeof value.nodeType === \"number\") && (typeof value.nodeName===\"string\"));\r\n\t},\r\n\tisEqual : function(a, b, report) {\r\n\t\tvar doReport = Jsonix.Util.Type.isFunction(report);\r\n\t\t// TODO rework\r\n\t\tvar _range = function(start, stop, step) {\r\n\t\t\tvar args = slice.call(arguments);\r\n\t\t\tvar solo = args.length <= 1;\r\n\t\t\tvar start_ = solo ? 0 : args[0];\r\n\t\t\tvar stop_ = solo ? args[0] : args[1];\r\n\t\t\tvar step_ = args[2] || 1;\r\n\t\t\tvar len = Math.max(Math.ceil((stop_ - start_) / step_), 0);\r\n\t\t\tvar idx = 0;\r\n\t\t\tvar range = new Array(len);\r\n\t\t\twhile (idx < len) {\r\n\t\t\t\trange[idx++] = start_;\r\n\t\t\t\tstart_ += step_;\r\n\t\t\t}\r\n\t\t\treturn range;\r\n\t\t};\r\n\r\n\t\tvar _keys = Object.keys || function(obj) {\r\n\t\t\tif (Jsonix.Util.Type.isArray(obj)) {\r\n\t\t\t\treturn _range(0, obj.length);\r\n\t\t\t}\r\n\t\t\tvar keys = [];\r\n\t\t\tfor ( var key in obj) {\r\n\t\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\t\tkeys[keys.length] = key;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn keys;\r\n\t\t};\r\n\r\n\t\t// Check object identity.\r\n\t\tif (a === b) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check if both are NaNs\r\n\t\tif (Jsonix.Util.Type.isNaN(a) && Jsonix.Util.Type.isNaN(b)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// Different types?\r\n\t\tvar atype = typeof a;\r\n\t\tvar btype = typeof b;\r\n\t\tif (atype != btype) {\r\n\t\t\tif (doReport) {\r\n\t\t\t\treport('Types differ [' + atype + '], [' + btype + '].');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Basic equality test (watch out for coercions).\r\n\t\tif (a == b) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// One is falsy and the other truthy.\r\n\t\tif ((!a && b) || (a && !b)) {\r\n\t\t\tif (doReport) {\r\n\t\t\t\treport('One is falsy, the other is truthy.');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Check dates' integer values.\r\n\t\tif (Jsonix.Util.Type.isDate(a) && Jsonix.Util.Type.isDate(b)) {\r\n\t\t\treturn a.getTime() === b.getTime();\r\n\t\t}\r\n\t\t// Both are NaN?\r\n\t\tif (Jsonix.Util.Type.isNaN(a) && Jsonix.Util.Type.isNaN(b)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Compare regular expressions.\r\n\t\tif (Jsonix.Util.Type.isRegExp(a) && Jsonix.Util.Type.isRegExp(b)) {\r\n\t\t\treturn a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline;\r\n\t\t}\r\n\t\t\r\n\t\tif (Jsonix.Util.Type.isNode(a) && Jsonix.Util.Type.isNode(b))\r\n\t\t{\r\n\t\t\tvar aSerialized = Jsonix.DOM.serialize(a);\r\n\t\t\tvar bSerialized = Jsonix.DOM.serialize(b);\r\n\t\t\tif (aSerialized !== bSerialized)\r\n\t\t\t{\r\n\t\t\t\tif (doReport)\r\n\t\t\t\t{\r\n\t\t\t\t\treport('Nodes differ.');\r\n\t\t\t\t\treport('A=' + aSerialized);\r\n\t\t\t\t\treport('B=' + bSerialized);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// If a is not an object by this point, we can't handle it.\r\n\t\tif (atype !== 'object') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Check for different array lengths before comparing contents.\r\n\t\tif (Jsonix.Util.Type.isArray(a) && (a.length !== b.length)) {\r\n\t\t\tif (doReport) {\r\n\t\t\t\t\treport('Lengths differ.');\r\n\t\t\t\t\treport('A.length=' + a.length);\r\n\t\t\t\t\treport('B.length=' + b.length);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Nothing else worked, deep compare the contents.\r\n\t\tvar aKeys = _keys(a);\r\n\t\tvar bKeys = _keys(b);\r\n\t\t// Different object sizes?\r\n\t\tif (aKeys.length !== bKeys.length) {\r\n\t\t\tif (doReport) {\r\n\t\t\t\treport('Different number of properties [' + aKeys.length + '], [' + bKeys.length + '].');\r\n\t\t\t}\r\n\t\t\tfor ( var andex = 0; andex < aKeys.length; andex++) {\r\n\t\t\t\tif (doReport) {\r\n\t\t\t\t\treport('A [' + aKeys[andex] + ']=' + a[aKeys[andex]]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor ( var bndex = 0; bndex < bKeys.length; bndex++) {\r\n\t\t\t\tif (doReport) {\r\n\t\t\t\t\treport('B [' + bKeys[bndex] + ']=' + b[bKeys[bndex]]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Recursive comparison of contents.\r\n\t\tfor (var kndex = 0; kndex < aKeys.length; kndex++) {\r\n\t\t\tvar key = aKeys[kndex];\r\n\t\t\tif (!(key in b) || !Jsonix.Util.Type.isEqual(a[key], b[key], report)) {\r\n\t\t\t\tif (doReport) {\r\n\t\t\t\t\treport('One of the properties differ.');\r\n\t\t\t\t\treport('Key: [' + key + '].');\r\n\t\t\t\t\treport('Left: [' + a[key] + '].');\r\n\t\t\t\t\treport('Right: [' + b[key] + '].');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tcloneObject : function (source, target)\r\n\t{\r\n\t\ttarget = target || {};\r\n\t\tfor (var p in source)\r\n\t\t{\r\n\t\t\tif (source.hasOwnProperty(p))\r\n\t\t\t{\r\n\t\t\t\ttarget[p] = source[p];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn target;\r\n\t},\r\n\tdefaultValue : function()\r\n\t{\r\n\t\tvar args = arguments;\r\n\t\tif (args.length === 0)\r\n\t\t{\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar defaultValue = args[args.length - 1];\r\n\t\t\tvar typeOfDefaultValue = typeof defaultValue;\r\n\t\t\tfor (var index = 0; index < args.length - 1; index++)\r\n\t\t\t{\r\n\t\t\t\tvar candidateValue = args[index];\r\n\t\t\t\tif (typeof candidateValue === typeOfDefaultValue)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn candidateValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn defaultValue;\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n};\r\nJsonix.Util.NumberUtils = {\r\n\tisInteger : function(value) {\r\n\t\treturn Jsonix.Util.Type.isNumber(value) && ((value % 1) === 0);\r\n\t}\r\n};\r\nJsonix.Util.StringUtils = {\r\n\ttrim : (!!String.prototype.trim) ?\r\n\tfunction(str) {\r\n\t\tJsonix.Util.Ensure.ensureString(str);\r\n\t\treturn str.trim();\r\n\t} :\r\n\tfunction(str) {\r\n\t\tJsonix.Util.Ensure.ensureString(str);\r\n\t\treturn str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\r\n\t},\r\n\t/* isEmpty : function(str) {\r\n\t\tvar wcm = Jsonix.Util.StringUtils.whitespaceCharactersMap;\r\n\t\tfor (var index = 0; index < str.length; index++)\r\n\t\t{\r\n\t\t\tif (!wcm[str[index]])\r\n\t\t\t{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, */\r\n\tisEmpty : function(str) {\r\n\t\tvar length = str.length;\r\n\t\tif (!length) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tfor (var index = 0; index < length; index++)\r\n\t\t{\r\n\t\t\tvar c = str[index];\r\n\t\t\tif (c === ' ')\r\n\t\t\t{\r\n\t\t\t\t// skip\r\n\t\t\t}\r\n\t\t\telse if (c > '\\u000D' && c < '\\u0085')\r\n\t\t\t{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\telse if (c < '\\u00A0')\r\n\t\t\t{\r\n\t\t\t\tif (c < '\\u0009')\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\telse if (c > '\\u0085')\r\n\t\t\t\t{\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (c > '\\u00A0')\r\n\t\t\t{\r\n\t\t\t\tif (c < '\\u2028')\r\n\t\t\t\t{\r\n\t\t\t\t\tif (c < '\\u180E')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (c < '\\u1680')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if(c > '\\u1680')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (c > '\\u180E')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (c < '\\u2000')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (c > '\\u200A')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (c > '\\u2029')\r\n\t\t\t\t{\r\n\t\t\t\t\tif (c < '\\u205F')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (c < '\\u202F')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (c > '\\u202F')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (c > '\\u205F')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (c < '\\u3000')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (c > '\\u3000')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\tisNotBlank : function(str) {\r\n\t\treturn Jsonix.Util.Type.isString(str) && !Jsonix.Util.StringUtils.isEmpty(str);\r\n\t},\r\n\twhitespaceCharacters: '\\u0009\\u000A\\u000B\\u000C\\u000D \\u0085\\u00A0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000',\r\n\twhitespaceCharactersMap: {\r\n\t\t'\\u0009' : true,\r\n\t\t'\\u000A' : true,\r\n\t\t'\\u000B' : true,\r\n\t\t'\\u000C' : true,\r\n\t\t'\\u000D' : true,\r\n\t\t' ' : true,\r\n\t\t'\\u0085' : true,\r\n\t\t'\\u00A0' : true,\r\n\t\t'\\u1680' : true,\r\n\t\t'\\u180E' : true,\r\n\t\t'\\u2000' : true,\r\n\t\t'\\u2001' : true,\r\n\t\t'\\u2002' : true,\r\n\t\t'\\u2003' : true,\r\n\t\t'\\u2004' : true,\r\n\t\t'\\u2005' : true,\r\n\t\t'\\u2006' : true,\r\n\t\t'\\u2007' : true,\r\n\t\t'\\u2008' : true,\r\n\t\t'\\u2009' : true,\r\n\t\t'\\u200A' : true,\r\n\t\t'\\u2028' : true,\r\n\t\t'\\u2029' : true,\r\n\t\t'\\u202F' : true,\r\n\t\t'\\u205F' : true,\r\n\t\t'\\u3000' : true\r\n\t},\r\n\tsplitBySeparatorChars : function(str, separatorChars) {\r\n\t\tJsonix.Util.Ensure.ensureString(str);\r\n\t\tJsonix.Util.Ensure.ensureString(separatorChars);\r\n\t\tvar len = str.length;\r\n\t\tif (len === 0) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tif (separatorChars.length === 1)\r\n\t\t{\r\n\t\t\treturn str.split(separatorChars);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar list = [];\r\n\t\t\tvar sizePlus1 = 1;\r\n\t\t\tvar i = 0;\r\n\t\t\tvar start = 0;\r\n\t\t\tvar match = false;\r\n\t\t\tvar lastMatch = false;\r\n\t\t\tvar max = -1;\r\n\t\t\tvar preserveAllTokens = false;\r\n\t\t\t// standard case\r\n\t\t\t\twhile (i < len) {\r\n\t\t\t\t\t\tif (separatorChars.indexOf(str.charAt(i)) >= 0) {\r\n\t\t\t\t\t\t\t\tif (match || preserveAllTokens) {\r\n\t\t\t\t\t\t\t\t\t\tlastMatch = true;\r\n\t\t\t\t\t\t\t\t\t\tif (sizePlus1++ == max) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ti = len;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlastMatch = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tlist.push(str.substring(start, i));\r\n\t\t\t\t\t\t\t\t\t\tmatch = false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstart = ++i;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastMatch = false;\r\n\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t\tif (match || (preserveAllTokens && lastMatch)) {\r\n\t\t\t\t\tlist.push(str.substring(start, i));\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t}\r\n\t}\r\n};\r\nJsonix.Util.Ensure = {\r\n\tensureBoolean : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isBoolean(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be a boolean.');\r\n\t\t}\r\n\t},\r\n\tensureString : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isString(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be a string.');\r\n\t\t}\r\n\t},\r\n\tensureNumber : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isNumber(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be a number.');\r\n\t\t}\r\n\t},\r\n\tensureNumberOrNaN : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isNumberOrNaN(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be a number or NaN.');\r\n\t\t}\r\n\t},\r\n\tensureInteger : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isNumber(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be an integer, but it is not a number.');\r\n\t\t} else if (!Jsonix.Util.NumberUtils.isInteger(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be an integer.');\r\n\t\t}\r\n\t},\r\n\tensureDate : function(value) {\r\n\t\tif (!(value instanceof Date)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be a date.');\r\n\t\t}\r\n\t},\r\n\tensureObject : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isObject(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be an object.');\r\n\t\t}\r\n\t},\r\n\tensureArray : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isArray(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be an array.');\r\n\t\t}\r\n\t},\r\n\tensureFunction : function(value) {\r\n\t\tif (!Jsonix.Util.Type.isFunction(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] must be a function.');\r\n\t\t}\r\n\t},\r\n\tensureExists : function(value) {\r\n\t\tif (!Jsonix.Util.Type.exists(value)) {\r\n\t\t\tthrow new Error('Argument [' + value + '] does not exist.');\r\n\t\t}\r\n\t}\r\n};\r\nJsonix.XML.QName = Jsonix.Class({\r\n\tkey : null,\r\n\tnamespaceURI : null,\r\n\tlocalPart : null,\r\n\tprefix : null,\r\n\tstring : null,\r\n\tinitialize : function(one, two, three) {\r\n\t\tvar namespaceURI;\r\n\t\tvar localPart;\r\n\t\tvar prefix;\r\n\t\tvar key;\r\n\t\tvar string;\r\n\r\n\t\tif (!Jsonix.Util.Type.exists(two)) {\r\n\t\t\tnamespaceURI = '';\r\n\t\t\tlocalPart = one;\r\n\t\t\tprefix = '';\r\n\t\t} else if (!Jsonix.Util.Type.exists(three)) {\r\n\t\t\tnamespaceURI = Jsonix.Util.Type.exists(one) ? one : '';\r\n\t\t\tlocalPart = two;\r\n\t\t\tvar colonPosition = two.indexOf(':');\r\n\t\t\tif (colonPosition > 0 && colonPosition < two.length) {\r\n\t\t\t\tprefix = two.substring(0, colonPosition);\r\n\t\t\t\tlocalPart = two.substring(colonPosition + 1);\r\n\t\t\t} else {\r\n\t\t\t\tprefix = '';\r\n\t\t\t\tlocalPart = two;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tnamespaceURI = Jsonix.Util.Type.exists(one) ? one : '';\r\n\t\t\tlocalPart = two;\r\n\t\t\tprefix = Jsonix.Util.Type.exists(three) ? three : '';\r\n\t\t}\r\n\t\tthis.namespaceURI = namespaceURI;\r\n\t\tthis.localPart = localPart;\r\n\t\tthis.prefix = prefix;\r\n\r\n\t\tthis.key = (namespaceURI !== '' ? ('{' + namespaceURI + '}') : '') + localPart;\r\n\t\tthis.string = (namespaceURI !== '' ? ('{' + namespaceURI + '}') : '') + (prefix !== '' ? (prefix + ':') : '') + localPart;\r\n\t},\r\n\ttoString : function() {\r\n\t\treturn this.string;\r\n\t},\r\n\t// foo:bar\r\n\ttoCanonicalString: function(namespaceContext) {\r\n\t\tvar canonicalPrefix = namespaceContext ? namespaceContext.getPrefix(this.namespaceURI, this.prefix) : this.prefix;\r\n\t\treturn this.prefix + (this.prefix === '' ? '' : ':') + this.localPart;\r\n\t},\r\n\tclone : function() {\r\n\t\treturn new Jsonix.XML.QName(this.namespaceURI, this.localPart, this.prefix);\r\n\t},\r\n\tequals : function(that) {\r\n\t\tif (!that) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (this.namespaceURI == that.namespaceURI) && (this.localPart == that.localPart);\r\n\t\t}\r\n\r\n\t},\r\n\tCLASS_NAME : \"Jsonix.XML.QName\"\r\n});\r\nJsonix.XML.QName.fromString = function(qNameAsString, namespaceContext, defaultNamespaceURI) {\r\n\tvar leftBracket = qNameAsString.indexOf('{');\r\n\tvar rightBracket = qNameAsString.lastIndexOf('}');\r\n\tvar namespaceURI;\r\n\tvar prefixedName;\r\n\tif ((leftBracket === 0) && (rightBracket > 0) && (rightBracket < qNameAsString.length)) {\r\n\t\tnamespaceURI = qNameAsString.substring(1, rightBracket);\r\n\t\tprefixedName = qNameAsString.substring(rightBracket + 1);\r\n\t} else {\r\n\t\tnamespaceURI = null;\r\n\t\tprefixedName = qNameAsString;\r\n\t}\r\n\tvar colonPosition = prefixedName.indexOf(':');\r\n\tvar prefix;\r\n\tvar localPart;\r\n\tif (colonPosition > 0 && colonPosition < prefixedName.length) {\r\n\t\tprefix = prefixedName.substring(0, colonPosition);\r\n\t\tlocalPart = prefixedName.substring(colonPosition + 1);\r\n\t} else {\r\n\t\tprefix = '';\r\n\t\tlocalPart = prefixedName;\r\n\t}\r\n\t// If namespace URI was not set and we have a namespace context, try to find the namespace URI via this context\r\n\tif (namespaceURI === null)\r\n\t{\r\n\t\tif (prefix === '' && Jsonix.Util.Type.isString(defaultNamespaceURI))\r\n\t\t{\r\n\t\t\tnamespaceURI = defaultNamespaceURI;\r\n\t\t}\r\n\t\telse if (namespaceContext)\r\n\t\t{\r\n\t\t\tnamespaceURI = namespaceContext.getNamespaceURI(prefix);\r\n\t\t}\r\n\t}\r\n\t// If we don't have a namespace URI, assume '' by default\r\n\t// TODO document the assumption\r\n\tif (!Jsonix.Util.Type.isString(namespaceURI))\r\n\t{\r\n\t\tnamespaceURI = defaultNamespaceURI || '';\r\n\t}\r\n\treturn new Jsonix.XML.QName(namespaceURI, localPart, prefix);\r\n};\r\nJsonix.XML.QName.fromObject = function(object) {\r\n\tJsonix.Util.Ensure.ensureObject(object);\r\n\tif (object instanceof Jsonix.XML.QName || (Jsonix.Util.Type.isString(object.CLASS_NAME) && object.CLASS_NAME === 'Jsonix.XML.QName')) {\r\n\t\treturn object;\r\n\t}\r\n\tvar localPart = object.localPart||object.lp||null;\r\n\tJsonix.Util.Ensure.ensureString(localPart);\r\n\tvar namespaceURI = object.namespaceURI||object.ns||'';\r\n\tvar prefix = object.prefix||object.p||'';\r\n\treturn new Jsonix.XML.QName(namespaceURI, localPart, prefix);\r\n};\r\nJsonix.XML.QName.fromObjectOrString = function(value, namespaceContext, defaultNamespaceURI) {\r\n\tif (Jsonix.Util.Type.isString(value))\r\n\t{\r\n\t\treturn Jsonix.XML.QName.fromString(value, namespaceContext, defaultNamespaceURI);\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn Jsonix.XML.QName.fromObject(value);\r\n\t}\r\n};\r\nJsonix.XML.QName.key = function(namespaceURI, localPart) {\r\n\tJsonix.Util.Ensure.ensureString(localPart);\r\n\tif (namespaceURI) {\r\n\t\tvar colonPosition = localPart.indexOf(':');\r\n\t\tvar localName;\r\n\t\tif (colonPosition > 0 && colonPosition < localPart.length) {\r\n\t\t\tlocalName = localPart.substring(colonPosition + 1);\r\n\t\t} else {\r\n\t\t\tlocalName = localPart;\r\n\t\t}\r\n\t\treturn '{' + namespaceURI + '}' + localName;\r\n\t} else {\r\n\t\treturn localPart;\r\n\t}\r\n};\r\nJsonix.XML.Calendar = Jsonix.Class({\r\n\tyear : NaN,\r\n\tmonth : NaN,\r\n\tday : NaN,\r\n\thour : NaN,\r\n\tminute : NaN,\r\n\tsecond : NaN,\r\n\tfractionalSecond : NaN,\r\n\ttimezone : NaN,\r\n\tdate : null,\r\n\tinitialize : function(data) {\r\n\t\tJsonix.Util.Ensure.ensureObject(data);\r\n\t\t// Year\r\n\t\tif (Jsonix.Util.Type.exists(data.year)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(data.year);\r\n\t\t\tJsonix.XML.Calendar.validateYear(data.year);\r\n\t\t\tthis.year = data.year;\r\n\t\t} else {\r\n\t\t\tthis.year = NaN;\r\n\t\t}\r\n\t\t// Month\r\n\t\tif (Jsonix.Util.Type.exists(data.month)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(data.month);\r\n\t\t\tJsonix.XML.Calendar.validateMonth(data.month);\r\n\t\t\tthis.month = data.month;\r\n\t\t} else {\r\n\t\t\tthis.month = NaN;\r\n\t\t}\r\n\t\t// Day\r\n\t\tif (Jsonix.Util.Type.exists(data.day)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(data.day);\r\n\t\t\tif (Jsonix.Util.NumberUtils.isInteger(data.year) && Jsonix.Util.NumberUtils.isInteger(data.month)) {\r\n\t\t\t\tJsonix.XML.Calendar.validateYearMonthDay(data.year, data.month, data.day);\r\n\t\t\t} else if (Jsonix.Util.NumberUtils.isInteger(data.month)) {\r\n\t\t\t\tJsonix.XML.Calendar.validateMonthDay(data.month, data.day);\r\n\t\t\t} else {\r\n\t\t\t\tJsonix.XML.Calendar.validateDay(data.day);\r\n\t\t\t}\r\n\t\t\tthis.day = data.day;\r\n\t\t} else {\r\n\t\t\tthis.day = NaN;\r\n\t\t}\r\n\t\t// Hour\r\n\t\tif (Jsonix.Util.Type.exists(data.hour)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(data.hour);\r\n\t\t\tJsonix.XML.Calendar.validateHour(data.hour);\r\n\t\t\tthis.hour = data.hour;\r\n\t\t} else {\r\n\t\t\tthis.hour = NaN;\r\n\t\t}\r\n\t\t// Minute\r\n\t\tif (Jsonix.Util.Type.exists(data.minute)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(data.minute);\r\n\t\t\tJsonix.XML.Calendar.validateMinute(data.minute);\r\n\t\t\tthis.minute = data.minute;\r\n\t\t} else {\r\n\t\t\tthis.minute = NaN;\r\n\t\t}\r\n\t\t// Second\r\n\t\tif (Jsonix.Util.Type.exists(data.second)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(data.second);\r\n\t\t\tJsonix.XML.Calendar.validateSecond(data.second);\r\n\t\t\tthis.second = data.second;\r\n\t\t} else {\r\n\t\t\tthis.second = NaN;\r\n\t\t}\r\n\t\t// Fractional second\r\n\t\tif (Jsonix.Util.Type.exists(data.fractionalSecond)) {\r\n\t\t\tJsonix.Util.Ensure.ensureNumber(data.fractionalSecond);\r\n\t\t\tJsonix.XML.Calendar.validateFractionalSecond(data.fractionalSecond);\r\n\t\t\tthis.fractionalSecond = data.fractionalSecond;\r\n\t\t} else {\r\n\t\t\tthis.fractionalSecond = NaN;\r\n\t\t}\r\n\t\t// Timezone\r\n\t\tif (Jsonix.Util.Type.exists(data.timezone)) {\r\n\t\t\tif (Jsonix.Util.Type.isNaN(data.timezone)) {\r\n\t\t\t\tthis.timezone = NaN;\r\n\t\t\t} else {\r\n\t\t\t\tJsonix.Util.Ensure.ensureInteger(data.timezone);\r\n\t\t\t\tJsonix.XML.Calendar.validateTimezone(data.timezone);\r\n\t\t\t\tthis.timezone = data.timezone;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.timezone = NaN;\r\n\t\t}\r\n\r\n\t\tvar initialDate = new Date(0);\r\n\t\tinitialDate.setUTCFullYear(this.year || 1970);\r\n\t\tinitialDate.setUTCMonth(this.month - 1 || 0);\r\n\t\tinitialDate.setUTCDate(this.day || 1);\r\n\t\tinitialDate.setUTCHours(this.hour || 0);\r\n\t\tinitialDate.setUTCMinutes(this.minute || 0);\r\n\t\tinitialDate.setUTCSeconds(this.second || 0);\r\n\t\tinitialDate.setUTCMilliseconds((this.fractionalSecond || 0) * 1000);\r\n\t\tvar timezoneOffset = -60000 * (this.timezone || 0);\r\n\t\tthis.date = new Date(initialDate.getTime() + timezoneOffset);\r\n\t},\r\n\tCLASS_NAME : \"Jsonix.XML.Calendar\"\r\n});\r\nJsonix.XML.Calendar.MIN_TIMEZONE = -14 * 60;\r\nJsonix.XML.Calendar.MAX_TIMEZONE = 14 * 60;\r\nJsonix.XML.Calendar.DAYS_IN_MONTH = [ 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];\r\nJsonix.XML.Calendar.fromObject = function(object) {\r\n\tJsonix.Util.Ensure.ensureObject(object);\r\n\tif (Jsonix.Util.Type.isString(object.CLASS_NAME) && object.CLASS_NAME === 'Jsonix.XML.Calendar') {\r\n\t\treturn object;\r\n\t}\r\n\treturn new Jsonix.XML.Calendar(object);\r\n};\r\nJsonix.XML.Calendar.validateYear = function(year) {\r\n\tif (year === 0) {\r\n\t\tthrow new Error('Invalid year [' + year + ']. Year must not be [0].');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateMonth = function(month) {\r\n\tif (month < 1 || month > 12) {\r\n\t\tthrow new Error('Invalid month [' + month + ']. Month must be in range [1, 12].');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateDay = function(day) {\r\n\tif (day < 1 || day > 31) {\r\n\t\tthrow new Error('Invalid day [' + day + ']. Day must be in range [1, 31].');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateMonthDay = function(month, day) {\r\n\tJsonix.XML.Calendar.validateMonth(month);\r\n\tvar maxDaysInMonth = Jsonix.XML.Calendar.DAYS_IN_MONTH[month - 1];\r\n\tif (day < 1 || day > Jsonix.XML.Calendar.DAYS_IN_MONTH[month - 1]) {\r\n\t\tthrow new Error('Invalid day [' + day + ']. Day must be in range [1, ' + maxDaysInMonth + '].');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateYearMonthDay = function(year, month, day) {\r\n\t// #93 TODO proper validation of 28/29 02\r\n\tJsonix.XML.Calendar.validateYear(year);\r\n\tJsonix.XML.Calendar.validateMonthDay(month, day);\r\n};\r\nJsonix.XML.Calendar.validateHour = function(hour) {\r\n\tif (hour < 0 || hour > 23) {\r\n\t\tthrow new Error('Invalid hour [' + hour + ']. Hour must be in range [0, 23].');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateMinute = function(minute) {\r\n\tif (minute < 0 || minute > 59) {\r\n\t\tthrow new Error('Invalid minute [' + minute + ']. Minute must be in range [0, 59].');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateSecond = function(second) {\r\n\tif (second < 0 || second > 59) {\r\n\t\tthrow new Error('Invalid second [' + second + ']. Second must be in range [0, 59].');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateFractionalSecond = function(fractionalSecond) {\r\n\tif (fractionalSecond < 0 || fractionalSecond > 59) {\r\n\t\tthrow new Error('Invalid fractional second [' + fractionalSecond + ']. Fractional second must be in range [0, 1).');\r\n\t}\r\n};\r\nJsonix.XML.Calendar.validateTimezone = function(timezone) {\r\n\tif (timezone < Jsonix.XML.Calendar.MIN_TIMEZONE || timezone > Jsonix.XML.Calendar.MAX_TIMEZONE) {\r\n\t\tthrow new Error('Invalid timezone [' + timezone + ']. Timezone must not be in range [' + Jsonix.XML.Calendar.MIN_TIMEZONE + ', ' + Jsonix.XML.Calendar.MAX_TIMEZONE + '].');\r\n\t}\r\n};\r\nJsonix.XML.Input = Jsonix.Class({\r\n\troot : null,\r\n\tnode : null,\r\n\tattributes : null,\r\n\teventType : null,\r\n\tpns : null,\r\n\tinitialize : function(node) {\r\n\t\tJsonix.Util.Ensure.ensureExists(node);\r\n\t\tthis.root = node;\r\n\t\tvar rootPnsItem =\r\n\t\t{\r\n\t\t\t'' : ''\r\n\t\t};\r\n\t\trootPnsItem[Jsonix.XML.XMLNS_P] = Jsonix.XML.XMLNS_NS;\r\n\t\tthis.pns = [rootPnsItem];\r\n\t},\r\n\thasNext : function() {\r\n\t\t// No current node, we've not started yet\r\n\t\tif (this.node === null) {\r\n\t\t\treturn true;\r\n\t\t} else if (this.node === this.root) {\r\n\t\t\tvar nodeType = this.node.nodeType;\r\n\t\t\t// Root node is document, last event type is END_DOCUMENT\r\n\t\t\tif (nodeType === 9 && this.eventType === 8) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// Root node is element, last event type is END_ELEMENT\r\n\t\t\telse if (nodeType === 1 && this.eventType === 2) {\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\tnext : function() {\r\n\t\tif (this.eventType === null) {\r\n\t\t\treturn this.enter(this.root);\r\n\t\t}\r\n\t\t// START_DOCUMENT\r\n\t\tif (this.eventType === 7) {\r\n\t\t\tvar documentElement = this.node.documentElement;\r\n\t\t\tif (documentElement) {\r\n\t\t\t\treturn this.enter(documentElement);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.leave(this.node);\r\n\t\t\t}\r\n\t\t} else if (this.eventType === 1) {\r\n\t\t\tvar firstChild = this.node.firstChild;\r\n\t\t\tif (firstChild) {\r\n\t\t\t\treturn this.enter(firstChild);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.leave(this.node);\r\n\t\t\t}\r\n\t\t} else if (this.eventType === 2) {\r\n\t\t\tvar nextSibling = this.node.nextSibling;\r\n\t\t\tif (nextSibling) {\r\n\t\t\t\treturn this.enter(nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\treturn this.leave(this.node);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn this.leave(this.node);\r\n\t\t}\r\n\t},\r\n\tenter : function(node) {\r\n\t\tvar nodeType = node.nodeType;\r\n\t\tthis.node = node;\r\n\t\tthis.attributes = null;\r\n\t\t// Document node\r\n\t\tif (nodeType === 1) {\r\n\t\t\t// START_ELEMENT\r\n\t\t\tthis.eventType = 1;\r\n\t\t\tthis.pushNS(node);\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 2) {\r\n\t\t\t// ATTRIBUTE\r\n\t\t\tthis.eventType = 10;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 3) {\r\n\t\t\tvar nodeValue = node.nodeValue;\r\n\t\t\tif (Jsonix.Util.StringUtils.isEmpty(nodeValue)) {\r\n\t\t\t\t// SPACE\r\n\t\t\t\tthis.eventType = 6;\r\n\t\t\t} else {\r\n\t\t\t\t// CHARACTERS\r\n\t\t\t\tthis.eventType = 4;\r\n\t\t\t}\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 4) {\r\n\t\t\t// CDATA\r\n\t\t\tthis.eventType = 12;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 5) {\r\n\t\t\t// ENTITY_REFERENCE_NODE = 5\r\n\t\t\t// ENTITY_REFERENCE\r\n\t\t\tthis.eventType = 9;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 6) {\r\n\t\t\t// ENTITY_DECLARATION\r\n\t\t\tthis.eventType = 15;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 7) {\r\n\t\t\t// PROCESSING_INSTRUCTION\r\n\t\t\tthis.eventType = 3;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 8) {\r\n\t\t\t// COMMENT\r\n\t\t\tthis.eventType = 5;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 9) {\r\n\t\t\t// START_DOCUMENT\r\n\t\t\tthis.eventType = 7;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 10) {\r\n\t\t\t// DTD\r\n\t\t\tthis.eventType = 12;\r\n\t\t\treturn this.eventType;\r\n\t\t} else if (nodeType === 12) {\r\n\t\t\t// NOTATION_DECLARATION\r\n\t\t\tthis.eventType = 14;\r\n\t\t\treturn this.eventType;\r\n\t\t} else {\r\n\t\t\t// DOCUMENT_FRAGMENT_NODE = 11\r\n\t\t\tthrow new Error(\"Node type [\" + nodeType + '] is not supported.');\r\n\t\t}\r\n\t},\r\n\tleave : function(node) {\r\n\t\tif (node.nodeType === 9) {\r\n\t\t\tif (this.eventType == 8) {\r\n\t\t\t\tthrow new Error(\"Invalid state.\");\r\n\t\t\t} else {\r\n\t\t\t\tthis.node = node;\r\n\t\t\t\tthis.attributes = null;\r\n\t\t\t\t// END_ELEMENT\r\n\t\t\t\tthis.eventType = 8;\r\n\t\t\t\treturn this.eventType;\r\n\t\t\t}\r\n\t\t} else if (node.nodeType === 1) {\r\n\t\t\tif (this.eventType == 2) {\r\n\t\t\t\tvar nextSibling = node.nextSibling;\r\n\t\t\t\tif (nextSibling) {\r\n\t\t\t\t\treturn this.enter(nextSibling);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.node = node;\r\n\t\t\t\tthis.attributes = null;\r\n\t\t\t\t// END_ELEMENT\r\n\t\t\t\tthis.eventType = 2;\r\n\t\t\t\tthis.popNS();\r\n\t\t\t\treturn this.eventType;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar nextSibling1 = node.nextSibling;\r\n\t\tif (nextSibling1) {\r\n\t\t\treturn this.enter(nextSibling1);\r\n\t\t} else {\r\n\t\t\tvar parentNode = node.parentNode;\r\n\t\t\tthis.node = parentNode;\r\n\t\t\tthis.attributes = null;\r\n\t\t\tif (parentNode.nodeType === 9) {\r\n\t\t\t\tthis.eventType = 8;\r\n\t\t\t} else {\r\n\t\t\t\tthis.eventType = 2;\r\n\t\t\t}\r\n\t\t\treturn this.eventType;\r\n\t\t}\r\n\t},\r\n\tgetName : function() {\r\n\t\tvar node = this.node;\r\n\t\tif (Jsonix.Util.Type.isString(node.nodeName)) {\r\n\t\t\tif (Jsonix.Util.Type.isString(node.namespaceURI)) {\r\n\t\t\t\treturn new Jsonix.XML.QName(node.namespaceURI, node.nodeName);\r\n\t\t\t} else {\r\n\t\t\t\treturn new Jsonix.XML.QName(node.nodeName);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetNameKey : function() {\r\n\t\tvar node = this.node;\r\n\t\tif (Jsonix.Util.Type.isString(node.nodeName)) {\r\n\t\t\treturn Jsonix.XML.QName.key(node.namespaceURI, node.nodeName);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetText : function() {\r\n\t\treturn this.node.nodeValue;\r\n\t},\r\n\tnextTag : function() {\r\n\t\tvar et = this.next();\r\n\t\t// TODO isWhiteSpace\r\n\t\twhile (et === 7 || et === 4 || et === 12 || et === 6 || et === 3 || et === 5) {\r\n\t\t\tet = this.next();\r\n\t\t}\r\n\t\tif (et !== 1 && et !== 2) {\r\n\t\t\t// TODO location\r\n\t\t\tthrow new Error('Expected start or end tag.');\r\n\t\t}\r\n\t\treturn et;\r\n\t},\r\n\tskipElement : function() {\r\n\t\tif (this.eventType !== Jsonix.XML.Input.START_ELEMENT) {\r\n\t\t\tthrow new Error(\"Parser must be on START_ELEMENT to skip element.\");\r\n\t\t}\r\n\t\tvar numberOfOpenTags = 1;\r\n\t\tvar et;\r\n\t\tdo {\r\n\t\t\tet = this.nextTag();\r\n\t\t    numberOfOpenTags += (et === Jsonix.XML.Input.START_ELEMENT) ? 1 : -1;\r\n\t\t  } while (numberOfOpenTags > 0);\r\n\t\treturn et;\r\n\t},\t\r\n\tgetElementText : function() {\r\n\t\tif (this.eventType != 1) {\r\n\t\t\tthrow new Error(\"Parser must be on START_ELEMENT to read next text.\");\r\n\t\t}\r\n\t\tvar et = this.next();\r\n\t\tvar content = '';\r\n\t\twhile (et !== 2) {\r\n\t\t\tif (et === 4 || et === 12 || et === 6 || et === 9) {\r\n\t\t\t\tcontent = content + this.getText();\r\n\t\t\t} else if (et === 3 || et === 5) {\r\n\t\t\t\t// Skip PI or comment\r\n\t\t\t} else if (et === 8) {\r\n\t\t\t\t// End document\r\n\t\t\t\tthrow new Error(\"Unexpected end of document when reading element text content.\");\r\n\t\t\t} else if (et === 1) {\r\n\t\t\t\t// End element\r\n\t\t\t\t// TODO location\r\n\t\t\t\tthrow new Error(\"Element text content may not contain START_ELEMENT.\");\r\n\t\t\t} else {\r\n\t\t\t\t// TODO location\r\n\t\t\t\tthrow new Error(\"Unexpected event type [\" + et + \"].\");\r\n\t\t\t}\r\n\t\t\tet = this.next();\r\n\t\t}\r\n\t\treturn content;\r\n\t},\r\n\tretrieveElement : function () {\r\n\t\tvar element;\r\n\t\tif (this.eventType === 1) {\r\n\t\t\telement = this.node;\r\n\t\t} else if (this.eventType === 10) {\r\n\t\t\telement = this.node.parentNode;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Element can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.\");\r\n\t\t}\r\n\t\treturn element;\r\n\t},\r\n\tretrieveAttributes : function () {\r\n\t\tvar attributes;\r\n\t\tif (this.attributes)\r\n\t\t{\r\n\t\t\tattributes = this.attributes;\r\n\t\t} else if (this.eventType === 1) {\r\n\t\t\tattributes = this.node.attributes;\r\n\t\t\tthis.attributes = attributes;\r\n\t\t} else if (this.eventType === 10) {\r\n\t\t\tattributes = this.node.parentNode.attributes;\r\n\t\t\tthis.attributes = attributes;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Attributes can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.\");\r\n\t\t}\r\n\t\treturn attributes;\r\n\t},\r\n\tgetAttributeCount : function() {\r\n\t\tvar attributes = this.retrieveAttributes();\r\n\t\treturn attributes.length;\r\n\t},\r\n\tgetAttributeName : function(index) {\r\n\t\tvar attributes = this.retrieveAttributes();\r\n\t\tif (index < 0 || index >= attributes.length) {\r\n\t\t\tthrow new Error(\"Invalid attribute index [\" + index + \"].\");\r\n\t\t}\r\n\t\tvar attribute = attributes[index];\r\n\t\tif (Jsonix.Util.Type.isString(attribute.namespaceURI)) {\r\n\t\t\treturn new Jsonix.XML.QName(attribute.namespaceURI, attribute.nodeName);\r\n\t\t} else {\r\n\t\t\treturn new Jsonix.XML.QName(attribute.nodeName);\r\n\t\t}\r\n\t},\r\n\tgetAttributeNameKey : function(index) {\r\n\t\tvar attributes = this.retrieveAttributes();\r\n\t\tif (index < 0 || index >= attributes.length) {\r\n\t\t\tthrow new Error(\"Invalid attribute index [\" + index + \"].\");\r\n\t\t}\r\n\t\tvar attribute = attributes[index];\r\n\r\n\t\treturn Jsonix.XML.QName.key(attribute.namespaceURI, attribute.nodeName);\r\n\t},\r\n\tgetAttributeValue : function(index) {\r\n\t\tvar attributes = this.retrieveAttributes();\r\n\t\tif (index < 0 || index >= attributes.length) {\r\n\t\t\tthrow new Error(\"Invalid attribute index [\" + index + \"].\");\r\n\t\t}\r\n\t\tvar attribute = attributes[index];\r\n\t\treturn attribute.value;\r\n\t},\r\n\tgetAttributeValueNS : null,\r\n\tgetAttributeValueNSViaElement : function(namespaceURI, localPart) {\r\n\t\tvar element = this.retrieveElement();\r\n\t\treturn element.getAttributeNS(namespaceURI, localPart);\r\n\t},\r\n\tgetAttributeValueNSViaAttribute : function(namespaceURI, localPart) {\r\n\t\tvar attributeNode = this.getAttributeNodeNS(namespaceURI, localPart);\r\n\t\tif (Jsonix.Util.Type.exists(attributeNode)) {\r\n\t\t\treturn attributeNode.nodeValue;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetAttributeNodeNS : null,\r\n\tgetAttributeNodeNSViaElement : function(namespaceURI, localPart) {\r\n\t\tvar element = this.retrieveElement();\r\n\t\treturn element.getAttributeNodeNS(namespaceURI, localPart);\r\n\t},\r\n\tgetAttributeNodeNSViaAttributes : function(namespaceURI, localPart) {\r\n\t\tvar attributeNode = null;\r\n\t\tvar attributes = this.retrieveAttributes();\r\n\t\tvar potentialNode, fullName;\r\n\t\tfor (var i = 0, len = attributes.length; i < len; ++i) {\r\n\t\t\tpotentialNode = attributes[i];\r\n\t\t\tif (potentialNode.namespaceURI === namespaceURI) {\r\n\t\t\t\tfullName = (potentialNode.prefix) ? (potentialNode.prefix + ':' + localPart) : localPart;\r\n\t\t\t\tif (fullName === potentialNode.nodeName) {\r\n\t\t\t\t\tattributeNode = potentialNode;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn attributeNode;\r\n\t},\r\n\tgetElement : function() {\r\n\t\tif (this.eventType === 1 || this.eventType === 2) {\r\n\t\t\t// Go to the END_ELEMENT\r\n\t\t\tthis.eventType = 2;\r\n\t\t\treturn this.node;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Parser must be on START_ELEMENT or END_ELEMENT to return current element.\");\r\n\t\t}\r\n\t},\r\n\tpushNS : function (node) {\r\n\t\tvar pindex = this.pns.length - 1;\r\n\t\tvar parentPnsItem = this.pns[pindex];\r\n\t\tvar pnsItem = Jsonix.Util.Type.isObject(parentPnsItem) ? pindex : parentPnsItem;\r\n\t\tthis.pns.push(pnsItem);\r\n\t\tpindex++;\r\n\t\tvar reference = true;\r\n\t\tif (node.attributes)\r\n\t\t{\r\n\t\t\tvar attributes = node.attributes;\r\n\t\t\tvar alength = attributes.length;\r\n\t\t\tif (alength > 0)\r\n\t\t\t{\r\n\t\t\t\t// If given node has attributes\r\n\t\t\t\tfor (var aindex = 0; aindex < alength; aindex++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar attribute = attributes[aindex];\r\n\t\t\t\t\tvar attributeName = attribute.nodeName;\r\n\t\t\t\t\tvar p = null;\r\n\t\t\t\t\tvar ns = null;\r\n\t\t\t\t\tvar isNS = false;\r\n\t\t\t\t\tif (attributeName === 'xmlns')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tp = '';\r\n\t\t\t\t\t\tns = attribute.value;\r\n\t\t\t\t\t\tisNS = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (attributeName.substring(0, 6) === 'xmlns:')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tp = attributeName.substring(6);\r\n\t\t\t\t\t\tns = attribute.value;\r\n\t\t\t\t\t\tisNS = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Attribute is a namespace declaration\r\n\t\t\t\t\tif (isNS)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (reference)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tpnsItem = Jsonix.Util.Type.cloneObject(this.pns[pnsItem], {});\r\n\t\t\t\t\t\t\tthis.pns[pindex] = pnsItem;\r\n\t\t\t\t\t\t\treference = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpnsItem[p] = ns;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t},\r\n\tpopNS : function () {\r\n\t\tthis.pns.pop();\r\n\t},\r\n\tgetNamespaceURI : function (p) {\r\n\t\tvar pindex = this.pns.length - 1;\r\n\t\tvar pnsItem = this.pns[pindex];\r\n\t\tpnsItem = Jsonix.Util.Type.isObject(pnsItem) ? pnsItem : this.pns[pnsItem];\r\n\t\treturn pnsItem[p];\r\n\t},\r\n\tCLASS_NAME : \"Jsonix.XML.Input\"\r\n\r\n});\r\n\r\nJsonix.XML.Input.prototype.getAttributeValueNS = (Jsonix.DOM.isDomImplementationAvailable()) ? Jsonix.XML.Input.prototype.getAttributeValueNSViaElement : Jsonix.XML.Input.prototype.getAttributeValueNSViaAttribute;\r\nJsonix.XML.Input.prototype.getAttributeNodeNS = (Jsonix.DOM.isDomImplementationAvailable()) ? Jsonix.XML.Input.prototype.getAttributeNodeNSViaElement : Jsonix.XML.Input.prototype.getAttributeNodeNSViaAttributes;\r\n\r\nJsonix.XML.Input.START_ELEMENT = 1;\r\nJsonix.XML.Input.END_ELEMENT = 2;\r\nJsonix.XML.Input.PROCESSING_INSTRUCTION = 3;\r\nJsonix.XML.Input.CHARACTERS = 4;\r\nJsonix.XML.Input.COMMENT = 5;\r\nJsonix.XML.Input.SPACE = 6;\r\nJsonix.XML.Input.START_DOCUMENT = 7;\r\nJsonix.XML.Input.END_DOCUMENT = 8;\r\nJsonix.XML.Input.ENTITY_REFERENCE = 9;\r\nJsonix.XML.Input.ATTRIBUTE = 10;\r\nJsonix.XML.Input.DTD = 11;\r\nJsonix.XML.Input.CDATA = 12;\r\nJsonix.XML.Input.NAMESPACE = 13;\r\nJsonix.XML.Input.NOTATION_DECLARATION = 14;\r\nJsonix.XML.Input.ENTITY_DECLARATION = 15;\r\n\r\nJsonix.XML.Output = Jsonix.Class({\r\n\tdocument : null,\r\n\tdocumentElement : null,\r\n\tnode : null,\r\n\tnodes : null,\r\n\tnsp : null,\r\n\tpns : null,\r\n\tnamespacePrefixIndex : 0,\r\n\txmldom : null,\r\n\tinitialize : function(options) {\r\n\t\t// REWORK\r\n\t\tif (typeof ActiveXObject !== 'undefined') {\r\n\t\t\tthis.xmldom = new ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t} else {\r\n\t\t\tthis.xmldom = null;\r\n\t\t}\r\n\t\tthis.nodes = [];\r\n\t\tvar rootNspItem =\r\n\t\t{\r\n\t\t\t'' : ''\r\n\t\t};\r\n\t\trootNspItem[Jsonix.XML.XMLNS_NS] = Jsonix.XML.XMLNS_P;\r\n\t\tif (Jsonix.Util.Type.isObject(options)) {\r\n\t\t\tif (Jsonix.Util.Type.isObject(options.namespacePrefixes)) {\r\n\t\t\t\tJsonix.Util.Type.cloneObject(options.namespacePrefixes, rootNspItem);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.nsp = [rootNspItem];\r\n\t\tvar rootPnsItem =\r\n\t\t{\r\n\t\t\t'' : ''\r\n\t\t};\r\n\t\trootPnsItem[Jsonix.XML.XMLNS_P] = Jsonix.XML.XMLNS_NS;\r\n\t\tthis.pns = [rootPnsItem];\r\n\t},\r\n\tdestroy : function() {\r\n\t\tthis.xmldom = null;\r\n\t},\r\n\twriteStartDocument : function() {\r\n\t\t// TODO Check\r\n\t\tvar doc = Jsonix.DOM.createDocument();\r\n\t\tthis.document = doc;\r\n\t\treturn this.push(doc);\r\n\t},\r\n\twriteEndDocument : function() {\r\n\t\treturn this.pop();\r\n\r\n\t},\r\n\twriteStartElement : function(name) {\r\n\t\tJsonix.Util.Ensure.ensureObject(name);\r\n\t\tvar localPart = name.localPart || name.lp || null;\r\n\t\tJsonix.Util.Ensure.ensureString(localPart);\r\n\t\tvar ns = name.namespaceURI || name.ns || null;\r\n\t\tvar namespaceURI = Jsonix.Util.Type.isString(ns) ? ns : '';\r\n\r\n\t\tvar p = name.prefix || name.p;\r\n\t\tvar prefix = this.getPrefix(namespaceURI, p);\r\n\r\n\t\tvar qualifiedName = (!prefix ? localPart : prefix + ':' + localPart);\r\n\r\n\t\tvar element;\r\n\t\tif (Jsonix.Util.Type.isFunction(this.document.createElementNS))\t{\r\n\t\t\telement = this.document.createElementNS(namespaceURI, qualifiedName);\r\n\t\t}\r\n\t\telse if (this.xmldom) {\r\n\t\t\telement = this.xmldom.createNode(1, qualifiedName, namespaceURI);\r\n\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Could not create an element node.\");\r\n\t\t}\r\n\t\tthis.peek().appendChild(element);\r\n\t\tthis.push(element);\r\n\t\tthis.declareNamespace(namespaceURI, prefix);\r\n\t\tif (this.documentElement === null)\r\n\t\t{\r\n\t\t\tthis.documentElement = element;\r\n\t\t\tthis.declareNamespaces();\r\n\t\t}\r\n\t\treturn element;\r\n\t},\r\n\twriteEndElement : function() {\r\n\t\treturn this.pop();\r\n\t},\r\n\twriteCharacters : function(text) {\r\n\t\tvar node;\r\n\t\tif (Jsonix.Util.Type.isFunction(this.document.createTextNode))\t{\r\n\t\t\tnode = this.document.createTextNode(text);\r\n\t\t}\r\n\t\telse if (this.xmldom) {\r\n\t\t\tnode = this.xmldom.createTextNode(text);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Could not create a text node.\");\r\n\t\t}\r\n\t\tthis.peek().appendChild(node);\r\n\t\treturn node;\r\n\r\n\t},\r\n\twriteCdata : function(text) {\r\n\t\tvar parts = text.split(']]>');\r\n\t\tfor (var index = 0; index < parts.length; index++) {\r\n\t\t\tif (index + 1 < parts.length) {\r\n\t\t\t\tparts[index] = parts[index] + ']]';\r\n\t\t\t\tparts[index + 1] = '>' + parts[index + 1];\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar node;\r\n\t\tfor (var jndex = 0; jndex < parts.length; jndex ++) {\r\n\t\t\tnode = this.writeCdataWithoutCdend(parts[jndex]);\r\n\t\t}\r\n\t\treturn node;\r\n\t},\r\n\twriteCdataWithoutCdend : function(text) {\r\n\t\tvar node;\r\n\t\tif (Jsonix.Util.Type.isFunction(this.document.createCDATASection))\t{\r\n\t\t\tnode = this.document.createCDATASection(text);\r\n\t\t}\r\n\t\telse if (this.xmldom) {\r\n\t\t\tnode = this.xmldom.createCDATASection(text);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Could not create a CDATA section node.\");\r\n\t\t}\r\n\t\tthis.peek().appendChild(node);\r\n\t\treturn node;\r\n\t},\r\n\twriteAttribute : function(name, value) {\r\n\t\tJsonix.Util.Ensure.ensureString(value);\r\n\t\tJsonix.Util.Ensure.ensureObject(name);\r\n\t\tvar localPart = name.localPart || name.lp || null;\r\n\t\tJsonix.Util.Ensure.ensureString(localPart);\r\n\t\tvar ns = name.namespaceURI || name.ns || null;\r\n\t\tvar namespaceURI = Jsonix.Util.Type.isString(ns) ? ns : '';\r\n\t\tvar p = name.prefix || name.p || null;\r\n\t\tvar prefix = this.getPrefix(namespaceURI, p);\r\n\r\n\t\tvar qualifiedName = (!prefix ? localPart : prefix + ':' + localPart);\r\n\r\n\t\tvar node = this.peek();\r\n\r\n\t\tif (namespaceURI === '') {\r\n\t\t\tnode.setAttribute(qualifiedName, value);\r\n\t\t} else {\r\n\t\t\tif (node.setAttributeNS) {\r\n\t\t\t\tnode.setAttributeNS(namespaceURI, qualifiedName, value);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.xmldom) {\r\n\t\t\t\t\tvar attribute = this.document.createNode(2, qualifiedName, namespaceURI);\r\n\t\t\t\t\tattribute.nodeValue = value;\r\n\t\t\t\t\tnode.setAttributeNode(attribute);\r\n\t\t\t\t}\r\n\t\t\t\telse if (namespaceURI === Jsonix.XML.XMLNS_NS)\r\n\t\t\t\t{\r\n\t\t\t\t\t// XMLNS namespace may be processed unqualified\r\n\t\t\t\t\tnode.setAttribute(qualifiedName, value);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(\"The [setAttributeNS] method is not implemented\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.declareNamespace(namespaceURI, prefix);\r\n\t\t}\r\n\r\n\t},\r\n\twriteNode : function(node) {\r\n\t\tvar importedNode;\r\n\t\tif (Jsonix.Util.Type.exists(this.document.importNode)) {\r\n\t\t\timportedNode = this.document.importNode(node, true);\r\n\t\t} else {\r\n\t\t\timportedNode = node;\r\n\t\t}\r\n\t\tthis.peek().appendChild(importedNode);\r\n\t\treturn importedNode;\r\n\t},\r\n\tpush : function(node) {\r\n\t\tthis.nodes.push(node);\r\n\t\tthis.pushNS();\r\n\t\treturn node;\r\n\t},\r\n\tpeek : function() {\r\n\t\treturn this.nodes[this.nodes.length - 1];\r\n\t},\r\n\tpop : function() {\r\n\t\tthis.popNS();\r\n\t\tvar result = this.nodes.pop();\r\n\t\treturn result;\r\n\t},\r\n\tpushNS : function ()\r\n\t{\r\n\t\tvar nindex = this.nsp.length - 1;\r\n\t\tvar pindex = this.pns.length - 1;\r\n\t\tvar parentNspItem = this.nsp[nindex];\r\n\t\tvar parentPnsItem = this.pns[pindex];\r\n\t\tvar nspItem = Jsonix.Util.Type.isObject(parentNspItem) ? nindex : parentNspItem;\r\n\t\tvar pnsItem = Jsonix.Util.Type.isObject(parentPnsItem) ? pindex : parentPnsItem;\r\n\t\tthis.nsp.push(nspItem);\r\n\t\tthis.pns.push(pnsItem);\r\n\t},\r\n\tpopNS : function ()\r\n\t{\r\n\t\tthis.nsp.pop();\r\n\t\tthis.pns.pop();\r\n\t},\r\n\tdeclareNamespaces : function ()\r\n\t{\r\n\t\tvar index = this.nsp.length - 1;\r\n\t\tvar nspItem = this.nsp[index];\r\n\t\tnspItem = Jsonix.Util.Type.isNumber(nspItem) ? this.nsp[nspItem] : nspItem;\r\n\t\tvar ns, p;\r\n\t\tfor (ns in nspItem)\r\n\t\t{\r\n\t\t\tif (nspItem.hasOwnProperty(ns))\r\n\t\t\t{\r\n\t\t\t\tp = nspItem[ns];\r\n\t\t\t\tthis.declareNamespace(ns, p);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdeclareNamespace : function (ns, p)\r\n\t{\r\n\t\tvar index = this.pns.length - 1;\r\n\t\tvar pnsItem = this.pns[index];\r\n\t\tvar reference;\r\n\t\tif (Jsonix.Util.Type.isNumber(pnsItem))\r\n\t\t{\r\n\t\t\t// Resolve the reference\r\n\t\t\treference = true;\r\n\t\t\tpnsItem = this.pns[pnsItem];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treference = false;\r\n\t\t}\r\n\t\t// If this prefix is mapped to a different namespace and must be redeclared\r\n\t\tif (pnsItem[p] !== ns)\r\n\t\t{\r\n\t\t\tif (p === '')\r\n\t\t\t{\r\n\t\t\t\tthis.writeAttribute({lp : Jsonix.XML.XMLNS_P}, ns);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.writeAttribute({ns : Jsonix.XML.XMLNS_NS, lp : p, p : Jsonix.XML.XMLNS_P}, ns);\r\n\t\t\t}\r\n\t\t\tif (reference)\r\n\t\t\t{\r\n\t\t\t\t// If this was a reference, clone it and replace the reference\r\n\t\t\t\tpnsItem = Jsonix.Util.Type.cloneObject(pnsItem, {});\r\n\t\t\t\tthis.pns[index] = pnsItem;\r\n\t\t\t}\r\n\t\t\tpnsItem[p] = ns;\r\n\t\t}\r\n\t},\r\n\tgetPrefix : function (ns, p)\r\n\t{\r\n\t\tvar index = this.nsp.length - 1;\r\n\t\tvar nspItem = this.nsp[index];\r\n\t\tvar reference;\r\n\t\tif (Jsonix.Util.Type.isNumber(nspItem))\r\n\t\t{\r\n\t\t\t// This is a reference, the item is the index of the parent item\r\n\t\t\treference = true;\r\n\t\t\tnspItem = this.nsp[nspItem];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treference = false;\r\n\t\t}\r\n\t\tif (Jsonix.Util.Type.isString(p))\r\n\t\t{\r\n\t\t\tvar oldp = nspItem[ns];\r\n\t\t\t// If prefix is already declared and equals the proposed prefix\r\n\t\t\tif (p === oldp)\r\n\t\t\t{\r\n\t\t\t\t// Nothing to do\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// If this was a reference, we have to clone it now\r\n\t\t\t\tif (reference)\r\n\t\t\t\t{\r\n\t\t\t\t\tnspItem = Jsonix.Util.Type.cloneObject(nspItem, {});\r\n\t\t\t\t\tthis.nsp[index] = nspItem;\r\n\t\t\t\t}\r\n\t\t\t\tnspItem[ns] = p;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tp = nspItem[ns];\r\n\t\t\tif (!Jsonix.Util.Type.exists(p)) {\r\n\t\t\t\tp = 'p' + (this.namespacePrefixIndex++);\r\n\t\t\t\t// If this was a reference, we have to clone it now\r\n\t\t\t\tif (reference)\r\n\t\t\t\t{\r\n\t\t\t\t\tnspItem = Jsonix.Util.Type.cloneObject(nspItem, {});\r\n\t\t\t\t\tthis.nsp[index] = nspItem;\r\n\t\t\t\t}\r\n\t\t\t\tnspItem[ns] = p;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn p;\r\n\t},\r\n\tgetNamespaceURI : function (p) {\r\n\t\tvar pindex = this.pns.length - 1;\r\n\t\tvar pnsItem = this.pns[pindex];\r\n\t\tpnsItem = Jsonix.Util.Type.isObject(pnsItem) ? pnsItem : this.pns[pnsItem];\r\n\t\treturn pnsItem[p];\r\n\t},\r\n\tCLASS_NAME : \"Jsonix.XML.Output\"\r\n});\r\n\r\nJsonix.Mapping = {};\r\nJsonix.Mapping.Style = Jsonix.Class({\r\n\tmarshaller : null,\r\n\tunmarshaller : null,\r\n\tmodule : null,\r\n\telementInfo : null,\r\n\tclassInfo : null,\r\n\tenumLeafInfo : null,\r\n\tanyAttributePropertyInfo : null,\r\n\tanyElementPropertyInfo : null,\r\n\tattributePropertyInfo : null,\r\n\telementMapPropertyInfo : null,\r\n\telementPropertyInfo : null,\r\n\telementsPropertyInfo : null,\r\n\telementRefPropertyInfo : null,\r\n\telementRefsPropertyInfo : null,\r\n\tvaluePropertyInfo : null,\r\n\tinitialize : function() {\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Mapping.Style'\r\n});\r\n\r\nJsonix.Mapping.Style.STYLES = {};\r\nJsonix.Mapping.Styled = Jsonix.Class({\r\n\tmappingStyle : null,\r\n\tinitialize : function(options) {\r\n\t\tif (Jsonix.Util.Type.exists(options)) {\r\n\t\t\tJsonix.Util.Ensure.ensureObject(options);\r\n\t\t\tif (Jsonix.Util.Type.isString(options.mappingStyle)) {\r\n\t\t\t\tvar mappingStyle = Jsonix.Mapping.Style.STYLES[options.mappingStyle];\r\n\t\t\t\tif (!mappingStyle) {\r\n\t\t\t\t\tthrow new Error(\"Mapping style [\" + options.mappingStyle + \"] is not known.\");\r\n\t\t\t\t}\r\n\t\t\t\tthis.mappingStyle = mappingStyle;\r\n\t\t\t} else if (Jsonix.Util.Type.isObject(options.mappingStyle)) {\r\n\t\t\t\tthis.mappingStyle = options.mappingStyle;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.mappingStyle) {\r\n\t\t\tthis.mappingStyle = Jsonix.Mapping.Style.STYLES.standard;\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Mapping.Styled'\r\n});\r\nJsonix.Binding = {};\r\nJsonix.Binding.Marshalls = {\r\n};\r\n\r\nJsonix.Binding.Marshalls.Element = Jsonix.Class({\r\n\tmarshalElement : function(value, context, output, scope) {\r\n\t\tvar elementValue = this.convertToTypedNamedValue(value, context, output, scope);\r\n\t\tvar declaredTypeInfo = elementValue.typeInfo;\r\n\t\tvar actualTypeInfo = undefined;\r\n\t\tif (context.supportXsiType && Jsonix.Util.Type.exists(elementValue.value))\r\n\t\t{\r\n\t\t\tvar typeInfoByValue = context.getTypeInfoByValue(elementValue.value);\r\n\t\t\tif (typeInfoByValue && typeInfoByValue.typeName)\r\n\t\t\t{\r\n\t\t\t\tactualTypeInfo = typeInfoByValue;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar typeInfo = actualTypeInfo || declaredTypeInfo;\r\n\t\tif (typeInfo) {\r\n\t\t\toutput.writeStartElement(elementValue.name);\r\n\t\t\tif (actualTypeInfo && declaredTypeInfo !== actualTypeInfo) {\r\n\t\t\t\tvar xsiTypeName = actualTypeInfo.typeName;\r\n\t\t\t\tvar xsiType = Jsonix.Schema.XSD.QName.INSTANCE.print(xsiTypeName, context, output, scope);\r\n\t\t\t\toutput.writeAttribute(Jsonix.Schema.XSI.TYPE_QNAME, xsiType);\r\n\t\t\t}\r\n\t\t\tif (Jsonix.Util.Type.exists(elementValue.value)) {\r\n\t\t\t\ttypeInfo.marshal(elementValue.value, context, output, scope);\r\n\t\t\t}\r\n\t\t\toutput.writeEndElement();\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Element [\" + elementValue.name.key + \"] is not known in this context, could not determine its type.\");\r\n\t\t}\r\n\t},\r\n\tgetTypeInfoByElementName : function(name, context, scope) {\r\n\t\tvar elementInfo = context.getElementInfo(name, scope);\r\n\t\tif (Jsonix.Util.Type.exists(elementInfo)) {\r\n\t\t\treturn elementInfo.typeInfo;\r\n\t\t} else {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n});\r\nJsonix.Binding.Marshalls.Element.AsElementRef = Jsonix.Class({\r\n\tconvertToTypedNamedValue : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tvar elementValue = this.convertToNamedValue(value, context, output, scope);\r\n\t\treturn {\r\n\t\t\tname : elementValue.name,\r\n\t\t\tvalue : elementValue.value,\r\n\t\t\ttypeInfo : this.getTypeInfoByElementName(elementValue.name, context, scope)\r\n\t\t};\r\n\t},\r\n\tconvertToNamedValue : function(elementValue, context, output, scope) {\r\n\t\tvar name;\r\n\t\tvar value;\r\n\t\tif (Jsonix.Util.Type.exists(elementValue.name) && !Jsonix.Util.Type.isUndefined(elementValue.value)) {\r\n\t\t\tname = Jsonix.XML.QName.fromObjectOrString(elementValue.name, context);\r\n\t\t\tvalue = Jsonix.Util.Type.exists(elementValue.value) ? elementValue.value : null;\r\n\t\t\treturn {\r\n\t\t\t\tname : name,\r\n\t\t\t\tvalue : value\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tfor ( var propertyName in elementValue) {\r\n\t\t\t\tif (elementValue.hasOwnProperty(propertyName)) {\r\n\t\t\t\t\tname = Jsonix.XML.QName.fromObjectOrString(propertyName, context);\r\n\t\t\t\t\tvalue = elementValue[propertyName];\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tname : name,\r\n\t\t\t\t\t\tvalue : value\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow new Error(\"Invalid element value [\" + elementValue + \"]. Element values must either have {name:'myElementName', value: elementValue} or {myElementName:elementValue} structure.\");\r\n\t}\r\n});\r\n\r\nJsonix.Binding.Unmarshalls = {};\r\n\r\nJsonix.Binding.Unmarshalls.WrapperElement = Jsonix.Class({\r\n\tmixed : false,\r\n\tunmarshalWrapperElement : function(context, input, scope, callback) {\r\n\t\tvar et = input.next();\r\n\t\twhile (et !== Jsonix.XML.Input.END_ELEMENT) {\r\n\t\t\tif (et === Jsonix.XML.Input.START_ELEMENT) {\r\n\t\t\t\tthis.unmarshalElement(context, input, scope, callback);\r\n\t\t\t} else\r\n\t\t\t// Characters\r\n\t\t\tif (this.mixed && (et === Jsonix.XML.Input.CHARACTERS || et === Jsonix.XML.Input.CDATA || et === Jsonix.XML.Input.ENTITY_REFERENCE)) {\r\n\t\t\t\tcallback(input.getText());\r\n\t\t\t} else if (et === Jsonix.XML.Input.SPACE || et === Jsonix.XML.Input.COMMENT || et === Jsonix.XML.Input.PROCESSING_INSTRUCTION) {\r\n\t\t\t\t// Skip whitespace\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Illegal state: unexpected event type [\" + et + \"].\");\r\n\t\t\t}\r\n\t\t\tet = input.next();\r\n\t\t}\r\n\t}\r\n});\r\n\r\nJsonix.Binding.Unmarshalls.Element = Jsonix.Class({\r\n\tallowTypedObject : true,\r\n\tallowDom : false,\r\n\tunmarshalElement : function(context, input, scope, callback) {\r\n\t\tif (input.eventType != 1) {\r\n\t\t\tthrow new Error(\"Parser must be on START_ELEMENT to read next element.\");\r\n\t\t}\r\n\t\tvar typeInfo = this.getTypeInfoByInputElement(context, input, scope);\r\n\t\tvar name = input.getName();\r\n\t\tvar elementValue;\r\n\t\tif (this.allowTypedObject) {\r\n\t\t\tif (Jsonix.Util.Type.exists(typeInfo)) {\r\n\t\t\t\tvar value = typeInfo.unmarshal(context, input, scope);\r\n\t\t\t\tvar typedNamedValue = {\r\n\t\t\t\t\tname : name,\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\ttypeInfo : typeInfo\r\n\t\t\t\t};\r\n\t\t\t\telementValue = this.convertFromTypedNamedValue(typedNamedValue, context, input, scope);\r\n\t\t\t} else if (this.allowDom) {\r\n\t\t\t\telementValue = input.getElement();\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Element [\" + name.toString() + \"] could not be unmarshalled as is not known in this context and the property does not allow DOM content.\");\r\n\t\t\t}\r\n\t\t} else if (this.allowDom) {\r\n\t\t\telementValue = input.getElement();\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Element [\" + name.toString() + \"] could not be unmarshalled as the property neither allows typed objects nor DOM as content. This is a sign of invalid mappings, do not use [allowTypedObject : false] and [allowDom : false] at the same time.\");\r\n\t\t}\r\n\t\tcallback(elementValue);\r\n\t},\r\n\tgetTypeInfoByInputElement : function(context, input, scope) {\r\n\t\tvar xsiTypeInfo = null;\r\n\t\tif (context.supportXsiType) {\r\n\t\t\tvar xsiType = input.getAttributeValueNS(Jsonix.Schema.XSI.NAMESPACE_URI, Jsonix.Schema.XSI.TYPE);\r\n\t\t\tif (Jsonix.Util.StringUtils.isNotBlank(xsiType)) {\r\n\t\t\t\tvar xsiTypeName = Jsonix.Schema.XSD.QName.INSTANCE.parse(xsiType, context, input, scope);\r\n\t\t\t\txsiTypeInfo = context.getTypeInfoByTypeNameKey(xsiTypeName.key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar name = input.getName();\r\n\t\tvar typeInfo = xsiTypeInfo ? xsiTypeInfo : this.getTypeInfoByElementName(name, context, scope);\r\n\t\treturn typeInfo;\r\n\t},\r\n\tgetTypeInfoByElementName : function(name, context, scope) {\r\n\t\tvar elementInfo = context.getElementInfo(name, scope);\r\n\t\tif (Jsonix.Util.Type.exists(elementInfo)) {\r\n\t\t\treturn elementInfo.typeInfo;\r\n\t\t} else {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n});\r\n\r\nJsonix.Binding.Unmarshalls.Element.AsElementRef = Jsonix.Class({\r\n\tconvertFromTypedNamedValue : function(typedNamedValue, context, input, scope) {\r\n\t\treturn {\r\n\t\t\tname : typedNamedValue.name,\r\n\t\t\tvalue : typedNamedValue.value\r\n\t\t};\r\n\t}\r\n});\r\n\r\nJsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef = Jsonix.Class({\r\n\tconvertFromTypedNamedValue : function(typedNamedValue, context, input, scope) {\r\n\t\tvar propertyName = typedNamedValue.name.toCanonicalString(context);\r\n\t\tvar value = {};\r\n\t\tvalue[propertyName] = typedNamedValue.value;\r\n\t\treturn value;\r\n\t}\r\n});\r\nJsonix.Binding.Marshaller = Jsonix.Class(Jsonix.Binding.Marshalls.Element, Jsonix.Binding.Marshalls.Element.AsElementRef, {\r\n\tcontext : null,\r\n\tinitialize : function(context) {\r\n\t\tJsonix.Util.Ensure.ensureObject(context);\r\n\t\tthis.context = context;\r\n\t},\r\n\tmarshalString : function(value) {\r\n\t\tvar doc = this.marshalDocument(value);\r\n\t\tvar text = Jsonix.DOM.serialize(doc);\r\n\t\treturn text;\r\n\t},\r\n\tmarshalDocument : function(value) {\r\n\t\tvar output = new Jsonix.XML.Output({\r\n\t\t\tnamespacePrefixes : this.context.namespacePrefixes\r\n\t\t});\r\n\r\n\t\tvar doc = output.writeStartDocument();\r\n\t\tthis.marshalElement(value, this.context, output, undefined);\r\n\t\toutput.writeEndDocument();\r\n\t\treturn doc;\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Binding.Marshaller'\r\n});\r\nJsonix.Binding.Marshaller.Simplified = Jsonix.Class(Jsonix.Binding.Marshaller, {\r\n\tCLASS_NAME : 'Jsonix.Binding.Marshaller.Simplified'\r\n});\r\nJsonix.Binding.Unmarshaller = Jsonix.Class(Jsonix.Binding.Unmarshalls.Element, Jsonix.Binding.Unmarshalls.Element.AsElementRef, {\r\n\tcontext : null,\r\n\tallowTypedObject : true,\r\n\tallowDom : false,\r\n\tinitialize : function(context) {\r\n\t\tJsonix.Util.Ensure.ensureObject(context);\r\n\t\tthis.context = context;\r\n\t},\r\n\tunmarshalString : function(text) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tvar doc = Jsonix.DOM.parse(text);\r\n\t\treturn this.unmarshalDocument(doc);\r\n\t},\r\n\tunmarshalURL : function(url, callback, options) {\r\n\t\tJsonix.Util.Ensure.ensureString(url);\r\n\t\tJsonix.Util.Ensure.ensureFunction(callback);\r\n\t\tif (Jsonix.Util.Type.exists(options)) {\r\n\t\t\tJsonix.Util.Ensure.ensureObject(options);\r\n\t\t}\r\n\t\tthat = this;\r\n\t\tJsonix.DOM.load(url, function(doc) {\r\n\t\t\tcallback(that.unmarshalDocument(doc));\r\n\t\t}, options);\r\n\t},\r\n\tunmarshalFile : function(fileName, callback, options) {\r\n\t\tif (typeof _jsonix_fs === 'undefined') {\r\n\t\t\tthrow new Error(\"File unmarshalling is only available in environments which support file systems.\");\r\n\t\t}\r\n\t\tJsonix.Util.Ensure.ensureString(fileName);\r\n\t\tJsonix.Util.Ensure.ensureFunction(callback);\r\n\t\tif (Jsonix.Util.Type.exists(options)) {\r\n\t\t\tJsonix.Util.Ensure.ensureObject(options);\r\n\t\t}\r\n\t\tthat = this;\r\n\t\tvar fs = _jsonix_fs;\r\n\t\tfs.readFile(fileName, options, function(err, data) {\r\n\t\t\tif (err) {\r\n\t\t\t\tthrow err;\r\n\t\t\t} else {\r\n\t\t\t\tvar text = data.toString();\r\n\t\t\t\tvar doc = Jsonix.DOM.parse(text);\r\n\t\t\t\tcallback(that.unmarshalDocument(doc));\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tunmarshalDocument : function(doc, scope) {\r\n\t\tvar input = new Jsonix.XML.Input(doc);\r\n\t\tvar result = null;\r\n\t\tvar callback = function(_result) {\r\n\t\t\tresult = _result;\r\n\t\t};\r\n\t\tinput.nextTag();\r\n\t\tthis.unmarshalElement(this.context, input, scope, callback);\r\n\t\treturn result;\r\n\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Binding.Unmarshaller'\r\n});\r\nJsonix.Binding.Unmarshaller.Simplified = Jsonix.Class(Jsonix.Binding.Unmarshaller, Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef, {\r\n\tCLASS_NAME : 'Jsonix.Binding.Unmarshaller.Simplified'\r\n});\r\nJsonix.Model.TypeInfo = Jsonix.Class({\r\n\tmodule: null,\t\t\t\r\n\tname : null,\r\n\tbaseTypeInfo : null,\r\n\tinitialize : function() {\r\n\t},\r\n\tisBasedOn : function(typeInfo) {\r\n\t\tvar currentTypeInfo = this;\r\n\t\twhile (currentTypeInfo) {\r\n\t\t\tif (typeInfo === currentTypeInfo) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tcurrentTypeInfo = currentTypeInfo.baseTypeInfo;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.TypeInfo'\r\n});\r\nJsonix.Model.ClassInfo = Jsonix\r\n\t\t.Class(Jsonix.Model.TypeInfo, Jsonix.Mapping.Styled, {\r\n\t\t\tname : null,\r\n\t\t\tlocalName : null,\r\n\t\t\ttypeName : null,\r\n\t\t\tinstanceFactory : null,\r\n\t\t\tproperties : null,\r\n\t\t\tpropertiesMap : null,\r\n\t\t\tstructure : null,\r\n\t\t\ttargetNamespace : '',\r\n\t\t\tdefaultElementNamespaceURI : '',\r\n\t\t\tdefaultAttributeNamespaceURI : '',\r\n\t\t\tbuilt : false,\r\n\t\t\tinitialize : function(mapping, options) {\r\n\t\t\t\tJsonix.Model.TypeInfo.prototype.initialize.apply(this, []);\r\n\t\t\t\tJsonix.Mapping.Styled.prototype.initialize.apply(this, [options]);\r\n\t\t\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\t\t\tvar n = mapping.name||mapping.n||undefined;\r\n\t\t\t\tJsonix.Util.Ensure.ensureString(n);\r\n\t\t\t\tthis.name = n;\r\n\t\t\t\t\r\n\t\t\t\tvar ln = mapping.localName||mapping.ln||null;\r\n\t\t\t\tthis.localName = ln;\r\n\r\n\t\t\t\tvar dens = mapping.defaultElementNamespaceURI||mapping.dens||mapping.targetNamespace||mapping.tns||'';\r\n\t\t\t\tthis.defaultElementNamespaceURI = dens;\r\n\t\t\t\t\r\n\t\t\t\tvar tns =  mapping.targetNamespace||mapping.tns||mapping.defaultElementNamespaceURI||mapping.dens||this.defaultElementNamespaceURI;\r\n\t\t\t\tthis.targetNamespace = tns;\r\n\r\n\t\t\t\tvar dans = mapping.defaultAttributeNamespaceURI||mapping.dans||'';\r\n\t\t\t\tthis.defaultAttributeNamespaceURI = dans;\r\n\t\t\t\t\r\n\t\t\t\tvar bti = mapping.baseTypeInfo||mapping.bti||null;\r\n\t\t\t\tthis.baseTypeInfo = bti;\r\n\t\t\t\t\r\n\t\t\t\tvar inF = mapping.instanceFactory||mapping.inF||undefined;\r\n\t\t\t\tif (Jsonix.Util.Type.exists(inF)) {\r\n\t\t\t\t\t// TODO: should we support instanceFactory as functions?\r\n\t\t\t\t\t// For the pure JSON configuration?\r\n\t\t\t\t\tJsonix.Util.Ensure.ensureFunction(inF);\r\n\t\t\t\t\tthis.instanceFactory = inF;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar tn = mapping.typeName||mapping.tn||undefined;\r\n\t\t\t\t\r\n\t\t\t\tif (Jsonix.Util.Type.exists(tn))\r\n\t\t\t\t{\r\n\t\t\t\t\tif (Jsonix.Util.Type.isString(tn))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthis.typeName = new Jsonix.XML.QName(this.targetNamespace, tn);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.typeName = Jsonix.XML.QName.fromObject(tn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (Jsonix.Util.Type.exists(ln))\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.typeName = new Jsonix.XML.QName(tns, ln);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.properties = [];\r\n\t\t\t\tthis.propertiesMap = {};\r\n\t\t\t\tvar ps = mapping.propertyInfos||mapping.ps||[];\r\n\t\t\t\tJsonix.Util.Ensure.ensureArray(ps);\r\n\t\t\t\tfor ( var index = 0; index < ps.length; index++) {\r\n\t\t\t\t\tthis.p(ps[index]);\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t},\r\n\t\t\tgetPropertyInfoByName : function(name) {\r\n\t\t\t\treturn this.propertiesMap[name];\r\n\t\t\t},\r\n\t\t\t// Obsolete\r\n\t\t\tdestroy : function() {\r\n\t\t\t},\r\n\t\t\tbuild : function(context) {\r\n\t\t\t\tif (!this.built) {\r\n\t\t\t\t\tthis.baseTypeInfo = context.resolveTypeInfo(this.baseTypeInfo, this.module);\r\n\t\t\t\t\tif (Jsonix.Util.Type.exists(this.baseTypeInfo)) {\r\n\t\t\t\t\t\tthis.baseTypeInfo.build(context);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Build properties in this context\r\n\t\t\t\t\tfor ( var index = 0; index < this.properties.length; index++) {\r\n\t\t\t\t\t\tvar propertyInfo = this.properties[index];\r\n\t\t\t\t\t\tpropertyInfo.build(context, this.module);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Build the structure\r\n\t\t\t\t\tvar structure = {\r\n\t\t\t\t\t\telements : null,\r\n\t\t\t\t\t\tattributes : {},\r\n\t\t\t\t\t\tanyAttribute : null,\r\n\t\t\t\t\t\tvalue : null,\r\n\t\t\t\t\t\tany : null\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.buildStructure(context, structure);\r\n\t\t\t\t\tthis.structure = structure;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbuildStructure : function(context, structure) {\r\n\t\t\t\tif (Jsonix.Util.Type.exists(this.baseTypeInfo)) {\r\n\t\t\t\t\tthis.baseTypeInfo.buildStructure(context, structure);\r\n\t\t\t\t}\r\n\t\t\t\tfor ( var index = 0; index < this.properties.length; index++) {\r\n\t\t\t\t\tvar propertyInfo = this.properties[index];\r\n\t\t\t\t\tpropertyInfo.buildStructure(context, structure);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tunmarshal : function(context, input) {\r\n\t\t\t\tthis.build(context);\r\n\t\t\t\tvar result;\r\n\t\t\t\t\r\n\t\t\t\tif (this.instanceFactory) {\r\n\t\t\t\t\tresult = new this.instanceFactory();\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tresult = { TYPE_NAME : this.name }; \r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (input.eventType !== 1) {\r\n\t\t\t\t\tthrow new Error(\"Parser must be on START_ELEMENT to read a class info.\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Read attributes\r\n\t\t\t\tif (Jsonix.Util.Type.exists(this.structure.attributes)) {\r\n\t\t\t\t\tvar attributeCount = input.getAttributeCount();\r\n\t\t\t\t\tif (attributeCount !== 0) {\r\n\t\t\t\t\t\tfor ( var index = 0; index < attributeCount; index++) {\r\n\t\t\t\t\t\t\tvar attributeNameKey = input\r\n\t\t\t\t\t\t\t\t\t.getAttributeNameKey(index);\r\n\t\t\t\t\t\t\tif (Jsonix.Util.Type\r\n\t\t\t\t\t\t\t\t\t.exists(this.structure.attributes[attributeNameKey])) {\r\n\t\t\t\t\t\t\t\tvar attributeValue = input\r\n\t\t\t\t\t\t\t\t\t\t.getAttributeValue(index);\r\n\t\t\t\t\t\t\t\tif (Jsonix.Util.Type.isString(attributeValue)) {\r\n\t\t\t\t\t\t\t\t\tvar attributePropertyInfo = this.structure.attributes[attributeNameKey];\r\n\t\t\t\t\t\t\t\t\tthis.unmarshalPropertyValue(context, input,\r\n\t\t\t\t\t\t\t\t\t\t\tattributePropertyInfo, result,\r\n\t\t\t\t\t\t\t\t\t\t\tattributeValue);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// Read any attribute\r\n\t\t\t\tif (Jsonix.Util.Type.exists(this.structure.anyAttribute)) {\r\n\t\t\t\t\tvar propertyInfo = this.structure.anyAttribute;\r\n\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t.unmarshalProperty(context, input, propertyInfo,\r\n\t\t\t\t\t\t\t\t\tresult);\r\n\t\t\t\t}\r\n\t\t\t\t// Read elements\r\n\t\t\t\tif (Jsonix.Util.Type.exists(this.structure.elements)) {\r\n\r\n\t\t\t\t\tvar et = input.next();\r\n\t\t\t\t\twhile (et !== Jsonix.XML.Input.END_ELEMENT) {\r\n\t\t\t\t\t\tif (et === Jsonix.XML.Input.START_ELEMENT) {\r\n\t\t\t\t\t\t\t// New sub-element starts\r\n\t\t\t\t\t\t\tvar elementNameKey = input.getNameKey();\r\n\t\t\t\t\t\t\tif (Jsonix.Util.Type\r\n\t\t\t\t\t\t\t\t\t.exists(this.structure.elements[elementNameKey])) {\r\n\t\t\t\t\t\t\t\tvar elementPropertyInfo = this.structure.elements[elementNameKey];\r\n\t\t\t\t\t\t\t\tthis.unmarshalProperty(context, input,\r\n\t\t\t\t\t\t\t\t\t\telementPropertyInfo, result);\r\n\t\t\t\t\t\t\t} else if (Jsonix.Util.Type\r\n\t\t\t\t\t\t\t\t\t.exists(this.structure.any)) {\r\n\t\t\t\t\t\t\t\t// TODO Refactor\r\n\r\n\t\t\t\t\t\t\t\tvar anyPropertyInfo = this.structure.any;\r\n\t\t\t\t\t\t\t\tthis.unmarshalProperty(context, input,\r\n\t\t\t\t\t\t\t\t\t\tanyPropertyInfo, result);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// TODO optionally report a validation error that the element is not expected\r\n\t\t\t\t\t\t\t\tet = input.skipElement();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if ((et === Jsonix.XML.Input.CHARACTERS || et === Jsonix.XML.Input.CDATA || et === Jsonix.XML.Input.ENTITY_REFERENCE)) {\r\n\t\t\t\t\t\t\tif (Jsonix.Util.Type.exists(this.structure.mixed))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t// Characters and structure has a mixed property\r\n\t\t\t\t\t\t\t\tvar mixedPropertyInfo = this.structure.mixed;\r\n\t\t\t\t\t\t\t\tthis.unmarshalProperty(context, input,\r\n\t\t\t\t\t\t\t\t\t\tmixedPropertyInfo, result);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (et === Jsonix.XML.Input.SPACE || et === Jsonix.XML.Input.COMMENT\t|| et === Jsonix.XML.Input.PROCESSING_INSTRUCTION) {\r\n\t\t\t\t\t\t\t// Ignore\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthrow new Error(\"Illegal state: unexpected event type [\" + et\t+ \"].\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tet = input.next();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (Jsonix.Util.Type.exists(this.structure.value)) {\r\n\t\t\t\t\tvar valuePropertyInfo = this.structure.value;\r\n\t\t\t\t\tthis.unmarshalProperty(context, input, valuePropertyInfo,\r\n\t\t\t\t\t\t\tresult);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Just skip everything\r\n\t\t\t\t\tinput.nextTag();\r\n\t\t\t\t}\r\n\t\t\t\tif (input.eventType !== 2) {\r\n\t\t\t\t\tthrow new Error(\"Illegal state: must be END_ELEMENT.\");\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t},\r\n\t\t\tunmarshalProperty : function(context, input, propertyInfo, result) {\r\n\t\t\t\tvar propertyValue = propertyInfo\r\n\t\t\t\t\t\t.unmarshal(context, input, this);\r\n\t\t\t\tpropertyInfo.setProperty(result, propertyValue);\r\n\t\t\t},\r\n\t\t\tunmarshalPropertyValue : function(context, input, propertyInfo,\r\n\t\t\t\t\tresult, value) {\r\n\t\t\t\tvar propertyValue = propertyInfo.unmarshalValue(value, context, input, this);\r\n\t\t\t\tpropertyInfo.setProperty(result, propertyValue);\r\n\t\t\t},\r\n\t\t\tmarshal : function(value, context, output, scope) {\r\n\t\t\t\tif (this.isMarshallable(value, context, scope))\r\n\t\t\t\t{\r\n\t\t\t\t\t// TODO This must be reworked\r\n\t\t\t\t\tif (Jsonix.Util.Type.exists(this.baseTypeInfo)) {\r\n\t\t\t\t\t\tthis.baseTypeInfo.marshal(value, context, output);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor ( var index = 0; index < this.properties.length; index++) {\r\n\t\t\t\t\t\tvar propertyInfo = this.properties[index];\r\n\t\t\t\t\t\tvar propertyValue = value[propertyInfo.name];\r\n\t\t\t\t\t\tif (Jsonix.Util.Type.exists(propertyValue)) {\r\n\t\t\t\t\t\t\tpropertyInfo.marshal(propertyValue, context, output, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t// Otherwise if there is just one property, use this property to marshal\r\n\t\t\t\t\tif (this.structure.value)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar valuePropertyInfo = this.structure.value;\r\n\t\t\t\t\t\tvaluePropertyInfo.marshal(value, context, output, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (this.properties.length === 1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar singlePropertyInfo = this.properties[0];\r\n\t\t\t\t\t\tsinglePropertyInfo.marshal(value, context, output, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// TODO throw an error\r\n\t\t\t\t\t\tthrow new Error(\"The passed value [\" + value + \"] is not an object and there is no single suitable property to marshal it.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// Checks if the value is marshallable\r\n\t\t\tisMarshallable : function(value, context, scope) {\r\n\t\t\t\treturn this.isInstance(value, context, scope) || (Jsonix.Util.Type.isObject(value) && !Jsonix.Util.Type.isArray(value));\r\n\t\t\t},\r\n\t\t\tisInstance : function(value, context, scope) {\r\n\t\t\t\tif (this.instanceFactory) {\r\n\t\t\t\t\treturn value instanceof this.instanceFactory;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn Jsonix.Util.Type.isObject(value) && Jsonix.Util.Type.isString(value.TYPE_NAME) && value.TYPE_NAME === this.name;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// Obsolete, left for backwards compatibility\r\n\t\t\tb : function(baseTypeInfo) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureObject(baseTypeInfo);\r\n\t\t\t\tthis.baseTypeInfo = baseTypeInfo;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\t// Obsolete, left for backwards compatibility\r\n\t\t\tps : function() {\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tp : function(mapping) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\t\t\t// If mapping is an instance of the property class\r\n\t\t\t\tif (mapping instanceof Jsonix.Model.PropertyInfo) {\r\n\t\t\t\t\tthis.addProperty(mapping);\r\n\t\t\t\t}\r\n\t\t\t\t// Else create it via generic mapping configuration\r\n\t\t\t\telse {\r\n\t\t\t\t\tmapping = Jsonix.Util.Type.cloneObject(mapping);\r\n\t\t\t\t\tvar type = mapping.type||mapping.t||'element';\r\n\t\t\t\t\t// Locate the creator function\r\n\t\t\t\t\tif (Jsonix.Util.Type\r\n\t\t\t\t\t\t\t.isFunction(this.propertyInfoCreators[type])) {\r\n\t\t\t\t\t\tvar propertyInfoCreator = this.propertyInfoCreators[type];\r\n\t\t\t\t\t\t// Call the creator function\r\n\t\t\t\t\t\tpropertyInfoCreator.call(this, mapping);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(\"Unknown property info type [\" + type + \"].\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taa : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this\r\n\t\t\t\t\t\t.addProperty(new this.mappingStyle.anyAttributePropertyInfo(\r\n\t\t\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\tae : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this\r\n\t\t\t\t\t\t.addProperty(new this.mappingStyle.anyElementPropertyInfo(\r\n\t\t\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\ta : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this.addProperty(new this.mappingStyle.attributePropertyInfo(\r\n\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\tem : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this\r\n\t\t\t\t\t\t.addProperty(new this.mappingStyle.elementMapPropertyInfo(\r\n\t\t\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\te : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this.addProperty(new this.mappingStyle.elementPropertyInfo(\r\n\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\tes : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this.addProperty(new this.mappingStyle.elementsPropertyInfo(\r\n\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\ter : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this\r\n\t\t\t\t\t\t.addProperty(new this.mappingStyle.elementRefPropertyInfo(\r\n\t\t\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\ters : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this\r\n\t\t\t\t\t\t.addProperty(new this.mappingStyle.elementRefsPropertyInfo(\r\n\t\t\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\tv : function(mapping) {\r\n\t\t\t\tthis.addDefaultNamespaces(mapping);\r\n\t\t\t\treturn this.addProperty(new this.mappingStyle.valuePropertyInfo(\r\n\t\t\t\t\t\tmapping, {\r\n\t\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t\t}));\r\n\t\t\t},\r\n\t\t\taddDefaultNamespaces : function(mapping) {\r\n\t\t\t\tif (Jsonix.Util.Type.isObject(mapping)) {\r\n\t\t\t\t\tif (!Jsonix.Util.Type\r\n\t\t\t\t\t\t\t.isString(mapping.defaultElementNamespaceURI)) {\r\n\t\t\t\t\t\tmapping.defaultElementNamespaceURI = this.defaultElementNamespaceURI;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!Jsonix.Util.Type\r\n\t\t\t\t\t\t\t.isString(mapping.defaultAttributeNamespaceURI)) {\r\n\t\t\t\t\t\tmapping.defaultAttributeNamespaceURI = this.defaultAttributeNamespaceURI;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddProperty : function(property) {\r\n\t\t\t\tthis.properties.push(property);\r\n\t\t\t\tthis.propertiesMap[property.name] = property;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tCLASS_NAME : 'Jsonix.Model.ClassInfo'\r\n\t\t});\r\nJsonix.Model.ClassInfo.prototype.propertyInfoCreators = {\r\n\t\"aa\" : Jsonix.Model.ClassInfo.prototype.aa,\r\n\t\"anyAttribute\" : Jsonix.Model.ClassInfo.prototype.aa,\r\n\t\"ae\" : Jsonix.Model.ClassInfo.prototype.ae,\r\n\t\"anyElement\" : Jsonix.Model.ClassInfo.prototype.ae,\r\n\t\"a\" : Jsonix.Model.ClassInfo.prototype.a,\r\n\t\"attribute\" : Jsonix.Model.ClassInfo.prototype.a,\r\n\t\"em\" : Jsonix.Model.ClassInfo.prototype.em,\r\n\t\"elementMap\" : Jsonix.Model.ClassInfo.prototype.em,\r\n\t\"e\" : Jsonix.Model.ClassInfo.prototype.e,\r\n\t\"element\" : Jsonix.Model.ClassInfo.prototype.e,\r\n\t\"es\" : Jsonix.Model.ClassInfo.prototype.es,\r\n\t\"elements\" : Jsonix.Model.ClassInfo.prototype.es,\r\n\t\"er\" : Jsonix.Model.ClassInfo.prototype.er,\r\n\t\"elementRef\" : Jsonix.Model.ClassInfo.prototype.er,\r\n\t\"ers\" : Jsonix.Model.ClassInfo.prototype.ers,\r\n\t\"elementRefs\" : Jsonix.Model.ClassInfo.prototype.ers,\r\n\t\"v\" : Jsonix.Model.ClassInfo.prototype.v,\r\n\t\"value\" : Jsonix.Model.ClassInfo.prototype.v\r\n};\r\nJsonix.Model.EnumLeafInfo = Jsonix.Class(Jsonix.Model.TypeInfo, {\r\n\tname : null,\r\n\tbaseTypeInfo : 'String',\r\n\tentries : null,\r\n\tkeys : null,\r\n\tvalues : null,\r\n\tbuilt : false,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Model.TypeInfo.prototype.initialize.apply(this, []);\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\t\r\n\t\tvar n = mapping.name||mapping.n||undefined;\r\n\t\tJsonix.Util.Ensure.ensureString(n);\r\n\t\tthis.name = n;\r\n\t\t\r\n\t\tvar bti = mapping.baseTypeInfo||mapping.bti||'String';\r\n\t\tthis.baseTypeInfo = bti;\r\n\t\t\r\n\t\tvar vs = mapping.values||mapping.vs||undefined;\r\n\t\tJsonix.Util.Ensure.ensureExists(vs);\r\n\t\tif (!(Jsonix.Util.Type.isObject(vs) || Jsonix.Util.Type.isArray(vs))) {\r\n\t\t\tthrow new Error('Enum values must be either an array or an object.');\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.entries = vs;\r\n\t\t}\t\t\r\n\t},\r\n\tbuild : function(context) {\r\n\t\tif (!this.built) {\r\n\t\t\tthis.baseTypeInfo = context.resolveTypeInfo(this.baseTypeInfo, this.module);\r\n\t\t\tthis.baseTypeInfo.build(context);\r\n\t\t\tvar items = this.entries;\r\n\t\t\tvar entries = {};\r\n\t\t\tvar keys = [];\r\n\t\t\tvar values = [];\r\n\t\t\tvar index = 0;\r\n\t\t\tvar key;\r\n\t\t\tvar value;\r\n\t\t\t// If values is an array, process individual items\r\n\t\t\tif (Jsonix.Util.Type.isArray(items))\r\n\t\t\t{\r\n\t\t\t\t// Build properties in this context\r\n\t\t\t\tfor (index = 0; index < items.length; index++) {\r\n\t\t\t\t\tvalue = items[index];\r\n\t\t\t\t\tif (Jsonix.Util.Type.isString(value)) {\r\n\t\t\t\t\t\tkey = value;\r\n\t\t\t\t\t\tif (!(Jsonix.Util.Type.isFunction(this.baseTypeInfo.parse)))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthrow new Error('Enum value is provided as string but the base type ['+this.baseTypeInfo.name+'] of the enum info [' + this.name + '] does not implement the parse method.');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Using null as input since input is not available\r\n\t\t\t\t\t\tvalue = this.baseTypeInfo.parse(value, context, null, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (this.baseTypeInfo.isInstance(value, context, this))\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!(Jsonix.Util.Type.isFunction(this.baseTypeInfo.print)))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthrow new Error('The base type ['+this.baseTypeInfo.name+'] of the enum info [' + this.name + '] does not implement the print method, unable to produce the enum key as string.');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Using null as output since output is not available at this moment\r\n\t\t\t\t\t\t\tkey = this.baseTypeInfo.print(value, context, null, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthrow new Error('Enum value [' + value + '] is not an instance of the enum base type [' + this.baseTypeInfo.name + '].');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tentries[key] = value;\r\n\t\t\t\t\tkeys[index] = key;\r\n\t\t\t\t\tvalues[index] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (Jsonix.Util.Type.isObject(items))\r\n\t\t\t{\r\n\t\t\t\tfor (key in items) {\r\n\t\t\t\t\tif (items.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tvalue = items[key];\r\n\t\t\t\t\t\tif (Jsonix.Util.Type.isString(value)) {\r\n\t\t\t\t\t\t\tif (!(Jsonix.Util.Type.isFunction(this.baseTypeInfo.parse)))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthrow new Error('Enum value is provided as string but the base type ['+this.baseTypeInfo.name+'] of the enum info [' + this.name + '] does not implement the parse method.');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Using null as input since input is not available\r\n\t\t\t\t\t\t\tvalue = this.baseTypeInfo.parse(value, context, null, this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (!this.baseTypeInfo.isInstance(value, context, this))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthrow new Error('Enum value [' + value + '] is not an instance of the enum base type [' + this.baseTypeInfo.name + '].');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tentries[key] = value;\r\n\t\t\t\t\t\tkeys[index] = key;\r\n\t\t\t\t\t\tvalues[index] = value;\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthrow new Error('Enum values must be either an array or an object.');\r\n\t\t\t}\r\n\t\t\tthis.entries = entries;\r\n\t\t\tthis.keys = keys;\r\n\t\t\tthis.values = values;\r\n\t\t\tthis.built = true;\r\n\t\t}\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar text = input.getElementText();\r\n\t\treturn this.parse(text, context, input, scope);\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\t\tif (Jsonix.Util.Type.exists(value)) {\r\n\t\t\toutput.writeCharacters(this.reprint(value, context, output, scope));\r\n\t\t}\r\n\t},\r\n\treprint : function(value, context, output, scope) {\r\n\t\tif (Jsonix.Util.Type.isString(value) && !this.isInstance(value, context, scope)) {\r\n\t\t\t// Using null as input since input is not available\r\n\t\t\treturn this.print(this.parse(value, context, null, scope), context, output, scope);\r\n\t\t} else {\r\n\t\t\treturn this.print(value, context, output, scope);\r\n\t\t}\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tfor (var index = 0; index < this.values.length; index++)\r\n\t\t{\r\n\t\t\tif (this.values[index] === value)\r\n\t\t\t{\r\n\t\t\t\treturn this.keys[index];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthrow new Error('Value [' + value + '] is invalid for the enum type [' + this.name + '].');\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tif (this.entries.hasOwnProperty(text))\r\n\t\t{\r\n\t\t\treturn this.entries[text];\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthrow new Error('Value [' + text + '] is invalid for the enum type [' + this.name + '].');\r\n\t\t}\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\tfor (var index = 0; index < this.values.length; index++)\r\n\t\t{\r\n\t\t\tif (this.values[index] === value)\r\n\t\t\t{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.EnumLeafInfo'\r\n});\r\nJsonix.Model.ElementInfo = Jsonix.Class({\r\n\tmodule: null,\t\t\t\r\n\telementName : null,\r\n\ttypeInfo : null,\r\n\tsubstitutionHead : null,\r\n\tscope : null,\r\n\tbuilt : false,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\t\r\n\t\tvar dens = mapping.defaultElementNamespaceURI||mapping.dens||'';\r\n\t\tthis.defaultElementNamespaceURI = dens;\r\n\t\t\r\n\t\tvar en = mapping.elementName || mapping.en||undefined;\r\n\t\tif (Jsonix.Util.Type.isObject(en)) {\r\n\t\t\tthis.elementName = Jsonix.XML.QName.fromObject(en);\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureString(en);\r\n\t\t\tthis.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, en);\r\n\t\t}\r\n\t\t\r\n\t\tvar ti = mapping.typeInfo||mapping.ti||'String';\r\n\t\tthis.typeInfo = ti;\r\n\t\t\r\n\t\tvar sh = mapping.substitutionHead||mapping.sh||null;\r\n\t\tthis.substitutionHead = sh;\r\n\t\t\r\n\t\tvar sc = mapping.scope||mapping.sc||null;\r\n\t\tthis.scope = sc;\r\n\t},\r\n\tbuild : function(context) {\r\n\t\t// If element info is not yet built\r\n\t\tif (!this.built) {\r\n\t\t\tthis.typeInfo = context.resolveTypeInfo(this.typeInfo, this.module);\r\n\t\t\tthis.scope = context.resolveTypeInfo(this.scope, this.module);\r\n\t\t\tthis.built = true;\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.ElementInfo'\r\n});\r\nJsonix.Model.PropertyInfo = Jsonix.Class({\r\n\tname : null,\r\n\tcollection : false,\r\n\ttargetNamespace : '',\r\n\tdefaultElementNamespaceURI : '',\r\n\tdefaultAttributeNamespaceURI : '',\r\n\tbuilt : false,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tvar n = mapping.name || mapping.n || undefined;\r\n\t\tJsonix.Util.Ensure.ensureString(n);\r\n\t\tthis.name = n;\r\n\t\tvar dens = mapping.defaultElementNamespaceURI || mapping.dens || mapping.targetNamespace || mapping.tns || '';\r\n\t\tthis.defaultElementNamespaceURI = dens;\r\n\t\tvar tns = mapping.targetNamespace || mapping.tns || mapping.defaultElementNamespaceURI || mapping.dens || this.defaultElementNamespaceURI;\r\n\t\tthis.targetNamespace = tns;\r\n\t\tvar dans = mapping.defaultAttributeNamespaceURI || mapping.dans || '';\r\n\t\tthis.defaultAttributeNamespaceURI = dans;\r\n\t\tvar col = mapping.collection || mapping.col || false;\r\n\t\tthis.collection = col;\r\n\t\tvar rq = mapping.required || mapping.rq || false;\r\n\t\tthis.required = rq;\r\n\t\tif (this.collection) {\r\n\t\t\tvar mno;\r\n\t\t\tif (Jsonix.Util.Type.isNumber(mapping.minOccurs)) {\r\n\t\t\t\tmno = mapping.minOccurs;\r\n\t\t\t}\r\n\t\t\telse if (Jsonix.Util.Type.isNumber(mapping.mno)) {\r\n\t\t\t\tmno = mapping.mno;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmno = 1;\r\n\t\t\t}\r\n\t\t\tthis.minOccurs = mno;\r\n\t\t\tvar mxo;\r\n\t\t\tif (Jsonix.Util.Type.isNumber(mapping.maxOccurs)) {\r\n\t\t\t\tmxo = mapping.maxOccurs;\r\n\t\t\t}\r\n\t\t\telse if (Jsonix.Util.Type.isNumber(mapping.mxo)) {\r\n\t\t\t\tmxo = mapping.mxo;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmxo = null;\r\n\t\t\t}\r\n\t\t\tthis.maxOccurs = mxo;\r\n\t\t}\r\n\t},\r\n\tbuild : function(context, module) {\r\n\t\tif (!this.built) {\r\n\t\t\tthis.doBuild(context, module);\r\n\t\t\tthis.built = true;\r\n\t\t}\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\tthrow new Error(\"Abstract method [doBuild].\");\r\n\t},\r\n\tbuildStructure : function(context, structure) {\r\n\t\tthrow new Error(\"Abstract method [buildStructure].\");\r\n\t},\r\n\tsetProperty : function(object, value) {\r\n\t\tif (Jsonix.Util.Type.exists(value)) {\r\n\t\t\tif (this.collection) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureArray(value, 'Collection property requires an array value.');\r\n\t\t\t\tif (!Jsonix.Util.Type.exists(object[this.name])) {\r\n\t\t\t\t\tobject[this.name] = [];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var index = 0; index < value.length; index++) {\r\n\t\t\t\t\tobject[this.name].push(value[index]);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tobject[this.name] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.PropertyInfo'\r\n});\r\nJsonix.Model.AnyAttributePropertyInfo = Jsonix.Class(Jsonix.Model.PropertyInfo, {\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.PropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar attributeCount = input.getAttributeCount();\r\n\t\tif (attributeCount === 0) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\tvar result = {};\r\n\t\t\tfor ( var index = 0; index < attributeCount; index++) {\r\n\t\t\t\tvar value = input.getAttributeValue(index);\r\n\t\t\t\tif (Jsonix.Util.Type.isString(value)) {\r\n\t\t\t\t\tvar propertyName = this.convertFromAttributeName(input.getAttributeName(index), context, input, scope);\r\n\t\t\t\t\tresult[propertyName] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\t\tif (!Jsonix.Util.Type.isObject(value)) {\r\n\t\t\t// Nothing to do\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfor ( var propertyName in value) {\r\n\t\t\tif (value.hasOwnProperty(propertyName)) {\r\n\t\t\t\tvar propertyValue = value[propertyName];\r\n\t\t\t\tif (Jsonix.Util.Type.isString(propertyValue)) {\r\n\t\t\t\t\tvar attributeName = this.convertToAttributeName(propertyName, context, output, scope);\r\n\t\t\t\t\toutput.writeAttribute(attributeName, propertyValue);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tconvertFromAttributeName : function(attributeName, context, input, scope) {\r\n\t\treturn attributeName.key;\r\n\t},\r\n\tconvertToAttributeName : function(propertyName, context, output, scope) {\r\n\t\treturn Jsonix.XML.QName.fromObjectOrString(propertyName, context);\r\n\t},\r\n\tdoBuild : function(context, module)\t{\r\n\t\t// Nothing to do\r\n\t},\r\n\tbuildStructure : function(context, structure) {\r\n\t\tJsonix.Util.Ensure.ensureObject(structure);\r\n\t\t// if (Jsonix.Util.Type.exists(structure.anyAttribute))\r\n\t\t// {\r\n\t\t// // TODO better exception\r\n\t\t// throw new Error(\"The structure already defines an any attribute\r\n\t\t// property.\");\r\n\t\t// } else\r\n\t\t// {\r\n\t\tstructure.anyAttribute = this;\r\n\t\t// }\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.AnyAttributePropertyInfo'\r\n});\r\nJsonix.Model.AnyAttributePropertyInfo.Simplified = Jsonix.Class(Jsonix.Model.AnyAttributePropertyInfo, {\r\n\tconvertFromAttributeName : function(attributeName, context, input, scope)\r\n\t{\r\n\t\treturn attributeName.toCanonicalString(context);\r\n\t}\r\n});\r\n\r\nJsonix.Model.SingleTypePropertyInfo = Jsonix.Class(Jsonix.Model.PropertyInfo, {\r\n\ttypeInfo : 'String',\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.PropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\tvar ti = mapping.typeInfo || mapping.ti || 'String';\r\n\t\tthis.typeInfo = ti;\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\tthis.typeInfo = context.resolveTypeInfo(this.typeInfo, module);\r\n\t},\r\n\tunmarshalValue : function(value, context, input, scope) {\r\n\t\treturn this.parse(value, context, input, scope);\r\n\t},\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.typeInfo.parse(value, context, input, scope);\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.typeInfo.reprint(value, context, output, scope);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.SingleTypePropertyInfo'\r\n});\r\n\r\nJsonix.Model.AttributePropertyInfo = Jsonix.Class(Jsonix.Model.SingleTypePropertyInfo, {\r\n\tattributeName : null,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.SingleTypePropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\tvar an = mapping.attributeName||mapping.an||undefined;\r\n\t\tif (Jsonix.Util.Type.isObject(an)) {\r\n\t\t\tthis.attributeName = Jsonix.XML.QName.fromObject(an);\r\n\t\t} else if (Jsonix.Util.Type.isString(an)) {\r\n\t\t\tthis.attributeName = new Jsonix.XML.QName(this.defaultAttributeNamespaceURI, an);\r\n\t\t} else {\r\n\t\t\tthis.attributeName = new Jsonix.XML.QName(this.defaultAttributeNamespaceURI, this.name);\r\n\t\t}\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar attributeCount = input.getAttributeCount();\r\n\t\tvar result = null;\r\n\t\tfor ( var index = 0; index < attributeCount; index++) {\r\n\t\t\tvar attributeNameKey = input.getAttributeNameKey(index);\r\n\t\t\tif (this.attributeName.key === attributeNameKey) {\r\n\t\t\t\tvar attributeValue = input.getAttributeValue(index);\r\n\t\t\t\tif (Jsonix.Util.Type.isString(attributeValue)) {\r\n\t\t\t\t\tresult = this.unmarshalValue(attributeValue, context, input, scope);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\t\tif (Jsonix.Util.Type.exists(value)) {\r\n\t\t\toutput.writeAttribute(this.attributeName, this.print(value, context, output, scope));\r\n\t\t}\r\n\r\n\t},\r\n\tbuildStructure : function(context, structure) {\r\n\t\tJsonix.Util.Ensure.ensureObject(structure);\r\n\t\tJsonix.Util.Ensure.ensureObject(structure.attributes);\r\n\t\tvar key = this.attributeName.key;\r\n\t\t// if (Jsonix.Util.Type.exists(structure.attributes[key])) {\r\n\t\t// // TODO better exception\r\n\t\t// throw new Error(\"The structure already defines an attribute for the key\r\n\t\t// [\"\r\n\t\t// + key + \"].\");\r\n\t\t// } else\r\n\t\t// {\r\n\t\tstructure.attributes[key] = this;\r\n\t\t// }\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.AttributePropertyInfo'\r\n});\r\n\r\nJsonix.Model.ValuePropertyInfo = Jsonix.Class(Jsonix.Model.SingleTypePropertyInfo, {\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.SingleTypePropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\r\n\t\tvar cdata = mapping.asCDATA || mapping.cdata || false;\r\n\t\tthis.asCDATA = cdata;\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar text = input.getElementText();\r\n\t\treturn this.unmarshalValue(text, context, input, scope);\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\t\tif (!Jsonix.Util.Type.exists(value)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.asCDATA) {\r\n\t\t\toutput.writeCdata(this.print(value, context, output, scope));\r\n\t\t} else {\r\n\t\t\toutput.writeCharacters(this.print(value, context, output, scope));\r\n\t\t}\r\n\t},\r\n\tbuildStructure : function(context, structure) {\r\n\t\tJsonix.Util.Ensure.ensureObject(structure);\r\n\t\t// if (Jsonix.Util.Type.exists(structure.value)) {\r\n\t\t// // TODO better exception\r\n\t\t// throw new Error(\"The structure already defines a value\r\n\t\t// property.\");\r\n\t\t// } else\r\n\t\tif (Jsonix.Util.Type.exists(structure.elements)) {\r\n\t\t\t// TODO better exception\r\n\t\t\tthrow new Error(\"The structure already defines element mappings, it cannot define a value property.\");\r\n\t\t} else {\r\n\t\t\tstructure.value = this;\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.ValuePropertyInfo'\r\n});\r\n\r\nJsonix.Model.AbstractElementsPropertyInfo = Jsonix.Class(Jsonix.Binding.Unmarshalls.Element, Jsonix.Binding.Unmarshalls.WrapperElement, Jsonix.Model.PropertyInfo, {\r\n\twrapperElementName : null,\r\n\tallowDom : false,\r\n\tallowTypedObject : true,\r\n\tmixed : false,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.PropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\tvar wen = mapping.wrapperElementName||mapping.wen||undefined;\r\n\t\tif (Jsonix.Util.Type.isObject(wen)) {\r\n\t\t\tthis.wrapperElementName = Jsonix.XML.QName.fromObject(wen);\r\n\t\t} else if (Jsonix.Util.Type.isString(wen)) {\r\n\t\t\tthis.wrapperElementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, wen);\r\n\t\t} else {\r\n\t\t\tthis.wrapperElementName = null;\r\n\t\t}\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar result = null;\r\n\t\tvar that = this;\r\n\t\tvar callback = function(value) {\r\n\t\t\tif (that.collection) {\r\n\t\t\t\tif (result === null) {\r\n\t\t\t\t\tresult = [];\r\n\t\t\t\t}\r\n\t\t\t\tresult.push(value);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (result === null) {\r\n\t\t\t\t\tresult = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO Report validation error\r\n\t\t\t\t\tthrow new Error(\"Value already set.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\tthis.unmarshalWrapperElement(context, input, scope, callback);\r\n\t\t} else {\r\n\t\t\tthis.unmarshalElement(context, input, scope, callback);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\r\n\t\tif (!Jsonix.Util.Type.exists(value)) {\r\n\t\t\t// Do nothing\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\toutput.writeStartElement(this.wrapperElementName);\r\n\t\t}\r\n\r\n\t\tif (!this.collection) {\r\n\t\t\tthis.marshalElement(value, context, output, scope);\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureArray(value);\r\n\t\t\t// TODO Exception if not array\r\n\t\t\tfor ( var index = 0; index < value.length; index++) {\r\n\t\t\t\tvar item = value[index];\r\n\t\t\t\t// TODO Exception if item does not exist\r\n\t\t\t\tthis.marshalElement(item, context, output, scope);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\toutput.writeEndElement();\r\n\t\t}\r\n\t},\r\n\tconvertFromTypedNamedValue : function(elementValue, context, input, scope) {\r\n\t\treturn elementValue.value;\r\n\t},\r\n\tbuildStructure : function(context, structure) {\r\n\t\tJsonix.Util.Ensure.ensureObject(structure);\r\n\t\tif (Jsonix.Util.Type.exists(structure.value)) {\r\n\t\t\t// TODO better exception\r\n\t\t\tthrow new Error(\"The structure already defines a value property.\");\r\n\t\t} else if (!Jsonix.Util.Type.exists(structure.elements)) {\r\n\t\t\tstructure.elements = {};\r\n\t\t}\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\tstructure.elements[this.wrapperElementName.key] = this;\r\n\t\t} else {\r\n\t\t\tthis.buildStructureElements(context, structure);\r\n\t\t}\r\n\t},\r\n\tbuildStructureElements : function(context, structure) {\r\n\t\tthrow new Error(\"Abstract method [buildStructureElements].\");\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.AbstractElementsPropertyInfo'\r\n});\r\n\r\nJsonix.Model.ElementPropertyInfo = Jsonix.Class(Jsonix.Model.AbstractElementsPropertyInfo, Jsonix.Binding.Marshalls.Element, {\r\n\ttypeInfo : 'String',\r\n\telementName : null,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\tvar ti = mapping.typeInfo || mapping.ti || 'String';\r\n\t\tif (Jsonix.Util.Type.isObject(ti)) {\r\n\t\t\tthis.typeInfo = ti;\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureString(ti);\r\n\t\t\tthis.typeInfo = ti;\r\n\t\t}\r\n\t\tvar en = mapping.elementName || mapping.en || undefined;\r\n\t\tif (Jsonix.Util.Type.isObject(en)) {\r\n\t\t\tthis.elementName = Jsonix.XML.QName.fromObject(en);\r\n\t\t} else if (Jsonix.Util.Type.isString(en)) {\r\n\t\t\tthis.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, en);\r\n\t\t} else {\r\n\t\t\tthis.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, this.name);\r\n\t\t}\r\n\t},\r\n\tgetTypeInfoByElementName : function(elementName, context, scope) {\r\n\t\treturn this.typeInfo;\r\n\t},\r\n\tconvertToTypedNamedValue : function(value, context, output, scope) {\r\n\t\treturn {\r\n\t\t\tname : this.elementName,\r\n\t\t\tvalue : value,\r\n\t\t\ttypeInfo : this.typeInfo\r\n\t\t};\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\tthis.typeInfo = context.resolveTypeInfo(this.typeInfo, module);\r\n\t},\r\n\tbuildStructureElements : function(context, structure) {\r\n\t\tstructure.elements[this.elementName.key] = this;\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.ElementPropertyInfo'\r\n});\r\n\r\nJsonix.Model.ElementsPropertyInfo = Jsonix.Class(Jsonix.Model.AbstractElementsPropertyInfo, Jsonix.Binding.Marshalls.Element, {\r\n\telementTypeInfos : null,\r\n\telementTypeInfosMap : null,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\tvar etis = mapping.elementTypeInfos || mapping.etis || [];\r\n\t\tJsonix.Util.Ensure.ensureArray(etis);\r\n\t\tthis.elementTypeInfos = [];\r\n\t\tfor (var index = 0; index < etis.length; index++) {\r\n\t\t\tthis.elementTypeInfos[index] = Jsonix.Util.Type.cloneObject(etis[index]);\r\n\t\t}\r\n\t},\r\n\tgetTypeInfoByElementName : function(elementName, context, scope) {\r\n\t\treturn this.elementTypeInfosMap[elementName.key];\r\n\t},\r\n\tconvertToTypedNamedValue : function(value, context, output, scope) {\r\n\t\tfor (var index = 0; index < this.elementTypeInfos.length; index++) {\r\n\t\t\tvar elementTypeInfo = this.elementTypeInfos[index];\r\n\t\t\tvar typeInfo = elementTypeInfo.typeInfo;\r\n\t\t\tif (typeInfo.isInstance(value, context, scope)) {\r\n\t\t\t\tvar elementName = elementTypeInfo.elementName;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname : elementName,\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\ttypeInfo : typeInfo\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If xsi:type is supported\r\n\t\tif (context.supportXsiType) {\r\n\t\t\t// Find the actual type\r\n\t\t\tvar actualTypeInfo = context.getTypeInfoByValue(value);\r\n\t\t\tif (actualTypeInfo && actualTypeInfo.typeName) {\r\n\t\t\t\tfor (var jndex = 0; jndex < this.elementTypeInfos.length; jndex++) {\r\n\t\t\t\t\tvar eti = this.elementTypeInfos[jndex];\r\n\t\t\t\t\tvar ti = eti.typeInfo;\r\n\t\t\t\t\t// TODO Can be optimized\r\n\t\t\t\t\t// Find an element type info which has a type info that is a\r\n\t\t\t\t\t// supertype of the actual type info\r\n\t\t\t\t\tif (actualTypeInfo.isBasedOn(ti)) {\r\n\t\t\t\t\t\tvar en = eti.elementName;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tname : en,\r\n\t\t\t\t\t\t\tvalue : value,\r\n\t\t\t\t\t\t\ttypeInfo : ti\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// TODO harmonize error handling. See also marshallElement. Error must\r\n\t\t// only be on one place.\r\n\t\tthrow new Error(\"Could not find an element with type info supporting the value [\" + value + \"].\");\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\tthis.elementTypeInfosMap = {};\r\n\t\tvar etiti, etien;\r\n\t\tfor (var index = 0; index < this.elementTypeInfos.length; index++) {\r\n\t\t\tvar elementTypeInfo = this.elementTypeInfos[index];\r\n\t\t\tJsonix.Util.Ensure.ensureObject(elementTypeInfo);\r\n\t\t\tetiti = elementTypeInfo.typeInfo || elementTypeInfo.ti || 'String';\r\n\t\t\telementTypeInfo.typeInfo = context.resolveTypeInfo(etiti, module);\r\n\t\t\tetien = elementTypeInfo.elementName || elementTypeInfo.en || undefined;\r\n\t\t\telementTypeInfo.elementName = Jsonix.XML.QName.fromObjectOrString(etien, context, this.defaultElementNamespaceURI);\r\n\t\t\tthis.elementTypeInfosMap[elementTypeInfo.elementName.key] = elementTypeInfo.typeInfo;\r\n\t\t}\r\n\t},\r\n\tbuildStructureElements : function(context, structure) {\r\n\t\tfor (var index = 0; index < this.elementTypeInfos.length; index++) {\r\n\t\t\tvar elementTypeInfo = this.elementTypeInfos[index];\r\n\t\t\tstructure.elements[elementTypeInfo.elementName.key] = this;\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.ElementsPropertyInfo'\r\n});\r\n\r\nJsonix.Model.ElementMapPropertyInfo = Jsonix.Class(Jsonix.Model.AbstractElementsPropertyInfo, {\r\n\telementName : null,\r\n\tkey : null,\r\n\tvalue : null,\r\n\tentryTypeInfo : null,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\t// TODO Ensure correct argument\r\n\t\tvar k = mapping.key || mapping.k || undefined;\r\n\t\tJsonix.Util.Ensure.ensureObject(k);\r\n\t\tvar v = mapping.value || mapping.v || undefined;\r\n\t\tJsonix.Util.Ensure.ensureObject(v);\r\n\t\t// TODO Ensure correct argument\r\n\t\tvar en = mapping.elementName || mapping.en || undefined;\r\n\t\tif (Jsonix.Util.Type.isObject(en)) {\r\n\t\t\tthis.elementName = Jsonix.XML.QName.fromObject(en);\r\n\t\t} else if (Jsonix.Util.Type.isString(en)) {\r\n\t\t\tthis.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, en);\r\n\t\t} else {\r\n\t\t\tthis.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, this.name);\r\n\t\t}\r\n\t\tthis.entryTypeInfo = new Jsonix.Model.ClassInfo({\r\n\t\t\tname : 'Map<' + k.name + ',' + v.name + '>',\r\n\t\t\tpropertyInfos : [ k, v ]\r\n\t\t});\r\n\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar result = null;\r\n\t\tvar that = this;\r\n\t\tvar callback = function(value) {\r\n\r\n\t\t\tif (Jsonix.Util.Type.exists(value)) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureObject(value, 'Map property requires an object.');\r\n\t\t\t\tif (!Jsonix.Util.Type.exists(result)) {\r\n\t\t\t\t\tresult = {};\r\n\t\t\t\t}\r\n\t\t\t\tfor ( var attributeName in value) {\r\n\t\t\t\t\tif (value.hasOwnProperty(attributeName)) {\r\n\t\t\t\t\t\tvar attributeValue = value[attributeName];\r\n\t\t\t\t\t\tif (that.collection) {\r\n\t\t\t\t\t\t\tif (!Jsonix.Util.Type.exists(result[attributeName])) {\r\n\t\t\t\t\t\t\t\tresult[attributeName] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult[attributeName].push(attributeValue);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!Jsonix.Util.Type.exists(result[attributeName])) {\r\n\t\t\t\t\t\t\t\tresult[attributeName] = attributeValue;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t// TODO Report validation error\r\n\t\t\t\t\t\t\t\tthrow new Error(\"Value was already set.\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\tthis.unmarshalWrapperElement(context, input, scope, callback);\r\n\t\t} else {\r\n\t\t\tthis.unmarshalElement(context, input, scope, callback);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tgetTypeInfoByInputElement : function(context, input, scope) {\r\n\t\treturn this.entryTypeInfo;\r\n\t},\r\n\tconvertFromTypedNamedValue : function(elementValue, context, input, scope) {\r\n\t\tvar entry = elementValue.value;\r\n\t\tvar result = {};\r\n\t\tif (Jsonix.Util.Type.isString(entry[this.key.name])) {\r\n\t\t\tresult[entry[this.key.name]] = entry[this.value.name];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\r\n\t\tif (!Jsonix.Util.Type.exists(value)) {\r\n\t\t\t// Do nothing\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\toutput.writeStartElement(this.wrapperElementName);\r\n\t\t}\r\n\r\n\t\tthis.marshalElement(value, context, output, scope);\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\toutput.writeEndElement();\r\n\t\t}\r\n\t},\r\n\tmarshalElement : function(value, context, output, scope) {\r\n\t\tif (!!value) {\r\n\t\t\tfor ( var attributeName in value) {\r\n\t\t\t\tif (value.hasOwnProperty(attributeName)) {\r\n\t\t\t\t\tvar attributeValue = value[attributeName];\r\n\t\t\t\t\tif (!this.collection) {\r\n\t\t\t\t\t\tvar singleEntry = {};\r\n\t\t\t\t\t\tsingleEntry[this.key.name] = attributeName;\r\n\t\t\t\t\t\tsingleEntry[this.value.name] = attributeValue;\r\n\t\t\t\t\t\toutput.writeStartElement(this.elementName);\r\n\t\t\t\t\t\tthis.entryTypeInfo.marshal(singleEntry, context, output, scope);\r\n\t\t\t\t\t\toutput.writeEndElement();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var index = 0; index < attributeValue.length; index++) {\r\n\t\t\t\t\t\t\tvar collectionEntry = {};\r\n\t\t\t\t\t\t\tcollectionEntry[this.key.name] = attributeName;\r\n\t\t\t\t\t\t\tcollectionEntry[this.value.name] = attributeValue[index];\r\n\t\t\t\t\t\t\toutput.writeStartElement(this.elementName);\r\n\t\t\t\t\t\t\tthis.entryTypeInfo.marshal(collectionEntry, context, output, scope);\r\n\t\t\t\t\t\t\toutput.writeEndElement();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\tthis.entryTypeInfo.build(context, module);\r\n\t\t// TODO get property by name\r\n\t\tthis.key = this.entryTypeInfo.properties[0];\r\n\t\tthis.value = this.entryTypeInfo.properties[1];\r\n\t},\r\n\tbuildStructureElements : function(context, structure) {\r\n\t\tstructure.elements[this.elementName.key] = this;\r\n\t},\r\n\tsetProperty : function(object, value) {\r\n\t\tif (Jsonix.Util.Type.exists(value)) {\r\n\t\t\tJsonix.Util.Ensure.ensureObject(value, 'Map property requires an object.');\r\n\t\t\tif (!Jsonix.Util.Type.exists(object[this.name])) {\r\n\t\t\t\tobject[this.name] = {};\r\n\t\t\t}\r\n\t\t\tvar map = object[this.name];\r\n\t\t\tfor ( var attributeName in value) {\r\n\t\t\t\tif (value.hasOwnProperty(attributeName)) {\r\n\t\t\t\t\tvar attributeValue = value[attributeName];\r\n\t\t\t\t\tif (this.collection) {\r\n\t\t\t\t\t\tif (!Jsonix.Util.Type.exists(map[attributeName])) {\r\n\t\t\t\t\t\t\tmap[attributeName] = [];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (var index = 0; index < attributeValue.length; index++) {\r\n\t\t\t\t\t\t\tmap[attributeName].push(attributeValue[index]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmap[attributeName] = attributeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.ElementMapPropertyInfo'\r\n});\r\n\r\nJsonix.Model.AbstractElementRefsPropertyInfo = Jsonix.Class(Jsonix.Binding.Marshalls.Element, Jsonix.Binding.Marshalls.Element.AsElementRef, Jsonix.Binding.Unmarshalls.Element, Jsonix.Binding.Unmarshalls.WrapperElement, Jsonix.Binding.Unmarshalls.Element.AsElementRef, Jsonix.Model.PropertyInfo, {\r\n\twrapperElementName : null,\r\n\tallowDom : true,\r\n\tallowTypedObject : true,\r\n\tmixed : true,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping, 'Mapping must be an object.');\r\n\t\tJsonix.Model.PropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\tvar wen = mapping.wrapperElementName || mapping.wen || undefined;\r\n\t\tif (Jsonix.Util.Type.isObject(wen)) {\r\n\t\t\tthis.wrapperElementName = Jsonix.XML.QName.fromObject(wen);\r\n\t\t} else if (Jsonix.Util.Type.isString(wen)) {\r\n\t\t\tthis.wrapperElementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, wen);\r\n\t\t} else {\r\n\t\t\tthis.wrapperElementName = null;\r\n\t\t}\r\n\t\tvar dom = Jsonix.Util.Type.defaultValue(mapping.allowDom, mapping.dom, true);\r\n\t\tvar typed = Jsonix.Util.Type.defaultValue(mapping.allowTypedObject, mapping.typed, true);\r\n\t\tvar mx = Jsonix.Util.Type.defaultValue(mapping.mixed, mapping.mx, true);\r\n\t\tthis.allowDom = dom;\r\n\t\tthis.allowTypedObject = typed;\r\n\t\tthis.mixed = mx;\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar result = null;\r\n\t\tvar that = this;\r\n\t\tvar callback = function(value) {\r\n\t\t\tif (that.collection) {\r\n\t\t\t\tif (result === null) {\r\n\t\t\t\t\tresult = [];\r\n\t\t\t\t}\r\n\t\t\t\tresult.push(value);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (result === null) {\r\n\t\t\t\t\tresult = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO Report validation error\r\n\t\t\t\t\tthrow new Error(\"Value already set.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar et = input.eventType;\r\n\t\tif (et === Jsonix.XML.Input.START_ELEMENT) {\r\n\t\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\t\tthis.unmarshalWrapperElement(context, input, scope, callback);\r\n\t\t\t} else {\r\n\t\t\t\tthis.unmarshalElement(context, input, scope, callback);\r\n\t\t\t}\r\n\t\t} else if (this.mixed && (et === Jsonix.XML.Input.CHARACTERS || et === Jsonix.XML.Input.CDATA || et === Jsonix.XML.Input.ENTITY_REFERENCE)) {\r\n\t\t\tcallback(input.getText());\r\n\t\t} else if (et === Jsonix.XML.Input.SPACE || et === Jsonix.XML.Input.COMMENT || et === Jsonix.XML.Input.PROCESSING_INSTRUCTION) {\r\n\t\t\t// Skip whitespace\r\n\t\t} else {\r\n\t\t\t// TODO better exception\r\n\t\t\tthrow new Error(\"Illegal state: unexpected event type [\" + et + \"].\");\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\r\n\t\tif (Jsonix.Util.Type.exists(value)) {\r\n\t\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\t\toutput.writeStartElement(this.wrapperElementName);\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.collection) {\r\n\t\t\t\tthis.marshalItem(value, context, output, scope);\r\n\t\t\t} else {\r\n\t\t\t\tJsonix.Util.Ensure.ensureArray(value, 'Collection property requires an array value.');\r\n\t\t\t\tfor (var index = 0; index < value.length; index++) {\r\n\t\t\t\t\tvar item = value[index];\r\n\t\t\t\t\tthis.marshalItem(item, context, output, scope);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\t\toutput.writeEndElement();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\tmarshalItem : function(value, context, output, scope) {\r\n\t\tif (Jsonix.Util.Type.isString(value)) {\r\n\t\t\tif (!this.mixed) {\r\n\t\t\t\t// TODO\r\n\t\t\t\tthrow new Error(\"Property is not mixed, can't handle string values.\");\r\n\t\t\t} else {\r\n\t\t\t\toutput.writeCharacters(value);\r\n\t\t\t}\r\n\t\t} else if (this.allowDom && Jsonix.Util.Type.exists(value.nodeType)) {\r\n\t\t\t// DOM node\r\n\t\t\toutput.writeNode(value);\r\n\t\t} else if (Jsonix.Util.Type.isObject(value)) {\r\n\t\t\tthis.marshalElement(value, context, output, scope);\r\n\r\n\t\t} else {\r\n\t\t\tif (this.mixed) {\r\n\t\t\t\tthrow new Error(\"Unsupported content type, either objects or strings are supported.\");\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Unsupported content type, only objects are supported.\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\tgetTypeInfoByElementName : function(elementName, context, scope) {\r\n\t\tvar propertyElementTypeInfo = this.getPropertyElementTypeInfo(elementName, context);\r\n\t\tif (Jsonix.Util.Type.exists(propertyElementTypeInfo)) {\r\n\t\t\treturn propertyElementTypeInfo.typeInfo;\r\n\t\t} else {\r\n\t\t\tvar contextElementTypeInfo = context.getElementInfo(elementName, scope);\r\n\t\t\tif (Jsonix.Util.Type.exists(contextElementTypeInfo)) {\r\n\t\t\t\treturn contextElementTypeInfo.typeInfo;\r\n\t\t\t} else {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetPropertyElementTypeInfo : function(elementName, context) {\r\n\t\tthrow new Error(\"Abstract method [getPropertyElementTypeInfo].\");\r\n\t},\r\n\tbuildStructure : function(context, structure) {\r\n\t\tJsonix.Util.Ensure.ensureObject(structure);\r\n\t\tif (Jsonix.Util.Type.exists(structure.value)) {\r\n\t\t\t// TODO better exception\r\n\t\t\tthrow new Error(\"The structure already defines a value property.\");\r\n\t\t} else if (!Jsonix.Util.Type.exists(structure.elements)) {\r\n\t\t\tstructure.elements = {};\r\n\t\t}\r\n\r\n\t\tif (Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\tstructure.elements[this.wrapperElementName.key] = this;\r\n\t\t} else {\r\n\t\t\tthis.buildStructureElements(context, structure);\r\n\t\t}\r\n\r\n\t\t// if (Jsonix.Util.Type.exists(structure.elements[key]))\r\n\t\t// {\r\n\t\t// // TODO better exception\r\n\t\t// throw new Error(\"The structure already defines an element for\r\n\t\t// the key [\"\r\n\t\t// + key + \"].\");\r\n\t\t// } else\r\n\t\t// {\r\n\t\t// structure.elements[key] = this;\r\n\t\t// }\r\n\r\n\t\tif ((this.allowDom || this.allowTypedObject)) {\r\n\t\t\tstructure.any = this;\r\n\t\t}\r\n\t\tif (this.mixed && !Jsonix.Util.Type.exists(this.wrapperElementName)) {\r\n\t\t\t// if (Jsonix.Util.Type.exists(structure.mixed)) {\r\n\t\t\t// // TODO better exception\r\n\t\t\t// throw new Error(\"The structure already defines the mixed\r\n\t\t\t// property.\");\r\n\t\t\t// } else\r\n\t\t\t// {\r\n\t\t\tstructure.mixed = this;\r\n\t\t\t// }\r\n\t\t}\r\n\t},\r\n\tbuildStructureElements : function(context, structure) {\r\n\t\tthrow new Error(\"Abstract method [buildStructureElements].\");\r\n\t},\r\n\tbuildStructureElementTypeInfos : function(context, structure, elementTypeInfo) {\r\n\t\tstructure.elements[elementTypeInfo.elementName.key] = this;\r\n\t\tvar substitutionMembers = context.getSubstitutionMembers(elementTypeInfo.elementName);\r\n\t\tif (Jsonix.Util.Type.isArray(substitutionMembers)) {\r\n\t\t\tfor (var jndex = 0; jndex < substitutionMembers.length; jndex++) {\r\n\t\t\t\tvar substitutionElementInfo = substitutionMembers[jndex];\r\n\t\t\t\tthis.buildStructureElementTypeInfos(context, structure, substitutionElementInfo);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.AbstractElementRefsPropertyInfo'\r\n});\r\nJsonix.Model.ElementRefPropertyInfo = Jsonix.Class(Jsonix.Model.AbstractElementRefsPropertyInfo, {\r\n\ttypeInfo : 'String',\r\n\telementName : null,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\t// TODO Ensure correct argument\r\n\t\tvar ti = mapping.typeInfo || mapping.ti || 'String';\r\n\t\tif (Jsonix.Util.Type.isObject(ti)) {\r\n\t\t\tthis.typeInfo = ti;\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureString(ti);\r\n\t\t\tthis.typeInfo = ti;\r\n\t\t}\r\n\t\tvar en = mapping.elementName || mapping.en || undefined;\r\n\t\tif (Jsonix.Util.Type.isObject(en)) {\r\n\t\t\tthis.elementName = Jsonix.XML.QName.fromObject(en);\r\n\t\t} else if (Jsonix.Util.Type.isString(en)) {\r\n\t\t\tthis.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, en);\r\n\t\t} else {\r\n\t\t\tthis.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, this.name);\r\n\t\t}\r\n\t},\r\n\tgetPropertyElementTypeInfo : function(elementName, context) {\r\n\t\tvar name = Jsonix.XML.QName.fromObjectOrString(elementName, context);\r\n\r\n\t\tif (name.key === this.elementName.key) {\r\n\t\t\treturn this;\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\tthis.typeInfo = context.resolveTypeInfo(this.typeInfo, module);\r\n\t},\r\n\tbuildStructureElements : function(context, structure) {\r\n\t\tthis.buildStructureElementTypeInfos(context, structure, this);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.ElementRefPropertyInfo'\r\n});\r\nJsonix.Model.ElementRefPropertyInfo.Simplified = Jsonix.Class(Jsonix.Model.ElementRefPropertyInfo, Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef, {\r\n\tCLASS_NAME : 'Jsonix.Model.ElementRefPropertyInfo.Simplified'\r\n});\r\nJsonix.Model.ElementRefsPropertyInfo = Jsonix.Class(Jsonix.Model.AbstractElementRefsPropertyInfo, {\r\n\telementTypeInfos : null,\r\n\telementTypeInfosMap : null,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\t// TODO Ensure correct arguments\r\n\t\tvar etis = mapping.elementTypeInfos || mapping.etis || [];\r\n\t\tJsonix.Util.Ensure.ensureArray(etis);\r\n\t\tthis.elementTypeInfos = [];\r\n\t\tfor (var index = 0; index < etis.length; index++)\r\n\t\t{\r\n\t\t\tthis.elementTypeInfos[index] = Jsonix.Util.Type.cloneObject(etis[index]);\r\n\t\t}\r\n\t},\r\n\tgetPropertyElementTypeInfo : function(elementName, context) {\r\n\t\tvar name = Jsonix.XML.QName.fromObjectOrString(elementName, context);\r\n\r\n\t\tvar typeInfo = this.elementTypeInfosMap[name.key];\r\n\t\tif (Jsonix.Util.Type.exists(typeInfo)) {\r\n\t\t\treturn {\r\n\t\t\t\telementName : name,\r\n\t\t\t\ttypeInfo : typeInfo\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\tthis.elementTypeInfosMap = {};\r\n\t\tvar etiti, etien;\r\n\t\tfor (var index = 0; index < this.elementTypeInfos.length; index++) {\r\n\t\t\tvar elementTypeInfo = this.elementTypeInfos[index];\r\n\t\t\tJsonix.Util.Ensure.ensureObject(elementTypeInfo);\r\n\t\t\tetiti = elementTypeInfo.typeInfo || elementTypeInfo.ti || 'String';\r\n\t\t\telementTypeInfo.typeInfo = context.resolveTypeInfo(etiti, module);\r\n\t\t\tetien = elementTypeInfo.elementName || elementTypeInfo.en || undefined;\r\n\t\t\telementTypeInfo.elementName = Jsonix.XML.QName.fromObjectOrString(etien, context, this.defaultElementNamespaceURI);\r\n\t\t\tthis.elementTypeInfosMap[elementTypeInfo.elementName.key] = elementTypeInfo.typeInfo;\r\n\t\t}\r\n\t},\r\n\tbuildStructureElements : function(context, structure) {\r\n\t\tfor (var index = 0; index < this.elementTypeInfos.length; index++) {\r\n\t\t\tvar elementTypeInfo = this.elementTypeInfos[index];\r\n\t\t\tthis.buildStructureElementTypeInfos(context, structure, elementTypeInfo);\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.ElementRefsPropertyInfo'\r\n});\r\nJsonix.Model.ElementRefsPropertyInfo.Simplified = Jsonix.Class(Jsonix.Model.ElementRefsPropertyInfo, Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef, {\r\n\tCLASS_NAME : 'Jsonix.Model.ElementRefsPropertyInfo.Simplified'\r\n});\r\n\r\nJsonix.Model.AnyElementPropertyInfo = Jsonix.Class(Jsonix.Binding.Marshalls.Element, Jsonix.Binding.Marshalls.Element.AsElementRef, Jsonix.Binding.Unmarshalls.Element, Jsonix.Binding.Unmarshalls.Element.AsElementRef, Jsonix.Model.PropertyInfo, {\r\n\tallowDom : true,\r\n\tallowTypedObject : true,\r\n\tmixed : true,\r\n\tinitialize : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tJsonix.Model.PropertyInfo.prototype.initialize.apply(this, [ mapping ]);\r\n\t\tvar dom = Jsonix.Util.Type.defaultValue(mapping.allowDom, mapping.dom, true);\r\n\t\tvar typed = Jsonix.Util.Type.defaultValue(mapping.allowTypedObject, mapping.typed, true);\r\n\t\tvar mx = Jsonix.Util.Type.defaultValue(mapping.mixed, mapping.mx, true);\r\n\t\tthis.allowDom = dom;\r\n\t\tthis.allowTypedObject = typed;\r\n\t\tthis.mixed = mx;\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar result = null;\r\n\t\tvar that = this;\r\n\t\tvar callback = function(value) {\r\n\t\t\tif (that.collection) {\r\n\t\t\t\tif (result === null) {\r\n\t\t\t\t\tresult = [];\r\n\t\t\t\t}\r\n\t\t\t\tresult.push(value);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tif (result === null) {\r\n\t\t\t\t\tresult = value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO Report validation error\r\n\t\t\t\t\tthrow new Error(\"Value already set.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar et = input.eventType;\r\n\t\tif (et === Jsonix.XML.Input.START_ELEMENT) {\r\n\t\t\tthis.unmarshalElement(context, input, scope, callback);\r\n\t\t} else if (this.mixed && (et === Jsonix.XML.Input.CHARACTERS || et === Jsonix.XML.Input.CDATA || et === Jsonix.XML.Input.ENTITY_REFERENCE)) {\r\n\t\t\tcallback(input.getText());\r\n\t\t} else if (this.mixed && (et === Jsonix.XML.Input.SPACE)) {\r\n\t\t\t// Whitespace\r\n\t\t\t// return null;\r\n\t\t} else if (et === Jsonix.XML.Input.COMMENT || et === Jsonix.XML.Input.PROCESSING_INSTRUCTION) {\r\n\t\t\t// return null;\r\n\t\t} else {\r\n\t\t\t// TODO better exception\r\n\t\t\tthrow new Error(\"Illegal state: unexpected event type [\" + et + \"].\");\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\t\tif (!Jsonix.Util.Type.exists(value)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.collection) {\r\n\t\t\tthis.marshalItem(value, context, output, scope);\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureArray(value);\r\n\t\t\tfor (var index = 0; index < value.length; index++) {\r\n\t\t\t\tthis.marshalItem(value[index], context, output, scope);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmarshalItem : function(value, context, output, scope) {\r\n\t\tif (this.mixed && Jsonix.Util.Type.isString(value)) {\r\n\t\t\t// Mixed\r\n\t\t\toutput.writeCharacters(value);\r\n\t\t} else if (this.allowDom && Jsonix.Util.Type.exists(value.nodeType)) {\r\n\t\t\t// DOM node\r\n\t\t\toutput.writeNode(value);\r\n\r\n\t\t} else {\r\n\t\t\tif (this.allowTypedObject) {\r\n\t\t\t\tthis.marshalElement(value, context, output, scope);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdoBuild : function(context, module) {\r\n\t\t// Nothing to do\r\n\t},\r\n\tbuildStructure : function(context, structure) {\r\n\t\tJsonix.Util.Ensure.ensureObject(structure);\r\n\t\tif (Jsonix.Util.Type.exists(structure.value)) {\r\n\t\t\t// TODO better exception\r\n\t\t\tthrow new Error(\"The structure already defines a value property.\");\r\n\t\t} else if (!Jsonix.Util.Type.exists(structure.elements)) {\r\n\t\t\tstructure.elements = {};\r\n\t\t}\r\n\r\n\t\tif ((this.allowDom || this.allowTypedObject)) {\r\n\t\t\t// if (Jsonix.Util.Type.exists(structure.any)) {\r\n\t\t\t// // TODO better exception\r\n\t\t\t// throw new Error(\"The structure already defines the any\r\n\t\t\t// property.\");\r\n\t\t\t// } else\r\n\t\t\t// {\r\n\t\t\tstructure.any = this;\r\n\t\t\t// }\r\n\t\t}\r\n\t\tif (this.mixed) {\r\n\t\t\t// if (Jsonix.Util.Type.exists(structure.mixed)) {\r\n\t\t\t// // TODO better exception\r\n\t\t\t// throw new Error(\"The structure already defines the mixed\r\n\t\t\t// property.\");\r\n\t\t\t// } else\r\n\t\t\t// {\r\n\t\t\tstructure.mixed = this;\r\n\t\t\t// }\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.AnyElementPropertyInfo'\r\n});\r\nJsonix.Model.AnyElementPropertyInfo.Simplified = Jsonix.Class(Jsonix.Model.AnyElementPropertyInfo, Jsonix.Binding.Unmarshalls.Element.AsSimplifiedElementRef, {\r\n\tCLASS_NAME : 'Jsonix.Model.AnyElementPropertyInfo.Simplified'\r\n});\r\nJsonix.Model.Module = Jsonix.Class(Jsonix.Mapping.Styled, {\r\n\tname : null,\r\n\ttypeInfos : null,\r\n\telementInfos : null,\r\n\ttargetNamespace : '',\r\n\tdefaultElementNamespaceURI : '',\r\n\tdefaultAttributeNamespaceURI : '',\r\n\tinitialize : function(mapping, options) {\r\n\t\tJsonix.Mapping.Styled.prototype.initialize.apply(this, [ options ]);\r\n\t\tthis.typeInfos = [];\r\n\t\tthis.elementInfos = [];\r\n\t\tif (typeof mapping !== 'undefined') {\r\n\t\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\t\tvar n = mapping.name || mapping.n || null;\r\n\t\t\tthis.name = n;\r\n\t\t\tvar dens = mapping.defaultElementNamespaceURI || mapping.dens || mapping.targetNamespace || mapping.tns || '';\r\n\t\t\tthis.defaultElementNamespaceURI = dens;\r\n\t\t\tvar tns = mapping.targetNamespace || mapping.tns || mapping.defaultElementNamespaceURI || mapping.dens || this.defaultElementNamespaceURI;\r\n\t\t\tthis.targetNamespace = tns;\r\n\t\t\tvar dans = mapping.defaultAttributeNamespaceURI || mapping.dans || '';\r\n\t\t\tthis.defaultAttributeNamespaceURI = dans;\r\n\t\t\t// Initialize type infos\r\n\t\t\tvar tis = mapping.typeInfos || mapping.tis || [];\r\n\t\t\tthis.initializeTypeInfos(tis);\r\n\r\n\t\t\t// Backwards compatibility: class infos can also be defined\r\n\t\t\t// as properties of the schema, for instance Schema.MyType\r\n\t\t\tfor ( var typeInfoName in mapping) {\r\n\t\t\t\tif (mapping.hasOwnProperty(typeInfoName)) {\r\n\t\t\t\t\tif (mapping[typeInfoName] instanceof this.mappingStyle.classInfo) {\r\n\t\t\t\t\t\tthis.typeInfos.push(mapping[typeInfoName]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar eis = mapping.elementInfos || mapping.eis || [];\r\n\t\t\t// Initialize element infos\r\n\t\t\tthis.initializeElementInfos(eis);\r\n\t\t}\r\n\t},\r\n\tinitializeTypeInfos : function(typeInfoMappings) {\r\n\t\tJsonix.Util.Ensure.ensureArray(typeInfoMappings);\r\n\t\tvar index, typeInfoMapping, typeInfo;\r\n\t\tfor (index = 0; index < typeInfoMappings.length; index++) {\r\n\t\t\ttypeInfoMapping = typeInfoMappings[index];\r\n\t\t\ttypeInfo = this.createTypeInfo(typeInfoMapping);\r\n\t\t\tthis.typeInfos.push(typeInfo);\r\n\t\t}\r\n\t},\r\n\tinitializeElementInfos : function(elementInfoMappings) {\r\n\t\tJsonix.Util.Ensure.ensureArray(elementInfoMappings);\r\n\t\tvar index, elementInfoMapping, elementInfo;\r\n\t\tfor (index = 0; index < elementInfoMappings.length; index++) {\r\n\t\t\telementInfoMapping = elementInfoMappings[index];\r\n\t\t\telementInfo = this.createElementInfo(elementInfoMapping);\r\n\t\t\tthis.elementInfos.push(elementInfo);\r\n\t\t}\r\n\t},\r\n\tcreateTypeInfo : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tvar typeInfo;\r\n\t\t// If mapping is already a type info, do nothing\r\n\t\tif (mapping instanceof Jsonix.Model.TypeInfo) {\r\n\t\t\ttypeInfo = mapping;\r\n\t\t}\r\n\t\t// Else create it via generic mapping configuration\r\n\t\telse {\r\n\t\t\tmapping = Jsonix.Util.Type.cloneObject(mapping);\r\n\t\t\tvar type = mapping.type || mapping.t || 'classInfo';\r\n\t\t\t// Locate the creator function\r\n\t\t\tif (Jsonix.Util.Type.isFunction(this.typeInfoCreators[type])) {\r\n\t\t\t\tvar typeInfoCreator = this.typeInfoCreators[type];\r\n\t\t\t\t// Call the creator function\r\n\t\t\t\ttypeInfo = typeInfoCreator.call(this, mapping);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Unknown type info type [\" + type + \"].\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn typeInfo;\r\n\t},\r\n\tinitializeNames : function(mapping) {\r\n\t\tvar ln = mapping.localName || mapping.ln || null;\r\n\t\tmapping.localName = ln;\r\n\t\tvar n = mapping.name || mapping.n || null;\r\n\t\tmapping.name = n;\r\n\t\t// Calculate both name as well as localName\r\n\t\t// name is provided\r\n\t\tif (Jsonix.Util.Type.isString(mapping.name)) {\r\n\t\t\t// Obsolete code below\r\n\t\t\t// // localName is not provided\r\n\t\t\t// if (!Jsonix.Util.Type.isString(mapping.localName)) {\r\n\t\t\t// // But module name is provided\r\n\t\t\t// if (Jsonix.Util.Type.isString(this.name)) {\r\n\t\t\t// // If name starts with module name, use second part\r\n\t\t\t// // as local name\r\n\t\t\t// if (mapping.name.indexOf(this.name + '.') === 0) {\r\n\t\t\t// mapping.localName = mapping.name\r\n\t\t\t// .substring(this.name.length + 1);\r\n\t\t\t// }\r\n\t\t\t// // Else use name as local name\r\n\t\t\t// else {\r\n\t\t\t// mapping.localName = mapping.name;\r\n\t\t\t// }\r\n\t\t\t// }\r\n\t\t\t// // Module name is not provided, use name as local name\r\n\t\t\t// else {\r\n\t\t\t// mapping.localName = mapping.name;\r\n\t\t\t// }\r\n\t\t\t// }\r\n\t\t\tif (mapping.name.length > 0 && mapping.name.charAt(0) === '.' && Jsonix.Util.Type.isString(this.name)) {\r\n\t\t\t\tmapping.name = this.name + mapping.name;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// name is not provided but local name is provided\r\n\t\telse if (Jsonix.Util.Type.isString(ln)) {\r\n\t\t\t// Module name is provided\r\n\t\t\tif (Jsonix.Util.Type.isString(this.name)) {\r\n\t\t\t\tmapping.name = this.name + '.' + ln;\r\n\t\t\t}\r\n\t\t\t// Module name is not provided\r\n\t\t\telse {\r\n\t\t\t\tmapping.name = ln;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Neither [name/n] nor [localName/ln] was provided for the class info.\");\r\n\t\t}\r\n\t},\r\n\tcreateClassInfo : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tvar dens = mapping.defaultElementNamespaceURI || mapping.dens || this.defaultElementNamespaceURI;\r\n\t\tmapping.defaultElementNamespaceURI = dens;\r\n\t\tvar tns = mapping.targetNamespace || mapping.tns || this.targetNamespace;\r\n\t\tmapping.targetNamespace = tns;\r\n\t\tvar dans = mapping.defaultAttributeNamespaceURI || mapping.dans || this.defaultAttributeNamespaceURI;\r\n\t\tmapping.defaultAttributeNamespaceURI = dans;\r\n\t\tthis.initializeNames(mapping);\r\n\t\t// Now both name an local name are initialized\r\n\t\tvar classInfo = new this.mappingStyle.classInfo(mapping, {\r\n\t\t\tmappingStyle : this.mappingStyle\r\n\t\t});\r\n\t\tclassInfo.module = this;\r\n\t\treturn classInfo;\r\n\t},\r\n\tcreateEnumLeafInfo : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tthis.initializeNames(mapping);\r\n\t\t// Now both name an local name are initialized\r\n\t\tvar enumLeafInfo = new this.mappingStyle.enumLeafInfo(mapping, {\r\n\t\t\tmappingStyle : this.mappingStyle\r\n\t\t});\r\n\t\tenumLeafInfo.module = this;\r\n\t\treturn enumLeafInfo;\r\n\t},\r\n\tcreateList : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tvar ti = mapping.baseTypeInfo || mapping.typeInfo || mapping.bti || mapping.ti || 'String';\r\n\t\tvar tn = mapping.typeName || mapping.tn || null;\r\n\r\n\t\tif (Jsonix.Util.Type.exists(tn)) {\r\n\t\t\tif (Jsonix.Util.Type.isString(tn)) {\r\n\t\t\t\ttn = new Jsonix.XML.QName(this.targetNamespace, tn);\r\n\t\t\t} else {\r\n\t\t\t\ttn = Jsonix.XML.QName.fromObject(tn);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar s = mapping.separator || mapping.sep || ' ';\r\n\t\tJsonix.Util.Ensure.ensureExists(ti);\r\n\t\tvar listTypeInfo = new Jsonix.Schema.XSD.List(ti, tn, s);\r\n\t\tlistTypeInfo.module = this;\r\n\t\treturn listTypeInfo;\r\n\t},\r\n\tcreateElementInfo : function(mapping) {\r\n\t\tJsonix.Util.Ensure.ensureObject(mapping);\r\n\t\tmapping = Jsonix.Util.Type.cloneObject(mapping);\r\n\r\n\t\tvar dens = mapping.defaultElementNamespaceURI || mapping.dens || this.defaultElementNamespaceURI;\r\n\t\tmapping.defaultElementNamespaceURI = dens;\r\n\t\tvar en = mapping.elementName || mapping.en || undefined;\r\n\t\tJsonix.Util.Ensure.ensureExists(en);\r\n\r\n\t\tvar ti = mapping.typeInfo || mapping.ti || 'String';\r\n\t\tJsonix.Util.Ensure.ensureExists(ti);\r\n\r\n\t\tmapping.typeInfo = ti;\r\n\t\tif (Jsonix.Util.Type.isObject(en)) {\r\n\t\t\tmapping.elementName = Jsonix.XML.QName.fromObject(en);\r\n\t\t} else if (Jsonix.Util.Type.isString(en)) {\r\n\t\t\tmapping.elementName = new Jsonix.XML.QName(this.defaultElementNamespaceURI, en);\r\n\t\t} else {\r\n\t\t\tthrow new Error('Element info [' + mapping + '] must provide an element name.');\r\n\t\t}\r\n\r\n\t\tvar sh = mapping.substitutionHead || mapping.sh || null;\r\n\t\tif (Jsonix.Util.Type.exists(sh)) {\r\n\t\t\tif (Jsonix.Util.Type.isObject(sh)) {\r\n\t\t\t\tmapping.substitutionHead = Jsonix.XML.QName.fromObject(sh);\r\n\t\t\t} else {\r\n\t\t\t\tJsonix.Util.Ensure.ensureString(sh);\r\n\t\t\t\tmapping.substitutionHead = new Jsonix.XML.QName(this.defaultElementNamespaceURI, sh);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar elementInfo = new this.mappingStyle.elementInfo(mapping, {\r\n\t\t\tmappingStyle : this.mappingStyle\r\n\t\t});\r\n\t\telementInfo.module = this;\r\n\t\treturn elementInfo;\r\n\t},\r\n\tregisterTypeInfos : function(context) {\r\n\t\tfor (var index = 0; index < this.typeInfos.length; index++) {\r\n\t\t\tvar typeInfo = this.typeInfos[index];\r\n\t\t\tcontext.registerTypeInfo(typeInfo, this);\r\n\t\t}\r\n\t},\r\n\tbuildTypeInfos : function(context) {\r\n\t\tfor (var index = 0; index < this.typeInfos.length; index++) {\r\n\t\t\tvar typeInfo = this.typeInfos[index];\r\n\t\t\ttypeInfo.build(context, this);\r\n\t\t}\r\n\t},\r\n\tregisterElementInfos : function(context) {\r\n\t\tfor (var index = 0; index < this.elementInfos.length; index++) {\r\n\t\t\tvar elementInfo = this.elementInfos[index];\r\n\t\t\tcontext.registerElementInfo(elementInfo, this);\r\n\t\t}\r\n\t},\r\n\tbuildElementInfos : function(context) {\r\n\t\tfor (var index = 0; index < this.elementInfos.length; index++) {\r\n\t\t\tvar elementInfo = this.elementInfos[index];\r\n\t\t\telementInfo.build(context, this);\r\n\t\t}\r\n\t},\r\n\t// Obsolete, retained for backwards compatibility\r\n\tcs : function() {\r\n\t\treturn this;\r\n\t},\r\n\t// Obsolete, retained for backwards compatibility\r\n\tes : function() {\r\n\t\treturn this;\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Model.Module'\r\n});\r\nJsonix.Model.Module.prototype.typeInfoCreators = {\r\n\t\"classInfo\" : Jsonix.Model.Module.prototype.createClassInfo,\r\n\t\"c\" : Jsonix.Model.Module.prototype.createClassInfo,\r\n\t\"enumInfo\" : Jsonix.Model.Module.prototype.createEnumLeafInfo,\r\n\t\"enum\" : Jsonix.Model.Module.prototype.createEnumLeafInfo,\r\n\t\"list\" : Jsonix.Model.Module.prototype.createList,\r\n\t\"l\" : Jsonix.Model.Module.prototype.createList\r\n};\r\nJsonix.Mapping.Style.Standard = Jsonix.Class(Jsonix.Mapping.Style, {\r\n\tmarshaller : Jsonix.Binding.Marshaller,\r\n\tunmarshaller : Jsonix.Binding.Unmarshaller,\r\n\tmodule : Jsonix.Model.Module,\r\n\telementInfo : Jsonix.Model.ElementInfo,\r\n\tclassInfo : Jsonix.Model.ClassInfo,\r\n\tenumLeafInfo : Jsonix.Model.EnumLeafInfo,\r\n\tanyAttributePropertyInfo : Jsonix.Model.AnyAttributePropertyInfo,\r\n\tanyElementPropertyInfo : Jsonix.Model.AnyElementPropertyInfo,\r\n\tattributePropertyInfo : Jsonix.Model.AttributePropertyInfo,\r\n\telementMapPropertyInfo : Jsonix.Model.ElementMapPropertyInfo,\r\n\telementPropertyInfo : Jsonix.Model.ElementPropertyInfo,\r\n\telementsPropertyInfo : Jsonix.Model.ElementsPropertyInfo,\r\n\telementRefPropertyInfo : Jsonix.Model.ElementRefPropertyInfo,\r\n\telementRefsPropertyInfo : Jsonix.Model.ElementRefsPropertyInfo,\r\n\tvaluePropertyInfo : Jsonix.Model.ValuePropertyInfo,\r\n\tinitialize : function() {\r\n\t\tJsonix.Mapping.Style.prototype.initialize.apply(this);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Mapping.Style.Standard'\r\n});\r\nJsonix.Mapping.Style.STYLES.standard = new Jsonix.Mapping.Style.Standard();\r\n\r\nJsonix.Mapping.Style.Simplified = Jsonix.Class(Jsonix.Mapping.Style, {\r\n\tmarshaller : Jsonix.Binding.Marshaller.Simplified,\r\n\tunmarshaller : Jsonix.Binding.Unmarshaller.Simplified,\r\n\tmodule : Jsonix.Model.Module,\r\n\telementInfo : Jsonix.Model.ElementInfo,\r\n\tclassInfo : Jsonix.Model.ClassInfo,\r\n\tenumLeafInfo : Jsonix.Model.EnumLeafInfo,\r\n\tanyAttributePropertyInfo : Jsonix.Model.AnyAttributePropertyInfo.Simplified,\r\n\tanyElementPropertyInfo : Jsonix.Model.AnyElementPropertyInfo.Simplified,\r\n\tattributePropertyInfo : Jsonix.Model.AttributePropertyInfo,\r\n\telementMapPropertyInfo : Jsonix.Model.ElementMapPropertyInfo,\r\n\telementPropertyInfo : Jsonix.Model.ElementPropertyInfo,\r\n\telementsPropertyInfo : Jsonix.Model.ElementsPropertyInfo,\r\n\telementRefPropertyInfo : Jsonix.Model.ElementRefPropertyInfo.Simplified,\r\n\telementRefsPropertyInfo : Jsonix.Model.ElementRefsPropertyInfo.Simplified,\r\n\tvaluePropertyInfo : Jsonix.Model.ValuePropertyInfo,\r\n\tinitialize : function() {\r\n\t\tJsonix.Mapping.Style.prototype.initialize.apply(this);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Mapping.Style.Simplified'\r\n});\r\nJsonix.Mapping.Style.STYLES.simplified = new Jsonix.Mapping.Style.Simplified();\r\n\r\nJsonix.Schema.XSD = {};\r\nJsonix.Schema.XSD.NAMESPACE_URI = 'http://www.w3.org/2001/XMLSchema';\r\nJsonix.Schema.XSD.PREFIX = 'xsd';\r\nJsonix.Schema.XSD.qname = function(localPart) {\r\n\tJsonix.Util.Ensure.ensureString(localPart);\r\n\treturn new Jsonix.XML.QName(Jsonix.Schema.XSD.NAMESPACE_URI, localPart,\r\n\t\t\tJsonix.Schema.XSD.PREFIX);\r\n};\r\n\r\nJsonix.Schema.XSD.AnyType = Jsonix.Class(Jsonix.Model.ClassInfo, {\r\n\ttypeName : Jsonix.Schema.XSD.qname('anyType'),\r\n\tinitialize : function() {\r\n\t\tJsonix.Model.ClassInfo.prototype.initialize.call(this, {\r\n\t\t\tname : 'AnyType',\r\n\t\t\tpropertyInfos : [ {\r\n\t\t\t\ttype : 'anyAttribute',\r\n\t\t\t\tname : 'attributes'\r\n\t\t\t}, {\r\n\t\t\t\ttype : 'anyElement',\r\n\t\t\t\tname : 'content',\r\n\t\t\t\tcollection : true\r\n\t\t\t} ]\r\n\t\t});\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.AnyType'\r\n});\r\nJsonix.Schema.XSD.AnyType.INSTANCE = new Jsonix.Schema.XSD.AnyType();\r\nJsonix.Schema.XSD.AnySimpleType = Jsonix.Class(Jsonix.Model.TypeInfo, {\r\n\tname : 'AnySimpleType',\r\n\ttypeName : Jsonix.Schema.XSD.qname('anySimpleType'),\r\n\tinitialize : function() {\r\n\t\tJsonix.Model.TypeInfo.prototype.initialize.apply(this, []);\r\n\t},\t\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn value;\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\treturn text;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn true;\r\n\t},\r\n\treprint : function(value, context, output, scope) {\r\n\t\t// Only reprint when the value is a string but not an instance\r\n\t\tif (Jsonix.Util.Type.isString(value) && !this.isInstance(value, context, scope)) {\r\n\t\t\t// Using null as input as input is not available\r\n\t\t\treturn this.print(this.parse(value, context, null, scope), context, output, scope);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn this.print(value, context, output, scope);\r\n\t\t}\r\n\t},\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar text = input.getElementText();\r\n\t\tif (Jsonix.Util.StringUtils.isNotBlank(text)) {\r\n\t\t\treturn this.parse(text, context, input, scope);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tmarshal : function(value, context, output, scope) {\r\n\t\tif (Jsonix.Util.Type.exists(value)) {\r\n\t\t\toutput.writeCharacters(this.reprint(value, context, output, scope));\r\n\t\t}\r\n\t},\r\n\tbuild: function(context, module)\r\n\t{\r\n\t\t// Nothing to do\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.AnySimpleType'\r\n});\r\nJsonix.Schema.XSD.AnySimpleType.INSTANCE = new Jsonix.Schema.XSD.AnySimpleType();\r\nJsonix.Schema.XSD.List = Jsonix\r\n\t\t.Class(\r\n\t\t\t\tJsonix.Schema.XSD.AnySimpleType,\r\n\t\t\t\t{\r\n\t\t\t\t\tname : null,\r\n\t\t\t\t\ttypeName : null,\r\n\t\t\t\t\ttypeInfo : null,\r\n\t\t\t\t\tseparator : ' ',\r\n\t\t\t\t\ttrimmedSeparator : Jsonix.Util.StringUtils.whitespaceCharacters,\r\n\t\t\t\t\tsimpleType : true,\r\n\t\t\t\t\tbuilt : false,\r\n\t\t\t\t\tinitialize : function(typeInfo, typeName, separator) {\r\n\t\t\t\t\t\tJsonix.Util.Ensure.ensureExists(typeInfo);\r\n\t\t\t\t\t\t// TODO Ensure correct argument\r\n\t\t\t\t\t\tthis.typeInfo = typeInfo;\r\n\t\t\t\t\t\tif (!Jsonix.Util.Type.exists(this.name)) {\r\n\t\t\t\t\t\t\tthis.name = typeInfo.name + \"*\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (Jsonix.Util.Type.exists(typeName)) {\r\n\t\t\t\t\t\t\t// TODO Ensure correct argument\r\n\t\t\t\t\t\t\tthis.typeName = typeName;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (Jsonix.Util.Type.isString(separator)) {\r\n\t\t\t\t\t\t\t// TODO Ensure correct argument\r\n\t\t\t\t\t\t\tthis.separator = separator;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.separator = ' ';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar trimmedSeparator = Jsonix.Util.StringUtils\r\n\t\t\t\t\t\t\t\t.trim(this.separator);\r\n\t\t\t\t\t\tif (trimmedSeparator.length === 0) {\r\n\t\t\t\t\t\t\tthis.trimmedSeparator = Jsonix.Util.StringUtils.whitespaceCharacters;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.trimmedSeparator = trimmedSeparator;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbuild : function(context) {\r\n\t\t\t\t\t\tif (!this.built) {\r\n\t\t\t\t\t\t\tthis.typeInfo = context.resolveTypeInfo(this.typeInfo, this.module);\r\n\t\t\t\t\t\t\tthis.built = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tprint : function(value, context, output, scope) {\r\n\t\t\t\t\t\tif (!Jsonix.Util.Type.exists(value)) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// TODO Exception if not an array\r\n\t\t\t\t\t\tJsonix.Util.Ensure.ensureArray(value);\r\n\t\t\t\t\t\tvar result = '';\r\n\t\t\t\t\t\tfor ( var index = 0; index < value.length; index++) {\r\n\t\t\t\t\t\t\tif (index > 0) {\r\n\t\t\t\t\t\t\t\tresult = result + this.separator;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult = result + this.typeInfo.reprint(value[index], context, output, scope);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tparse : function(text, context, input, scope) {\r\n\t\t\t\t\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\t\t\t\t\tvar items = Jsonix.Util.StringUtils\r\n\t\t\t\t\t\t\t\t.splitBySeparatorChars(text,\r\n\t\t\t\t\t\t\t\t\t\tthis.trimmedSeparator);\r\n\t\t\t\t\t\tvar result = [];\r\n\t\t\t\t\t\tfor ( var index = 0; index < items.length; index++) {\r\n\t\t\t\t\t\t\tresult.push(this.typeInfo\r\n\t\t\t\t\t\t\t\t\t.parse(Jsonix.Util.StringUtils.trim(items[index]), context, input, scope));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// TODO isInstance?\r\n\t\t\t\t\tCLASS_NAME : 'Jsonix.Schema.XSD.List'\r\n\t\t\t\t});\r\n\r\nJsonix.Schema.XSD.String = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'String',\r\n\ttypeName : Jsonix.Schema.XSD.qname('string'),\r\n\tunmarshal : function(context, input, scope) {\r\n\t\tvar text = input.getElementText();\r\n\t\treturn this.parse(text, context, input, scope);\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(value);\r\n\t\treturn value;\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\treturn text;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isString(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.String'\r\n});\r\nJsonix.Schema.XSD.String.INSTANCE = new Jsonix.Schema.XSD.String();\r\nJsonix.Schema.XSD.String.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.String.INSTANCE);\r\nJsonix.Schema.XSD.Strings = Jsonix.Class(Jsonix.Schema.XSD.List, {\r\n\tname : 'Strings',\r\n\tinitialize : function() {\r\n\t\tJsonix.Schema.XSD.List.prototype.initialize.apply(this, [ Jsonix.Schema.XSD.String.INSTANCE, Jsonix.Schema.XSD.qname('strings'), ' ' ]);\r\n\t},\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Strings'\r\n});\r\nJsonix.Schema.XSD.Strings.INSTANCE = new Jsonix.Schema.XSD.Strings();\r\nJsonix.Schema.XSD.NormalizedString = Jsonix.Class(Jsonix.Schema.XSD.String, {\r\n\tname : 'NormalizedString',\r\n\ttypeName : Jsonix.Schema.XSD.qname('normalizedString'),\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.NormalizedString'\r\n});\r\nJsonix.Schema.XSD.NormalizedString.INSTANCE = new Jsonix.Schema.XSD.NormalizedString();\r\nJsonix.Schema.XSD.NormalizedString.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.NormalizedString.INSTANCE);\r\nJsonix.Schema.XSD.Token = Jsonix.Class(Jsonix.Schema.XSD.NormalizedString, {\r\n\tname : 'Token',\r\n\ttypeName : Jsonix.Schema.XSD.qname('token'),\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Token'\r\n});\r\nJsonix.Schema.XSD.Token.INSTANCE = new Jsonix.Schema.XSD.Token();\r\nJsonix.Schema.XSD.Token.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Token.INSTANCE);\r\nJsonix.Schema.XSD.Language = Jsonix.Class(Jsonix.Schema.XSD.Token, {\r\n\tname : 'Language',\r\n\ttypeName : Jsonix.Schema.XSD.qname('language'),\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Language'\r\n});\r\nJsonix.Schema.XSD.Language.INSTANCE = new Jsonix.Schema.XSD.Language();\r\nJsonix.Schema.XSD.Language.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Language.INSTANCE);\r\nJsonix.Schema.XSD.Name = Jsonix.Class(Jsonix.Schema.XSD.Token, {\r\n\tname : 'Name',\r\n\ttypeName : Jsonix.Schema.XSD.qname('Name'),\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Name'\r\n});\r\nJsonix.Schema.XSD.Name.INSTANCE = new Jsonix.Schema.XSD.Name();\r\nJsonix.Schema.XSD.Name.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Name.INSTANCE);\r\nJsonix.Schema.XSD.NCName = Jsonix.Class(Jsonix.Schema.XSD.Name, {\r\n\tname : 'NCName',\r\n\ttypeName : Jsonix.Schema.XSD.qname('NCName'),\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.NCName'\r\n});\r\nJsonix.Schema.XSD.NCName.INSTANCE = new Jsonix.Schema.XSD.NCName();\r\nJsonix.Schema.XSD.NCName.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.NCName.INSTANCE);\r\nJsonix.Schema.XSD.NMToken = Jsonix.Class(Jsonix.Schema.XSD.Token, {\r\n\tname : 'NMToken',\r\n\ttypeName : Jsonix.Schema.XSD.qname('NMTOKEN'),\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.NMToken'\r\n});\r\nJsonix.Schema.XSD.NMToken.INSTANCE = new Jsonix.Schema.XSD.NMToken();\r\nJsonix.Schema.XSD.NMTokens = Jsonix.Class(Jsonix.Schema.XSD.List, {\r\n\tname : 'NMTokens',\r\n\tinitialize : function() {\r\n\t\tJsonix.Schema.XSD.List.prototype.initialize.apply(this, [ Jsonix.Schema.XSD.NMToken.INSTANCE, Jsonix.Schema.XSD.qname('NMTOKEN'), ' ' ]);\r\n\t},\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.NMTokens'\r\n});\r\nJsonix.Schema.XSD.NMTokens.INSTANCE = new Jsonix.Schema.XSD.NMTokens();\r\nJsonix.Schema.XSD.Boolean = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'Boolean',\r\n\ttypeName : Jsonix.Schema.XSD.qname('boolean'),\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureBoolean(value);\r\n\t\treturn value ? 'true' : 'false';\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tif (text === 'true' || text === '1') {\r\n\t\t\treturn true;\r\n\t\t} else if (text === 'false' || text === '0') {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Either [true], [1], [0] or [false] expected as boolean value.\");\r\n\t\t}\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isBoolean(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Boolean'\r\n});\r\nJsonix.Schema.XSD.Boolean.INSTANCE = new Jsonix.Schema.XSD.Boolean();\r\nJsonix.Schema.XSD.Boolean.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Boolean.INSTANCE);\r\nJsonix.Schema.XSD.Base64Binary = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'Base64Binary',\r\n\ttypeName : Jsonix.Schema.XSD.qname('base64Binary'),\r\n\tcharToByte : {},\r\n\tbyteToChar : [],\r\n\tinitialize : function() {\r\n\t\tJsonix.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);\r\n\t\t// Initialize charToByte and byteToChar table for fast\r\n\t\t// lookups\r\n\t\tvar charTable = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\t\tfor (var i = 0; i < charTable.length; i++) {\r\n\t\t\tvar _char = charTable.charAt(i);\r\n\t\t\tvar _byte = charTable.charCodeAt(i);\r\n\t\t\tthis.byteToChar[i] = _char;\r\n\t\t\tthis.charToByte[_char] = i;\r\n\t\t}\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureArray(value);\r\n\t\treturn this.encode(value);\r\n\t},\r\n\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\treturn this.decode(text);\r\n\t},\r\n\tencode : function(uarray) {\r\n\t\tvar output = \"\";\r\n\t\tvar byte0;\r\n\t\tvar byte1;\r\n\t\tvar byte2;\r\n\t\tvar char0;\r\n\t\tvar char1;\r\n\t\tvar char2;\r\n\t\tvar char3;\r\n\t\tvar i = 0;\r\n\t\tvar j = 0;\r\n\t\tvar length = uarray.length;\r\n\r\n\t\tfor (i = 0; i < length; i += 3) {\r\n\t\t\tbyte0 = uarray[i] & 0xFF;\r\n\t\t\tchar0 = this.byteToChar[byte0 >> 2];\r\n\r\n\t\t\tif (i + 1 < length) {\r\n\t\t\t\tbyte1 = uarray[i + 1] & 0xFF;\r\n\t\t\t\tchar1 = this.byteToChar[((byte0 & 0x03) << 4) | (byte1 >> 4)];\r\n\t\t\t\tif (i + 2 < length) {\r\n\t\t\t\t\tbyte2 = uarray[i + 2] & 0xFF;\r\n\t\t\t\t\tchar2 = this.byteToChar[((byte1 & 0x0F) << 2) | (byte2 >> 6)];\r\n\t\t\t\t\tchar3 = this.byteToChar[byte2 & 0x3F];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tchar2 = this.byteToChar[(byte1 & 0x0F) << 2];\r\n\t\t\t\t\tchar3 = \"=\";\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tchar1 = this.byteToChar[(byte0 & 0x03) << 4];\r\n\t\t\t\tchar2 = \"=\";\r\n\t\t\t\tchar3 = \"=\";\r\n\t\t\t}\r\n\t\t\toutput = output + char0 + char1 + char2 + char3;\r\n\t\t}\r\n\t\treturn output;\r\n\t},\r\n\tdecode : function(text) {\r\n\r\n\t\tinput = text.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n\t\tvar length = Math.floor(input.length / 4 * 3);\r\n\t\tif (input.charAt(input.length - 1) === \"=\") {\r\n\t\t\tlength--;\r\n\t\t}\r\n\t\tif (input.charAt(input.length - 2) === \"=\") {\r\n\t\t\tlength--;\r\n\t\t}\r\n\r\n\t\tvar uarray = new Array(length);\r\n\r\n\t\tvar byte0;\r\n\t\tvar byte1;\r\n\t\tvar byte2;\r\n\t\tvar char0;\r\n\t\tvar char1;\r\n\t\tvar char2;\r\n\t\tvar char3;\r\n\t\tvar i = 0;\r\n\t\tvar j = 0;\r\n\r\n\t\tfor (i = 0; i < length; i += 3) {\r\n\t\t\t// get the 3 octects in 4 ascii chars\r\n\t\t\tchar0 = this.charToByte[input.charAt(j++)];\r\n\t\t\tchar1 = this.charToByte[input.charAt(j++)];\r\n\t\t\tchar2 = this.charToByte[input.charAt(j++)];\r\n\t\t\tchar3 = this.charToByte[input.charAt(j++)];\r\n\r\n\t\t\tbyte0 = (char0 << 2) | (char1 >> 4);\r\n\t\t\tbyte1 = ((char1 & 0x0F) << 4) | (char2 >> 2);\r\n\t\t\tbyte2 = ((char2 & 0x03) << 6) | char3;\r\n\r\n\t\t\tuarray[i] = byte0;\r\n\t\t\tif (char2 != 64) {\r\n\t\t\t\tuarray[i + 1] = byte1;\r\n\t\t\t}\r\n\t\t\tif (char3 != 64) {\r\n\t\t\t\tuarray[i + 2] = byte2;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn uarray;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isArray(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Base64Binary'\r\n});\r\nJsonix.Schema.XSD.Base64Binary.INSTANCE = new Jsonix.Schema.XSD.Base64Binary();\r\nJsonix.Schema.XSD.Base64Binary.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Base64Binary.INSTANCE);\r\nJsonix.Schema.XSD.HexBinary = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'HexBinary',\r\n\ttypeName : Jsonix.Schema.XSD.qname('hexBinary'),\r\n\tcharToQuartet : {},\r\n\tbyteToDuplet : [],\r\n\tinitialize : function() {\r\n\t\tJsonix.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);\r\n\t\tvar charTableUpperCase = \"0123456789ABCDEF\";\r\n\t\tvar charTableLowerCase = charTableUpperCase.toLowerCase();\r\n\t\tvar i;\r\n\t\tfor (i = 0; i < 16; i++) {\r\n\t\t\tthis.charToQuartet[charTableUpperCase.charAt(i)] = i;\r\n\t\t\tif (i >= 0xA) {\r\n\t\t\t\tthis.charToQuartet[charTableLowerCase.charAt(i)] = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (i = 0; i < 256; i++) {\r\n\t\t\tthis.byteToDuplet[i] =\r\n\t\t\t//\r\n\t\t\tcharTableUpperCase[i >> 4] + charTableUpperCase[i & 0xF];\r\n\t\t}\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureArray(value);\r\n\t\treturn this.encode(value);\r\n\t},\r\n\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\treturn this.decode(text);\r\n\t},\r\n\tencode : function(uarray) {\r\n\t\tvar output = \"\";\r\n\t\tfor ( var i = 0; i < uarray.length; i++) {\r\n\t\t\toutput = output + this.byteToDuplet[uarray[i] & 0xFF];\r\n\t\t}\r\n\t\treturn output;\r\n\t},\r\n\tdecode : function(text) {\r\n\t\tvar input = text.replace(/[^A-Fa-f0-9]/g, \"\");\r\n\t\t// Round by two\r\n\t\tvar length = input.length >> 1;\r\n\t\tvar uarray = new Array(length);\r\n\t\tfor ( var i = 0; i < length; i++) {\r\n\t\t\tvar char0 = input.charAt(2 * i);\r\n\t\t\tvar char1 = input.charAt(2 * i + 1);\r\n\t\t\tuarray[i] = this.charToQuartet[char0] << 4\r\n\t\t\t\t\t| this.charToQuartet[char1];\r\n\t\t}\r\n\t\treturn uarray;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isArray(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.HexBinary'\r\n});\r\nJsonix.Schema.XSD.HexBinary.INSTANCE = new Jsonix.Schema.XSD.HexBinary();\r\nJsonix.Schema.XSD.HexBinary.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.HexBinary.INSTANCE);\r\nJsonix.Schema.XSD.Number = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'Number',\r\n\ttypeName : Jsonix.Schema.XSD.qname('number'),\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureNumberOrNaN(value);\r\n\t\tif (Jsonix.Util.Type.isNaN(value)) {\r\n\t\t\treturn 'NaN';\r\n\t\t} else if (value === Infinity) {\r\n\t\t\treturn 'INF';\r\n\t\t} else if (value === -Infinity) {\r\n\t\t\treturn '-INF';\r\n\t\t} else {\r\n\t\t\tvar text = String(value);\r\n\t\t\treturn text;\r\n\t\t}\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tif (text === '-INF') {\r\n\t\t\treturn -Infinity;\r\n\t\t} else if (text === 'INF') {\r\n\t\t\treturn Infinity;\r\n\t\t} else if (text === 'NaN') {\r\n\t\t\treturn NaN;\r\n\t\t} else {\r\n\t\t\tvar value = Number(text);\r\n\t\t\tJsonix.Util.Ensure.ensureNumber(value);\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isNumberOrNaN(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Number'\r\n});\r\nJsonix.Schema.XSD.Number.INSTANCE = new Jsonix.Schema.XSD.Number();\r\nJsonix.Schema.XSD.Number.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Number.INSTANCE);\r\nJsonix.Schema.XSD.Float = Jsonix.Class(Jsonix.Schema.XSD.Number, {\r\n\tname : 'Float',\r\n\ttypeName : Jsonix.Schema.XSD.qname('float'),\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isNaN(value) || value === -Infinity || value === Infinity || (Jsonix.Util.Type.isNumber(value) && value >= this.MIN_VALUE && value <= this.MAX_VALUE);\r\n\t},\r\n\tMIN_VALUE : -3.4028235e+38,\r\n\tMAX_VALUE : 3.4028235e+38,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Float'\r\n});\r\nJsonix.Schema.XSD.Float.INSTANCE = new Jsonix.Schema.XSD.Float();\r\nJsonix.Schema.XSD.Float.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Float.INSTANCE);\r\nJsonix.Schema.XSD.Decimal = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'Decimal',\r\n\ttypeName : Jsonix.Schema.XSD.qname('decimal'),\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureNumber(value);\r\n\t\tvar text = String(value);\r\n\t\treturn text;\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tvar value = Number(text);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value);\r\n\t\treturn value;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isNumber(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Decimal'\r\n});\r\nJsonix.Schema.XSD.Decimal.INSTANCE = new Jsonix.Schema.XSD.Decimal();\r\nJsonix.Schema.XSD.Decimal.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Decimal.INSTANCE);\r\nJsonix.Schema.XSD.Integer = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'Integer',\r\n\ttypeName : Jsonix.Schema.XSD.qname('integer'),\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureInteger(value);\r\n\t\tvar text = String(value);\r\n\t\treturn text;\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tvar value = Number(text);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value);\r\n\t\treturn value;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.NumberUtils.isInteger(value) && value >= this.MIN_VALUE && value <= this.MAX_VALUE;\r\n\t},\r\n\tMIN_VALUE : -9223372036854775808,\r\n\tMAX_VALUE : 9223372036854775807,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Integer'\r\n});\r\nJsonix.Schema.XSD.Integer.INSTANCE = new Jsonix.Schema.XSD.Integer();\r\nJsonix.Schema.XSD.Integer.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Integer.INSTANCE);\r\nJsonix.Schema.XSD.NonPositiveInteger = Jsonix.Class(Jsonix.Schema.XSD.Integer, {\r\n\tname : 'NonPositiveInteger',\r\n\ttypeName : Jsonix.Schema.XSD.qname('nonPositiveInteger'),\r\n\tMIN_VALUE: -9223372036854775808,\r\n\tMAX_VALUE: 0,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.NonPositiveInteger'\r\n});\r\nJsonix.Schema.XSD.NonPositiveInteger.INSTANCE = new Jsonix.Schema.XSD.NonPositiveInteger();\r\nJsonix.Schema.XSD.NonPositiveInteger.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.NonPositiveInteger.INSTANCE);\r\nJsonix.Schema.XSD.NegativeInteger = Jsonix.Class(Jsonix.Schema.XSD.NonPositiveInteger, {\r\n\tname : 'NegativeInteger',\r\n\ttypeName : Jsonix.Schema.XSD.qname('negativeInteger'),\r\n\tMIN_VALUE: -9223372036854775808,\r\n\tMAX_VALUE: -1,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.NegativeInteger'\r\n});\r\nJsonix.Schema.XSD.NegativeInteger.INSTANCE = new Jsonix.Schema.XSD.NegativeInteger();\r\nJsonix.Schema.XSD.NegativeInteger.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.NegativeInteger.INSTANCE);\r\nJsonix.Schema.XSD.Long = Jsonix.Class(Jsonix.Schema.XSD.Integer, {\r\n\tname : 'Long',\r\n\ttypeName : Jsonix.Schema.XSD.qname('long'),\r\n\tMIN_VALUE : -9223372036854775808,\r\n\tMAX_VALUE : 9223372036854775807,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Long'\r\n});\r\nJsonix.Schema.XSD.Long.INSTANCE = new Jsonix.Schema.XSD.Long();\r\nJsonix.Schema.XSD.Long.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.Long.INSTANCE);\r\nJsonix.Schema.XSD.Int = Jsonix.Class(Jsonix.Schema.XSD.Long, {\r\n\tname : 'Int',\r\n\ttypeName : Jsonix.Schema.XSD.qname('int'),\r\n\tMIN_VALUE : -2147483648,\r\n\tMAX_VALUE : 2147483647,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Int'\r\n});\r\nJsonix.Schema.XSD.Int.INSTANCE = new Jsonix.Schema.XSD.Int();\r\nJsonix.Schema.XSD.Int.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.Int.INSTANCE);\r\nJsonix.Schema.XSD.Short = Jsonix.Class(Jsonix.Schema.XSD.Int, {\r\n\tname : 'Short',\r\n\ttypeName : Jsonix.Schema.XSD.qname('short'),\r\n\tMIN_VALUE : -32768,\r\n\tMAX_VALUE : 32767,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Short'\r\n});\r\nJsonix.Schema.XSD.Short.INSTANCE = new Jsonix.Schema.XSD.Short();\r\nJsonix.Schema.XSD.Short.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Short.INSTANCE);\r\nJsonix.Schema.XSD.Byte = Jsonix.Class(Jsonix.Schema.XSD.Short, {\r\n\tname : 'Byte',\r\n\ttypeName : Jsonix.Schema.XSD.qname('byte'),\r\n\tMIN_VALUE : -128,\r\n\tMAX_VALUE : 127,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Byte'\r\n});\r\nJsonix.Schema.XSD.Byte.INSTANCE = new Jsonix.Schema.XSD.Byte();\r\nJsonix.Schema.XSD.Byte.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Byte.INSTANCE);\r\nJsonix.Schema.XSD.NonNegativeInteger = Jsonix.Class(Jsonix.Schema.XSD.Integer, {\r\n\tname : 'NonNegativeInteger',\r\n\ttypeName : Jsonix.Schema.XSD.qname('nonNegativeInteger'),\r\n\tMIN_VALUE: 0,\r\n\tMAX_VALUE: 9223372036854775807,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.NonNegativeInteger'\r\n});\r\nJsonix.Schema.XSD.NonNegativeInteger.INSTANCE = new Jsonix.Schema.XSD.NonNegativeInteger();\r\nJsonix.Schema.XSD.NonNegativeInteger.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.NonNegativeInteger.INSTANCE);\r\nJsonix.Schema.XSD.UnsignedLong = Jsonix.Class(Jsonix.Schema.XSD.NonNegativeInteger, {\r\n\tname : 'UnsignedLong',\r\n\ttypeName : Jsonix.Schema.XSD.qname('unsignedLong'),\r\n\tMIN_VALUE : 0,\r\n\tMAX_VALUE : 18446744073709551615,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.UnsignedLong'\r\n});\r\nJsonix.Schema.XSD.UnsignedLong.INSTANCE = new Jsonix.Schema.XSD.UnsignedLong();\r\nJsonix.Schema.XSD.UnsignedLong.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedLong.INSTANCE);\r\nJsonix.Schema.XSD.UnsignedInt = Jsonix.Class(Jsonix.Schema.XSD.UnsignedLong, {\r\n\tname : 'UnsignedInt',\r\n\ttypeName : Jsonix.Schema.XSD.qname('unsignedInt'),\r\n\tMIN_VALUE : 0,\r\n\tMAX_VALUE : 4294967295,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.UnsignedInt'\r\n});\r\nJsonix.Schema.XSD.UnsignedInt.INSTANCE = new Jsonix.Schema.XSD.UnsignedInt();\r\nJsonix.Schema.XSD.UnsignedInt.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedInt.INSTANCE);\r\nJsonix.Schema.XSD.UnsignedShort = Jsonix.Class(Jsonix.Schema.XSD.UnsignedInt, {\r\n\tname : 'UnsignedShort',\r\n\ttypeName : Jsonix.Schema.XSD.qname('unsignedShort'),\r\n\tMIN_VALUE : 0,\r\n\tMAX_VALUE : 65535,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.UnsignedShort'\r\n});\r\nJsonix.Schema.XSD.UnsignedShort.INSTANCE = new Jsonix.Schema.XSD.UnsignedShort();\r\nJsonix.Schema.XSD.UnsignedShort.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedShort.INSTANCE);\r\nJsonix.Schema.XSD.UnsignedByte = Jsonix.Class(Jsonix.Schema.XSD.UnsignedShort, {\r\n\tname : 'UnsignedByte',\r\n\ttypeName : Jsonix.Schema.XSD.qname('unsignedByte'),\r\n\tMIN_VALUE : 0,\r\n\tMAX_VALUE : 255,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.UnsignedByte'\r\n});\r\nJsonix.Schema.XSD.UnsignedByte.INSTANCE = new Jsonix.Schema.XSD.UnsignedByte();\r\nJsonix.Schema.XSD.UnsignedByte.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.UnsignedByte.INSTANCE);\r\nJsonix.Schema.XSD.PositiveInteger = Jsonix.Class(Jsonix.Schema.XSD.NonNegativeInteger, {\r\n\tname : 'PositiveInteger',\r\n\ttypeName : Jsonix.Schema.XSD.qname('positiveInteger'),\r\n\tMIN_VALUE : 1,\r\n\tMAX_VALUE : 9223372036854775807,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.PositiveInteger'\r\n});\r\nJsonix.Schema.XSD.PositiveInteger.INSTANCE = new Jsonix.Schema.XSD.PositiveInteger();\r\nJsonix.Schema.XSD.PositiveInteger.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.PositiveInteger.INSTANCE);\r\nJsonix.Schema.XSD.Double = Jsonix.Class(Jsonix.Schema.XSD.Number, {\r\n\tname : 'Double',\r\n\ttypeName : Jsonix.Schema.XSD.qname('double'),\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isNaN(value) || value === -Infinity || value === Infinity || (Jsonix.Util.Type.isNumber(value) && value >= this.MIN_VALUE && value <= this.MAX_VALUE);\r\n\t},\r\n\tMIN_VALUE : -1.7976931348623157e+308,\r\n\tMAX_VALUE : 1.7976931348623157e+308,\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Double'\r\n});\r\nJsonix.Schema.XSD.Double.INSTANCE = new Jsonix.Schema.XSD.Double();\r\nJsonix.Schema.XSD.Double.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Double.INSTANCE);\r\nJsonix.Schema.XSD.AnyURI = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'AnyURI',\r\n\ttypeName : Jsonix.Schema.XSD.qname('anyURI'),\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(value);\r\n\t\treturn value;\r\n\t},\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\treturn text;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isString(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.AnyURI'\r\n});\r\nJsonix.Schema.XSD.AnyURI.INSTANCE = new Jsonix.Schema.XSD.AnyURI();\r\nJsonix.Schema.XSD.AnyURI.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.AnyURI.INSTANCE);\r\nJsonix.Schema.XSD.QName = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'QName',\r\n\ttypeName : Jsonix.Schema.XSD.qname('QName'),\r\n\tprint : function(value, context, output, scope) {\r\n\t\tvar qName = Jsonix.XML.QName.fromObject(value);\r\n\t\tvar prefix;\r\n\t\tvar localPart = qName.localPart;\r\n\t\tif (output) {\r\n\t\t\t// If QName does not provide the prefix, let it be generated\r\n\t\t\tprefix = output.getPrefix(qName.namespaceURI, qName.prefix||null);\r\n\t\t\toutput.declareNamespace(qName.namespaceURI, prefix);\r\n\t\t} else {\r\n\t\t\tprefix = qName.prefix;\r\n\t\t}\r\n\t\treturn !prefix ? localPart : (prefix + ':' + localPart);\r\n\t},\r\n\tparse : function(value, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(value);\r\n\t\tvalue = Jsonix.Util.StringUtils.trim(value);\r\n\t\tvar prefix;\r\n\t\tvar localPart;\r\n\t\tvar colonPosition = value.indexOf(':');\r\n\t\tif (colonPosition === -1) {\r\n\t\t\tprefix = '';\r\n\t\t\tlocalPart = value;\r\n\t\t} else if (colonPosition > 0 && colonPosition < (value.length - 1)) {\r\n\t\t\tprefix = value.substring(0, colonPosition);\r\n\t\t\tlocalPart = value.substring(colonPosition + 1);\r\n\t\t} else {\r\n\t\t\tthrow new Error('Invalid QName [' + value + '].');\r\n\t\t}\r\n\t\tvar namespaceContext = input || context || null;\r\n\t\tif (!namespaceContext)\r\n\t\t{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar namespaceURI = namespaceContext.getNamespaceURI(prefix);\r\n\t\t\tif (Jsonix.Util.Type.isString(namespaceURI))\r\n\t\t\t{\r\n\t\t\t\treturn new Jsonix.XML.QName(namespaceURI, localPart, prefix);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthrow new Error('Prefix [' + prefix + '] of the QName [' + value + '] is not bound in this context.');\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn (value instanceof Jsonix.XML.QName) || (Jsonix.Util.Type.isObject(value) && Jsonix.Util.Type.isString(value.localPart || value.lp));\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.QName'\r\n});\r\nJsonix.Schema.XSD.QName.INSTANCE = new Jsonix.Schema.XSD.QName();\r\nJsonix.Schema.XSD.QName.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.QName.INSTANCE);\r\nJsonix.Schema.XSD.Calendar = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'Calendar',\r\n\ttypeName : Jsonix.Schema.XSD.qname('calendar'),\r\n\tparse : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tif (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.DATETIME_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseDateTime(text, context, input, scope);\r\n\t\t} else if (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.DATE_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseDate(text, context, input, scope);\r\n\t\t} else if (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.TIME_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseTime(text, context, input, scope);\r\n\t\t} else if (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseGYearMonth(text, context, input, scope);\r\n\t\t} else if (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GYEAR_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseGYear(text, context, input, scope);\r\n\t\t} else if (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GMONTH_DAY_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseGMonthDay(text, context, input, scope);\r\n\t\t} else if (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GMONTH_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseGMonth(text, context, input, scope);\r\n\t\t} else if (text.match(new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GDAY_PATTERN + \"$\"))) {\r\n\t\t\treturn this.parseGDay(text, context, input, scope);\r\n\t\t} else {\r\n\t\t\tthrow new Error('Value [' + text + '] does not match xs:dateTime, xs:date, xs:time, xs:gYearMonth, xs:gYear, xs:gMonthDay, xs:gMonth or xs:gDay patterns.');\r\n\t\t}\r\n\t},\r\n\tparseGYearMonth : function(value, context, input, scope) {\r\n\t\tvar gYearMonthExpression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN + \"$\");\r\n\t\tvar results = value.match(gYearMonthExpression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\tyear : parseInt(results[1], 10),\r\n\t\t\t\tmonth : parseInt(results[5], 10),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[7])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + value + '] does not match the xs:gYearMonth pattern.');\r\n\t},\r\n\tparseGYear : function(value, context, input, scope) {\r\n\t\tvar gYearExpression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GYEAR_PATTERN + \"$\");\r\n\t\tvar results = value.match(gYearExpression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\tyear : parseInt(results[1], 10),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[5])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + value + '] does not match the xs:gYear pattern.');\r\n\t},\r\n\tparseGMonthDay : function(value, context, input, scope) {\r\n\t\tvar gMonthDayExpression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GMONTH_DAY_PATTERN + \"$\");\r\n\t\tvar results = value.match(gMonthDayExpression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\tmonth : parseInt(results[2], 10),\r\n\t\t\t\tday : parseInt(results[3], 10),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[5])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + value + '] does not match the xs:gMonthDay pattern.');\r\n\t},\r\n\tparseGMonth : function(value, context, input, scope) {\r\n\t\tvar gMonthExpression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GMONTH_PATTERN + \"$\");\r\n\t\tvar results = value.match(gMonthExpression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\tmonth : parseInt(results[2], 10),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[3])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + value + '] does not match the xs:gMonth pattern.');\r\n\t},\r\n\tparseGDay : function(value, context, input, scope) {\r\n\t\tvar gDayExpression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.GDAY_PATTERN + \"$\");\r\n\t\tvar results = value.match(gDayExpression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\tday : parseInt(results[2], 10),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[3])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + value + '] does not match the xs:gDay pattern.');\r\n\t},\r\n\tparseDateTime : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tvar expression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.DATETIME_PATTERN + \"$\");\r\n\t\tvar results = text.match(expression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\tyear : parseInt(results[1], 10),\r\n\t\t\t\tmonth : parseInt(results[5], 10),\r\n\t\t\t\tday : parseInt(results[7], 10),\r\n\t\t\t\thour : parseInt(results[9], 10),\r\n\t\t\t\tminute : parseInt(results[10], 10),\r\n\t\t\t\tsecond : parseInt(results[11], 10),\r\n\t\t\t\tfractionalSecond : (results[12] ? parseFloat(results[12]) : 0),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[14])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + text + '] does not match the xs:date pattern.');\r\n\t},\r\n\tparseDate : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tvar expression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.DATE_PATTERN + \"$\");\r\n\t\tvar results = text.match(expression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\tyear : parseInt(results[1], 10),\r\n\t\t\t\tmonth : parseInt(results[5], 10),\r\n\t\t\t\tday : parseInt(results[7], 10),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[9])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + text + '] does not match the xs:date pattern.');\r\n\t},\r\n\tparseTime : function(text, context, input, scope) {\r\n\t\tJsonix.Util.Ensure.ensureString(text);\r\n\t\tvar expression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.TIME_PATTERN + \"$\");\r\n\t\tvar results = text.match(expression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar data = {\r\n\t\t\t\thour : parseInt(results[1], 10),\r\n\t\t\t\tminute : parseInt(results[2], 10),\r\n\t\t\t\tsecond : parseInt(results[3], 10),\r\n\t\t\t\tfractionalSecond : (results[4] ? parseFloat(results[4]) : 0),\r\n\t\t\t\ttimezone : this.parseTimezoneString(results[6])\r\n\t\t\t};\r\n\t\t\treturn new Jsonix.XML.Calendar(data);\r\n\t\t}\r\n\t\tthrow new Error('Value [' + text + '] does not match the xs:time pattern.');\r\n\t},\r\n\tparseTimezoneString : function(text) {\r\n\t\t// (('+' | '-') hh ':' mm) | 'Z'\r\n\t\tif (!Jsonix.Util.Type.isString(text)) {\r\n\t\t\treturn NaN;\r\n\t\t} else if (text === '') {\r\n\t\t\treturn NaN;\r\n\t\t} else if (text === 'Z') {\r\n\t\t\treturn 0;\r\n\t\t} else if (text === '+14:00') {\r\n\t\t\treturn 14 * 60;\r\n\t\t} else if (text === '-14:00') {\r\n\t\t\treturn -14 * 60;\r\n\t\t} else {\r\n\t\t\tvar expression = new RegExp(\"^\" + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + \"$\");\r\n\t\t\tvar results = text.match(expression);\r\n\t\t\tif (results !== null) {\r\n\t\t\t\tvar sign = results[1] === '+' ? 1 : -1;\r\n\t\t\t\tvar hour = parseInt(results[4], 10);\r\n\t\t\t\tvar minute = parseInt(results[5], 10);\r\n\t\t\t\treturn sign * (hour * 60 + minute);\r\n\t\t\t}\r\n\t\t\tthrow new Error('Value [' + text + '] does not match the timezone pattern.');\r\n\t\t}\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tif (Jsonix.Util.NumberUtils.isInteger(value.year) && Jsonix.Util.NumberUtils.isInteger(value.month) && Jsonix.Util.NumberUtils.isInteger(value.day) && Jsonix.Util.NumberUtils.isInteger(value.hour) && Jsonix.Util.NumberUtils.isInteger(value.minute) && Jsonix.Util.NumberUtils.isInteger(value.second)) {\r\n\t\t\treturn this.printDateTime(value);\r\n\t\t} else if (Jsonix.Util.NumberUtils.isInteger(value.year) && Jsonix.Util.NumberUtils.isInteger(value.month) && Jsonix.Util.NumberUtils.isInteger(value.day)) {\r\n\t\t\treturn this.printDate(value);\r\n\t\t} else if (Jsonix.Util.NumberUtils.isInteger(value.hour) && Jsonix.Util.NumberUtils.isInteger(value.minute) && Jsonix.Util.NumberUtils.isInteger(value.second)) {\r\n\t\t\treturn this.printTime(value);\r\n\t\t} else if (Jsonix.Util.NumberUtils.isInteger(value.year) && Jsonix.Util.NumberUtils.isInteger(value.month)) {\r\n\t\t\treturn this.printGYearMonth(value);\r\n\t\t} else if (Jsonix.Util.NumberUtils.isInteger(value.month) && Jsonix.Util.NumberUtils.isInteger(value.day)) {\r\n\t\t\treturn this.printGMonthDay(value);\r\n\t\t} else if (Jsonix.Util.NumberUtils.isInteger(value.year)) {\r\n\t\t\treturn this.printGYear(value);\r\n\t\t} else if (Jsonix.Util.NumberUtils.isInteger(value.month)) {\r\n\t\t\treturn this.printGMonth(value);\r\n\t\t} else if (Jsonix.Util.NumberUtils.isInteger(value.day)) {\r\n\t\t\treturn this.printGDay(value);\r\n\t\t} else {\r\n\t\t\tthrow new Error('Value [' + value + '] is not recognized as dateTime, date or time.');\r\n\t\t}\r\n\t},\r\n\tprintDateTime : function(value) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.year);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.month);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.day);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.hour);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.minute);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value.second);\r\n\t\tif (Jsonix.Util.Type.exists(value.fractionalString)) {\r\n\t\t\tJsonix.Util.Ensure.ensureNumber(value.fractionalString);\r\n\t\t}\r\n\t\tif (Jsonix.Util.Type.exists(value.timezone) && !Jsonix.Util.Type.isNaN(value.timezone)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.timezone);\r\n\t\t}\r\n\t\tvar result = this.printDateString(value);\r\n\t\tresult = result + 'T';\r\n\t\tresult = result + this.printTimeString(value);\r\n\t\tif (Jsonix.Util.Type.exists(value.timezone)) {\r\n\t\t\tresult = result + this.printTimezoneString(value.timezone);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprintDate : function(value) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value.year);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value.month);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value.day);\r\n\t\tif (Jsonix.Util.Type.exists(value.timezone) && !Jsonix.Util.Type.isNaN(value.timezone)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.timezone);\r\n\t\t}\r\n\t\tvar result = this.printDateString(value);\r\n\t\tif (Jsonix.Util.Type.exists(value.timezone)) {\r\n\t\t\tresult = result + this.printTimezoneString(value.timezone);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprintTime : function(value) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value.hour);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value.minute);\r\n\t\tJsonix.Util.Ensure.ensureNumber(value.second);\r\n\t\tif (Jsonix.Util.Type.exists(value.fractionalString)) {\r\n\t\t\tJsonix.Util.Ensure.ensureNumber(value.fractionalString);\r\n\t\t}\r\n\t\tif (Jsonix.Util.Type.exists(value.timezone) && !Jsonix.Util.Type.isNaN(value.timezone)) {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.timezone);\r\n\t\t}\r\n\r\n\t\tvar result = this.printTimeString(value);\r\n\t\tif (Jsonix.Util.Type.exists(value.timezone)) {\r\n\t\t\tresult = result + this.printTimezoneString(value.timezone);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprintDateString : function(value) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.year);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.month);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.day);\r\n\t\treturn (value.year < 0 ? ('-' + this.printYear(-value.year)) : this.printYear(value.year)) + '-' + this.printMonth(value.month) + '-' + this.printDay(value.day);\r\n\t},\r\n\tprintTimeString : function(value) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.hour);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.minute);\r\n\t\tJsonix.Util.Ensure.ensureInteger(value.second);\r\n\t\tif (Jsonix.Util.Type.exists(value.fractionalSecond)) {\r\n\t\t\tJsonix.Util.Ensure.ensureNumber(value.fractionalSecond);\r\n\t\t}\r\n\t\tvar result = this.printHour(value.hour);\r\n\t\tresult = result + ':';\r\n\t\tresult = result + this.printMinute(value.minute);\r\n\t\tresult = result + ':';\r\n\t\tresult = result + this.printSecond(value.second);\r\n\t\tif (Jsonix.Util.Type.exists(value.fractionalSecond)) {\r\n\t\t\tresult = result + this.printFractionalSecond(value.fractionalSecond);\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprintTimezoneString : function(value) {\r\n\t\tif (!Jsonix.Util.Type.exists(value) || Jsonix.Util.Type.isNaN(value)) {\r\n\t\t\treturn '';\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value);\r\n\r\n\t\t\tvar sign = value < 0 ? -1 : (value > 0 ? 1 : 0);\r\n\t\t\tvar data = value * sign;\r\n\t\t\tvar minute = data % 60;\r\n\t\t\tvar hour = Math.floor(data / 60);\r\n\r\n\t\t\tvar result;\r\n\t\t\tif (sign === 0) {\r\n\t\t\t\treturn 'Z';\r\n\t\t\t} else {\r\n\t\t\t\tif (sign > 0) {\r\n\t\t\t\t\tresult = '+';\r\n\t\t\t\t} else if (sign < 0) {\r\n\t\t\t\t\tresult = '-';\r\n\t\t\t\t}\r\n\t\t\t\tresult = result + this.printHour(hour);\r\n\t\t\t\tresult = result + ':';\r\n\t\t\t\tresult = result + this.printMinute(minute);\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tprintGDay : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tvar day = undefined;\r\n\t\tvar timezone = undefined;\r\n\r\n\t\tif (value instanceof Date) {\r\n\t\t\tday = value.getDate();\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.day);\r\n\t\t\tday = value.day;\r\n\t\t\ttimezone = value.timezone;\r\n\t\t}\r\n\t\tJsonix.XML.Calendar.validateDay(day);\r\n\t\tJsonix.XML.Calendar.validateTimezone(timezone);\r\n\t\treturn \"---\" + this.printDay(day) + this.printTimezoneString(timezone);\r\n\t},\r\n\tprintGMonth : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tvar month = undefined;\r\n\t\tvar timezone = undefined;\r\n\r\n\t\tif (value instanceof Date) {\r\n\t\t\tmonth = value.getMonth() + 1;\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.month);\r\n\t\t\tmonth = value.month;\r\n\t\t\ttimezone = value.timezone;\r\n\t\t}\r\n\t\tJsonix.XML.Calendar.validateMonth(month);\r\n\t\tJsonix.XML.Calendar.validateTimezone(timezone);\r\n\t\treturn \"--\" + this.printMonth(month) + this.printTimezoneString(timezone);\r\n\t},\r\n\tprintGMonthDay : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tvar month = undefined;\r\n\t\tvar day = undefined;\r\n\t\tvar timezone = undefined;\r\n\r\n\t\tif (value instanceof Date) {\r\n\t\t\tmonth = value.getMonth() + 1;\r\n\t\t\tday = value.getDate();\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.month);\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.day);\r\n\t\t\tmonth = value.month;\r\n\t\t\tday = value.day;\r\n\t\t\ttimezone = value.timezone;\r\n\t\t}\r\n\t\tJsonix.XML.Calendar.validateMonthDay(month, day);\r\n\t\tJsonix.XML.Calendar.validateTimezone(timezone);\r\n\t\treturn \"--\" + this.printMonth(month) + \"-\" + this.printDay(day) + this.printTimezoneString(timezone);\r\n\t},\r\n\tprintGYear : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tvar year = undefined;\r\n\t\tvar timezone = undefined;\r\n\r\n\t\tif (value instanceof Date) {\r\n\t\t\tyear = value.getFullYear();\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.year);\r\n\t\t\tyear = value.year;\r\n\t\t\ttimezone = value.timezone;\r\n\t\t}\r\n\t\tJsonix.XML.Calendar.validateYear(year);\r\n\t\tJsonix.XML.Calendar.validateTimezone(timezone);\r\n\t\treturn this.printSignedYear(year) + this.printTimezoneString(timezone);\r\n\t},\r\n\tprintGYearMonth : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tvar year = undefined;\r\n\t\tvar month = undefined;\r\n\t\tvar timezone = undefined;\r\n\r\n\t\tif (value instanceof Date) {\r\n\t\t\tyear = value.getFullYear();\r\n\t\t\tmonth = value.getMonth() + 1;\r\n\t\t} else {\r\n\t\t\tJsonix.Util.Ensure.ensureInteger(value.year);\r\n\t\t\tyear = value.year;\r\n\t\t\tmonth = value.month;\r\n\t\t\ttimezone = value.timezone;\r\n\t\t}\r\n\t\tJsonix.XML.Calendar.validateYear(year);\r\n\t\tJsonix.XML.Calendar.validateMonth(month);\r\n\t\tJsonix.XML.Calendar.validateTimezone(timezone);\r\n\t\treturn this.printSignedYear(year) + \"-\" + this.printMonth(month) + this.printTimezoneString(timezone);\r\n\t},\r\n\tprintSignedYear : function(value) {\r\n\t\treturn value < 0 ? (\"-\" + this.printYear(value * -1)) : (this.printYear(value));\r\n\t},\r\n\tprintYear : function(value) {\r\n\t\treturn this.printInteger(value, 4);\r\n\t},\r\n\tprintMonth : function(value) {\r\n\t\treturn this.printInteger(value, 2);\r\n\t},\r\n\tprintDay : function(value) {\r\n\t\treturn this.printInteger(value, 2);\r\n\t},\r\n\tprintHour : function(value) {\r\n\t\treturn this.printInteger(value, 2);\r\n\t},\r\n\tprintMinute : function(value) {\r\n\t\treturn this.printInteger(value, 2);\r\n\t},\r\n\tprintSecond : function(value) {\r\n\t\treturn this.printInteger(value, 2);\r\n\t},\r\n\tprintFractionalSecond : function(value) {\r\n\t\tJsonix.Util.Ensure.ensureNumber(value);\r\n\t\tif (value < 0 || value >= 1) {\r\n\t\t\tthrow new Error('Fractional second [' + value + '] must be between 0 and 1.');\r\n\t\t} else if (value === 0) {\r\n\t\t\treturn '';\r\n\t\t} else {\r\n\t\t\tvar string = String(value);\r\n\t\t\tvar dotIndex = string.indexOf('.');\r\n\t\t\tif (dotIndex < 0) {\r\n\t\t\t\treturn '';\r\n\t\t\t} else {\r\n\t\t\t\treturn string.substring(dotIndex);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tprintInteger : function(value, length) {\r\n\t\tJsonix.Util.Ensure.ensureInteger(value);\r\n\t\tJsonix.Util.Ensure.ensureInteger(length);\r\n\t\tif (length <= 0) {\r\n\t\t\tthrow new Error('Length [' + value + '] must be positive.');\r\n\t\t}\r\n\t\tif (value < 0) {\r\n\t\t\tthrow new Error('Value [' + value + '] must not be negative.');\r\n\t\t}\r\n\t\tvar result = String(value);\r\n\t\tfor (var i = result.length; i < length; i++) {\r\n\t\t\tresult = '0' + result;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isObject(value) && ((Jsonix.Util.NumberUtils.isInteger(value.year) && Jsonix.Util.NumberUtils.isInteger(value.month) && Jsonix.Util.NumberUtils.isInteger(value.day)) || (Jsonix.Util.NumberUtils.isInteger(value.hour) && Jsonix.Util.NumberUtils.isInteger(value.minute) && Jsonix.Util.NumberUtils.isInteger(value.second)));\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Calendar'\r\n});\r\n\r\nJsonix.Schema.XSD.Calendar.YEAR_PATTERN = \"-?([1-9][0-9]*)?((?!(0000))[0-9]{4})\";\r\nJsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN = \"Z|([\\\\-\\\\+])(((0[0-9]|1[0-3]):([0-5][0-9]))|(14:00))\";\r\nJsonix.Schema.XSD.Calendar.MONTH_PATTERN = \"(0[1-9]|1[0-2])\";\r\nJsonix.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN = \"\\\\-\\\\-\" + Jsonix.Schema.XSD.Calendar.MONTH_PATTERN;\r\nJsonix.Schema.XSD.Calendar.DAY_PATTERN = \"(0[1-9]|[12][0-9]|3[01])\";\r\nJsonix.Schema.XSD.Calendar.SINGLE_DAY_PATTERN = \"\\\\-\\\\-\\\\-\" + Jsonix.Schema.XSD.Calendar.DAY_PATTERN;\r\nJsonix.Schema.XSD.Calendar.GYEAR_PATTERN = \"(\" + Jsonix.Schema.XSD.Calendar.YEAR_PATTERN + \")\" + \"(\" + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + \")?\";\r\nJsonix.Schema.XSD.Calendar.GMONTH_PATTERN = \"(\" + Jsonix.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN + \")\" + \"(\" + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + \")?\";\r\nJsonix.Schema.XSD.Calendar.GDAY_PATTERN = \"(\" + Jsonix.Schema.XSD.Calendar.SINGLE_DAY_PATTERN + \")\" + \"(\" + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + \")?\";\r\nJsonix.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN = \"(\" + Jsonix.Schema.XSD.Calendar.YEAR_PATTERN + \")\" + \"-\" + \"(\" + Jsonix.Schema.XSD.Calendar.DAY_PATTERN + \")\" + \"(\" + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + \")?\";\r\nJsonix.Schema.XSD.Calendar.GMONTH_DAY_PATTERN = \"(\" + Jsonix.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN + \")\" + \"-\" + \"(\" + Jsonix.Schema.XSD.Calendar.DAY_PATTERN + \")\" + \"(\" + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + \")?\";\r\nJsonix.Schema.XSD.Calendar.DATE_PART_PATTERN = \"(\" + Jsonix.Schema.XSD.Calendar.YEAR_PATTERN + \")\" + \"-\" + \"(\" + Jsonix.Schema.XSD.Calendar.MONTH_PATTERN + \")\" + \"-\" + \"(\" + Jsonix.Schema.XSD.Calendar.DAY_PATTERN + \")\";\r\nJsonix.Schema.XSD.Calendar.TIME_PART_PATTERN = \"([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\\\\.([0-9]+))?\";\r\nJsonix.Schema.XSD.Calendar.TIME_PATTERN = Jsonix.Schema.XSD.Calendar.TIME_PART_PATTERN + '(' + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + ')?';\r\nJsonix.Schema.XSD.Calendar.DATE_PATTERN = Jsonix.Schema.XSD.Calendar.DATE_PART_PATTERN + '(' + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + ')?';\r\nJsonix.Schema.XSD.Calendar.DATETIME_PATTERN = Jsonix.Schema.XSD.Calendar.DATE_PART_PATTERN + 'T' + Jsonix.Schema.XSD.Calendar.TIME_PART_PATTERN + '(' + Jsonix.Schema.XSD.Calendar.TIMEZONE_PATTERN + ')?';\r\nJsonix.Schema.XSD.Calendar.INSTANCE = new Jsonix.Schema.XSD.Calendar();\r\nJsonix.Schema.XSD.Calendar.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Calendar.INSTANCE);\r\nJsonix.Schema.XSD.Duration = Jsonix.Class(Jsonix.Schema.XSD.AnySimpleType, {\r\n\tname : 'Duration',\r\n\ttypeName : Jsonix.Schema.XSD.qname('duration'),\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isObject(value) && (\r\n\t\t\t\t(Jsonix.Util.Type.exists(value.sign) ? (value.sign === -1 || value.sign === 1) : true)\r\n\t\t\t\t(Jsonix.Util.NumberUtils.isInteger(value.years) && value.years >=0) ||\r\n\t\t\t\t(Jsonix.Util.NumberUtils.isInteger(value.months) && value.months >=0) ||\r\n\t\t\t\t(Jsonix.Util.NumberUtils.isInteger(value.days) && value.days >= 0) ||\r\n\t\t\t\t(Jsonix.Util.NumberUtils.isInteger(value.hours) && value.hours >= 0) ||\r\n\t\t\t\t(Jsonix.Util.NumberUtils.isInteger(value.minutes) && value.minutes >= 0) ||\r\n\t\t\t\t(Jsonix.Util.Type.isNumber(value.seconds) && value.seconds >= 0) );\r\n\t},\r\n\tvalidate : function(value) {\r\n\t\tJsonix.Util.Ensure.ensureObject(value);\r\n\t\tif (Jsonix.Util.Type.exists(value.sign)) {\r\n\t\t\tif (!(value.sign === 1 || value.sign === -1)) {\r\n\t\t\t\tthrow new Error(\"Sign of the duration [\" + value.sign + \"] must be either [1] or [-1].\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar empty = true;\r\n\t\tvar ifExistsEnsureUnsignedInteger = function(v, message) {\r\n\t\t\tif (Jsonix.Util.Type.exists(v)) {\r\n\t\t\t\tif (!(Jsonix.Util.NumberUtils.isInteger(v) && v >= 0)) {\r\n\t\t\t\t\tthrow new Error(message.replace(\"{0}\", v));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar ifExistsEnsureUnsignedNumber = function(v, message) {\r\n\t\t\tif (Jsonix.Util.Type.exists(v)) {\r\n\t\t\t\tif (!(Jsonix.Util.Type.isNumber(v) && v >= 0)) {\r\n\t\t\t\t\tthrow new Error(message.replace(\"{0}\", v));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\t\tempty = empty && !ifExistsEnsureUnsignedInteger(value.years, \"Number of years [{0}] must be an unsigned integer.\");\r\n\t\tempty = empty && !ifExistsEnsureUnsignedInteger(value.months, \"Number of months [{0}] must be an unsigned integer.\");\r\n\t\tempty = empty && !ifExistsEnsureUnsignedInteger(value.days, \"Number of days [{0}] must be an unsigned integer.\");\r\n\t\tempty = empty && !ifExistsEnsureUnsignedInteger(value.hours, \"Number of hours [{0}] must be an unsigned integer.\");\r\n\t\tempty = empty && !ifExistsEnsureUnsignedInteger(value.minutes, \"Number of minutes [{0}] must be an unsigned integer.\");\r\n\t\tempty = empty && !ifExistsEnsureUnsignedNumber(value.seconds, \"Number of seconds [{0}] must be an unsigned number.\");\r\n\t\tif (empty) {\r\n\t\t\tthrow new Error(\"At least one of the components (years, months, days, hours, minutes, seconds) must be set.\");\r\n\t\t}\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tthis.validate(value);\r\n\t\tvar result = '';\r\n\t\tif (value.sign === -1)\r\n\t\t{\r\n\t\t\tresult += '-';\r\n\t\t}\r\n\t\tresult += 'P';\r\n\t\tif (Jsonix.Util.Type.exists(value.years)) {\r\n\t\t\tresult += (value.years + 'Y');\r\n\t\t}\r\n\t\tif (Jsonix.Util.Type.exists(value.months)) {\r\n\t\t\tresult += (value.months + 'M');\r\n\t\t}\r\n\t\tif (Jsonix.Util.Type.exists(value.days)) {\r\n\t\t\tresult += (value.days + 'D');\r\n\t\t}\r\n\t\tif (Jsonix.Util.Type.exists(value.hours) || Jsonix.Util.Type.exists(value.minutes) || Jsonix.Util.Type.exists(value.seconds))\r\n\t\t{\r\n\t\t\tresult += 'T';\r\n\t\t\tif (Jsonix.Util.Type.exists(value.hours)) {\r\n\t\t\t\tresult += (value.hours + 'H');\r\n\t\t\t}\r\n\t\t\tif (Jsonix.Util.Type.exists(value.minutes)) {\r\n\t\t\t\tresult += (value.minutes + 'M');\r\n\t\t\t}\r\n\t\t\tif (Jsonix.Util.Type.exists(value.seconds)) {\r\n\t\t\t\tresult += (value.seconds + 'S');\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tparse : function(value, context, input, scope) {\r\n\t\tvar durationExpression = new RegExp(\"^\" + Jsonix.Schema.XSD.Duration.PATTERN + \"$\");\r\n\t\tvar results = value.match(durationExpression);\r\n\t\tif (results !== null) {\r\n\t\t\tvar empty = true;\r\n\t\t\tvar duration = {};\r\n\t\t\tif (results[1]) { duration.sign = -1; }\r\n\t\t\tif (results[3]) { duration.years = parseInt(results[3], 10); empty = false; }\r\n\t\t\tif (results[5]) { duration.months = parseInt(results[5], 10); empty = false; }\r\n\t\t\tif (results[7]) { duration.days = parseInt(results[7], 10); empty = false; }\r\n\t\t\tif (results[10]) { duration.hours = parseInt(results[10], 10); empty = false; }\r\n\t\t\tif (results[12]) { duration.minutes = parseInt(results[12], 10); empty = false; }\r\n\t\t\tif (results[14]) { duration.seconds = Number(results[14]); empty = false; }\r\n\t\t\treturn duration;\r\n\t\t} else {\r\n\t\t\tthrow new Error('Value [' + value + '] does not match the duration pattern.');\r\n\t\t}\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Duration'\r\n});\r\nJsonix.Schema.XSD.Duration.PATTERN = '(-)?P(([0-9]+)Y)?(([0-9]+)M)?(([0-9]+)D)?(T(([0-9]+)H)?(([0-9]+)M)?(([0-9]+(\\\\.[0-9]+)?)S)?)?';\r\nJsonix.Schema.XSD.Duration.INSTANCE = new Jsonix.Schema.XSD.Duration();\r\nJsonix.Schema.XSD.Duration.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Duration.INSTANCE);\r\nJsonix.Schema.XSD.DateTime = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'DateTime',\r\n\ttypeName : Jsonix.Schema.XSD.qname('dateTime'),\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseDateTime(value);\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printDateTime(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.DateTime'\r\n});\r\nJsonix.Schema.XSD.DateTime.INSTANCE = new Jsonix.Schema.XSD.DateTime();\r\nJsonix.Schema.XSD.DateTime.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.DateTime.INSTANCE);\r\n\r\nJsonix.Schema.XSD.DateTimeAsDate = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'DateTimeAsDate',\r\n\ttypeName : Jsonix.Schema.XSD.qname('dateTime'),\r\n\tparse : function(value, context, input, scope) {\r\n\t\tvar calendar = this.parseDateTime(value);\r\n\t\tvar date = new Date();\r\n\t\tdate.setFullYear(calendar.year);\r\n\t\tdate.setMonth(calendar.month - 1);\r\n\t\tdate.setDate(calendar.day);\r\n\t\tdate.setHours(calendar.hour);\r\n\t\tdate.setMinutes(calendar.minute);\r\n\t\tdate.setSeconds(calendar.second);\r\n\t\tif (Jsonix.Util.Type.isNumber(calendar.fractionalSecond)) {\r\n\t\t\tdate.setMilliseconds(Math.floor(1000 * calendar.fractionalSecond));\r\n\t\t}\r\n\t\tvar timezone;\r\n\t\tvar unknownTimezone;\r\n\t\tvar localTimezone = - date.getTimezoneOffset();\r\n\t\tif (Jsonix.Util.NumberUtils.isInteger(calendar.timezone))\r\n\t\t{\r\n\t\t\ttimezone = calendar.timezone;\r\n\t\t\tunknownTimezone = false;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Unknown timezone\r\n\t\t\ttimezone = localTimezone;\r\n\t\t\tunknownTimezone = true;\r\n\t\t}\r\n\t\t//\r\n\t\tvar result = new Date(date.getTime() + (60000 * (- timezone + localTimezone)));\r\n\t\tif (unknownTimezone)\r\n\t\t{\r\n\t\t\t// null denotes \"unknown timezone\"\r\n\t\t\tresult.originalTimezone = null;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tresult.originalTimezone = calendar.timezone;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureDate(value);\r\n\t\tvar timezone;\r\n\t\tvar localTimezone = - value.getTimezoneOffset();\r\n\t\tvar correctedValue;\r\n\t\t// If original time zone was unknown, print the given value without\r\n\t\t// the timezone\r\n\t\tif (value.originalTimezone === null)\r\n\t\t{\r\n\t\t\treturn this.printDateTime(new Jsonix.XML.Calendar({\r\n\t\t\t\tyear : value.getFullYear(),\r\n\t\t\t\tmonth : value.getMonth() + 1,\r\n\t\t\t\tday : value.getDate(),\r\n\t\t\t\thour : value.getHours(),\r\n\t\t\t\tminute : value.getMinutes(),\r\n\t\t\t\tsecond : value.getSeconds(),\r\n\t\t\t\tfractionalSecond : (value.getMilliseconds() / 1000)\r\n\t\t\t}));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// If original timezone was known, correct and print the value with the timezone\r\n\t\t\tif (Jsonix.Util.NumberUtils.isInteger(value.originalTimezone))\r\n\t\t\t{\r\n\t\t\t\ttimezone = value.originalTimezone;\r\n\t\t\t\tcorrectedValue = new Date(value.getTime() - (60000 * ( - timezone + localTimezone)));\r\n\t\t\t}\r\n\t\t\t// If original timezone was not specified, do not correct and use the local time zone\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttimezone = localTimezone;\r\n\t\t\t\tcorrectedValue = value;\r\n\t\t\t}\r\n\t\t\tvar x = this.printDateTime(new Jsonix.XML.Calendar({\r\n\t\t\t\tyear : correctedValue.getFullYear(),\r\n\t\t\t\tmonth : correctedValue.getMonth() + 1,\r\n\t\t\t\tday : correctedValue.getDate(),\r\n\t\t\t\thour : correctedValue.getHours(),\r\n\t\t\t\tminute : correctedValue.getMinutes(),\r\n\t\t\t\tsecond : correctedValue.getSeconds(),\r\n\t\t\t\tfractionalSecond : (correctedValue.getMilliseconds() / 1000),\r\n\t\t\t\ttimezone: timezone\r\n\t\t\t}));\r\n\t\t\treturn x;\r\n\t\t}\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isDate(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.DateTimeAsDate'\r\n});\r\nJsonix.Schema.XSD.DateTimeAsDate.INSTANCE = new Jsonix.Schema.XSD.DateTimeAsDate();\r\nJsonix.Schema.XSD.DateTimeAsDate.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.DateTimeAsDate.INSTANCE);\r\n\r\nJsonix.Schema.XSD.Time = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'Time',\r\n\ttypeName : Jsonix.Schema.XSD.qname('time'),\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseTime(value);\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printTime(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Time'\r\n});\r\nJsonix.Schema.XSD.Time.INSTANCE = new Jsonix.Schema.XSD.Time();\r\nJsonix.Schema.XSD.Time.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Time.INSTANCE);\r\nJsonix.Schema.XSD.TimeAsDate = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'TimeAsDate',\r\n\ttypeName : Jsonix.Schema.XSD.qname('time'),\r\n\tparse : function(value, context, input, scope) {\r\n\t\tvar calendar = this.parseTime(value);\r\n\t\tvar date = new Date();\r\n\t\tdate.setFullYear(1970);\r\n\t\tdate.setMonth(0);\r\n\t\tdate.setDate(1);\r\n\t\tdate.setHours(calendar.hour);\r\n\t\tdate.setMinutes(calendar.minute);\r\n\t\tdate.setSeconds(calendar.second);\r\n\t\tif (Jsonix.Util.Type.isNumber(calendar.fractionalSecond)) {\r\n\t\t\tdate.setMilliseconds(Math.floor(1000 * calendar.fractionalSecond));\r\n\t\t}\r\n\t\tvar timezone;\r\n\t\tvar unknownTimezone;\r\n\t\tvar localTimezone = - date.getTimezoneOffset();\r\n\t\tif (Jsonix.Util.NumberUtils.isInteger(calendar.timezone))\r\n\t\t{\r\n\t\t\ttimezone = calendar.timezone;\r\n\t\t\tunknownTimezone = false;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Unknown timezone\r\n\t\t\ttimezone = localTimezone;\r\n\t\t\tunknownTimezone = true;\r\n\t\t}\r\n\t\t//\r\n\t\tvar result = new Date(date.getTime() + (60000 * ( - timezone + localTimezone)));\r\n\t\tif (unknownTimezone)\r\n\t\t{\r\n\t\t\t// null denotes \"unknown timezone\"\r\n\t\t\tresult.originalTimezone = null;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tresult.originalTimezone = timezone;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureDate(value);\r\n\t\tvar time = value.getTime();\r\n\t\tif (time <= -86400000 && time >= 86400000) {\r\n\t\t\tthrow new Error('Invalid time [' + value + '].');\r\n\t\t}\r\n\t\t// Original timezone was unknown, just use current time, no timezone\r\n\t\tif (value.originalTimezone === null)\r\n\t\t{\r\n\t\t\treturn this.printTime(new Jsonix.XML.Calendar({\r\n\t\t\t\thour : value.getHours(),\r\n\t\t\t\tminute : value.getMinutes(),\r\n\t\t\t\tsecond : value.getSeconds(),\r\n\t\t\t\tfractionalSecond : (value.getMilliseconds() / 1000)\r\n\t\t\t}));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar correctedValue;\r\n\t\t\tvar timezone;\r\n\t\t\tvar localTimezone = - value.getTimezoneOffset();\r\n\t\t\tif (Jsonix.Util.NumberUtils.isInteger(value.originalTimezone))\r\n\t\t\t{\r\n\t\t\t\ttimezone = value.originalTimezone;\r\n\t\t\t\tcorrectedValue = new Date(value.getTime() - (60000 * ( - timezone + localTimezone)));\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttimezone = localTimezone;\r\n\t\t\t\tcorrectedValue = value;\r\n\t\t\t}\r\n\t\t\tvar correctedTime = correctedValue.getTime();\r\n\t\t\tif (correctedTime >= (- localTimezone * 60000)) {\r\n\t\t\t\treturn this.printTime(new Jsonix.XML.Calendar({\r\n\t\t\t\t\thour : correctedValue.getHours(),\r\n\t\t\t\t\tminute : correctedValue.getMinutes(),\r\n\t\t\t\t\tsecond : correctedValue.getSeconds(),\r\n\t\t\t\t\tfractionalSecond : (correctedValue.getMilliseconds() / 1000),\r\n\t\t\t\t\ttimezone: timezone\r\n\t\t\t\t}));\r\n\t\t\t} else {\r\n\t\t\t\tvar timezoneHours = Math.ceil(-correctedTime / 3600000);\r\n\t\t\t\t\r\n\t\t\t\tvar correctedTimeInSeconds = correctedValue.getSeconds() +\r\n\t\t\t\t\tcorrectedValue.getMinutes() * 60 +\r\n\t\t\t\t\tcorrectedValue.getHours() * 3600 +\r\n\t\t\t\t\ttimezoneHours * 3600 -\r\n\t\t\t\t\ttimezone * 60;\r\n\t\t\t\t\r\n\t\t\t\treturn this.printTime(new Jsonix.XML.Calendar({\r\n\t\t\t\t\thour : correctedTimeInSeconds % 86400,\r\n\t\t\t\t\tminute : correctedTimeInSeconds % 3600,\r\n\t\t\t\t\tsecond : correctedTimeInSeconds % 60,\r\n\t\t\t\t\tfractionalSecond : (correctedValue.getMilliseconds() / 1000),\r\n\t\t\t\t\ttimezone : timezoneHours * 60\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isDate(value) && value.getTime() > -86400000 && value.getTime() < 86400000;\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.TimeAsDate'\r\n});\r\nJsonix.Schema.XSD.TimeAsDate.INSTANCE = new Jsonix.Schema.XSD.TimeAsDate();\r\nJsonix.Schema.XSD.TimeAsDate.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.TimeAsDate.INSTANCE);\r\nJsonix.Schema.XSD.Date = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'Date',\r\n\ttypeName : Jsonix.Schema.XSD.qname('date'),\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseDate(value);\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printDate(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.Date'\r\n});\r\nJsonix.Schema.XSD.Date.INSTANCE = new Jsonix.Schema.XSD.Date();\r\nJsonix.Schema.XSD.Date.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.Date.INSTANCE);\r\nJsonix.Schema.XSD.DateAsDate = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'DateAsDate',\r\n\ttypeName : Jsonix.Schema.XSD.qname('date'),\r\n\tparse : function(value, context, input, scope) {\r\n\t\tvar calendar = this.parseDate(value);\r\n\t\tvar date = new Date();\r\n\t\tdate.setFullYear(calendar.year);\r\n\t\tdate.setMonth(calendar.month - 1);\r\n\t\tdate.setDate(calendar.day);\r\n\t\tdate.setHours(0);\r\n\t\tdate.setMinutes(0);\r\n\t\tdate.setSeconds(0);\r\n\t\tdate.setMilliseconds(0);\r\n\t\tif (Jsonix.Util.Type.isNumber(calendar.fractionalSecond)) {\r\n\t\t\tdate.setMilliseconds(Math.floor(1000 * calendar.fractionalSecond));\r\n\t\t}\r\n\t\tvar timezone;\r\n\t\tvar unknownTimezone;\r\n\t\tvar localTimezone = - date.getTimezoneOffset();\r\n\t\tif (Jsonix.Util.NumberUtils.isInteger(calendar.timezone))\r\n\t\t{\r\n\t\t\ttimezone = calendar.timezone;\r\n\t\t\tunknownTimezone = false;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Unknown timezone\r\n\t\t\ttimezone = localTimezone;\r\n\t\t\tunknownTimezone = true;\r\n\t\t}\r\n\t\t//\r\n\t\tvar result = new Date(date.getTime() + (60000 * ( - timezone + localTimezone)));\r\n\t\tif (unknownTimezone)\r\n\t\t{\r\n\t\t\t// null denotes \"unknown timezone\"\r\n\t\t\tresult.originalTimezone = null;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tresult.originalTimezone = timezone;\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\tJsonix.Util.Ensure.ensureDate(value);\r\n\t\tvar localDate = new Date(value.getTime());\r\n\t\tlocalDate.setHours(0);\r\n\t\tlocalDate.setMinutes(0);\r\n\t\tlocalDate.setSeconds(0);\r\n\t\tlocalDate.setMilliseconds(0);\r\n\t\t\r\n\t\t// Original timezone is unknown\r\n\t\tif (value.originalTimezone === null)\r\n\t\t{\r\n\t\t\treturn this.printDate(new Jsonix.XML.Calendar({\r\n\t\t\t\tyear : value.getFullYear(),\r\n\t\t\t\tmonth : value.getMonth() + 1,\r\n\t\t\t\tday : value.getDate()\r\n\t\t\t}));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// If original timezone was known, correct and print the value with the timezone\r\n\t\t\tif (Jsonix.Util.NumberUtils.isInteger(value.originalTimezone))\r\n\t\t\t{\r\n\t\t\t\tvar correctedValue = new Date(value.getTime() - (60000 * (- value.originalTimezone - value.getTimezoneOffset())));\r\n\t\t\t\treturn this.printDate(new Jsonix.XML.Calendar({\r\n\t\t\t\t\tyear : correctedValue.getFullYear(),\r\n\t\t\t\t\tmonth : correctedValue.getMonth() + 1,\r\n\t\t\t\t\tday : correctedValue.getDate(),\r\n\t\t\t\t\ttimezone : value.originalTimezone\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\t// If original timezone was not specified, do not correct and use the local time zone\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// We assume that the difference between the date value and local midnight\r\n\t\t\t\t// should be interpreted as a timezone offset.\r\n\t\t\t\t// In case there's no difference, we assume default/unknown timezone\r\n\t\t\t\tvar localTimezone = - value.getTime() + localDate.getTime();\r\n\t\t\t\tif (localTimezone === 0) {\r\n\t\t\t\t\treturn this.printDate(new Jsonix.XML.Calendar({\r\n\t\t\t\t\t\tyear : value.getFullYear(),\r\n\t\t\t\t\t\tmonth : value.getMonth() + 1,\r\n\t\t\t\t\t\tday : value.getDate()\r\n\t\t\t\t\t}));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar timezone = localTimezone - (60000 * value.getTimezoneOffset());\r\n\t\t\t\t\tif (timezone >= -43200000) {\r\n\t\t\t\t\t\treturn this.printDate(new Jsonix.XML.Calendar({\r\n\t\t\t\t\t\t\tyear : value.getFullYear(),\r\n\t\t\t\t\t\t\tmonth : value.getMonth() + 1,\r\n\t\t\t\t\t\t\tday : value.getDate(),\r\n\t\t\t\t\t\t\ttimezone : Math.floor(timezone / 60000)\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar nextDay = new Date(value.getTime() + 86400000);\r\n\t\t\t\t\t\treturn this.printDate(new Jsonix.XML.Calendar({\r\n\t\t\t\t\t\t\tyear : nextDay.getFullYear(),\r\n\t\t\t\t\t\t\tmonth : nextDay.getMonth() + 1,\r\n\t\t\t\t\t\t\tday : nextDay.getDate(),\r\n\t\t\t\t\t\t\ttimezone : (Math.floor(timezone / 60000) + 1440)\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tisInstance : function(value, context, scope) {\r\n\t\treturn Jsonix.Util.Type.isDate(value);\r\n\t},\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.DateAsDate'\r\n});\r\nJsonix.Schema.XSD.DateAsDate.INSTANCE = new Jsonix.Schema.XSD.DateAsDate();\r\nJsonix.Schema.XSD.DateAsDate.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.DateAsDate.INSTANCE);\r\nJsonix.Schema.XSD.GYearMonth = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'GYearMonth',\r\n\ttypeName : Jsonix.Schema.XSD.qname('gYearMonth'),\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.GYearMonth',\r\n\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseGYearMonth(value, context, input, scope);\r\n\t},\r\n\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printGYearMonth(value, context, output, scope);\r\n\t}\r\n\r\n});\r\nJsonix.Schema.XSD.GYearMonth.INSTANCE = new Jsonix.Schema.XSD.GYearMonth();\r\nJsonix.Schema.XSD.GYearMonth.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GYearMonth.INSTANCE);\r\nJsonix.Schema.XSD.GYear = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'GYear',\r\n\ttypeName : Jsonix.Schema.XSD.qname('gYear'),\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.GYear',\r\n\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseGYear(value, context, input, scope);\r\n\t},\r\n\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printGYear(value, context, output, scope);\r\n\t}\r\n});\r\nJsonix.Schema.XSD.GYear.INSTANCE = new Jsonix.Schema.XSD.GYear();\r\nJsonix.Schema.XSD.GYear.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GYear.INSTANCE);\r\nJsonix.Schema.XSD.GMonthDay = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'GMonthDay',\r\n\ttypeName : Jsonix.Schema.XSD.qname('gMonthDay'),\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.GMonthDay',\r\n\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseGMonthDay(value, context, input, scope);\r\n\t},\r\n\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printGMonthDay(value, context, output, scope);\r\n\t}\r\n});\r\nJsonix.Schema.XSD.GMonthDay.INSTANCE = new Jsonix.Schema.XSD.GMonthDay();\r\nJsonix.Schema.XSD.GMonthDay.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GMonthDay.INSTANCE);\r\nJsonix.Schema.XSD.GDay = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'GDay',\r\n\ttypeName : Jsonix.Schema.XSD.qname('gDay'),\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.GDay',\r\n\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseGDay(value, context, input, scope);\r\n\t},\r\n\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printGDay(value, context, output, scope);\r\n\t}\r\n\r\n});\r\nJsonix.Schema.XSD.GDay.INSTANCE = new Jsonix.Schema.XSD.GDay();\r\nJsonix.Schema.XSD.GDay.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GDay.INSTANCE);\r\nJsonix.Schema.XSD.GMonth = Jsonix.Class(Jsonix.Schema.XSD.Calendar, {\r\n\tname : 'GMonth',\r\n\ttypeName : Jsonix.Schema.XSD.qname('gMonth'),\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.GMonth',\r\n\tparse : function(value, context, input, scope) {\r\n\t\treturn this.parseGMonth(value, context, input, scope);\r\n\t},\r\n\tprint : function(value, context, output, scope) {\r\n\t\treturn this.printGMonth(value, context, output, scope);\r\n\t}\r\n});\r\nJsonix.Schema.XSD.GMonth.INSTANCE = new Jsonix.Schema.XSD.GMonth();\r\nJsonix.Schema.XSD.GMonth.INSTANCE.LIST = new Jsonix.Schema.XSD.List(Jsonix.Schema.XSD.GMonth.INSTANCE);\r\nJsonix.Schema.XSD.ID = Jsonix.Class(Jsonix.Schema.XSD.String, {\r\n\tname : 'ID',\r\n\ttypeName : Jsonix.Schema.XSD.qname('ID'),\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.ID'\r\n});\r\nJsonix.Schema.XSD.ID.INSTANCE = new Jsonix.Schema.XSD.ID();\r\nJsonix.Schema.XSD.ID.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.ID.INSTANCE);\r\nJsonix.Schema.XSD.IDREF = Jsonix.Class(Jsonix.Schema.XSD.String, {\r\n\tname : 'IDREF',\r\n\ttypeName : Jsonix.Schema.XSD.qname('IDREF'),\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.IDREF'\r\n});\r\nJsonix.Schema.XSD.IDREF.INSTANCE = new Jsonix.Schema.XSD.IDREF();\r\nJsonix.Schema.XSD.IDREF.INSTANCE.LIST = new Jsonix.Schema.XSD.List(\r\n\t\tJsonix.Schema.XSD.IDREF.INSTANCE);\r\nJsonix.Schema.XSD.IDREFS = Jsonix.Class(Jsonix.Schema.XSD.List, {\r\n\tname : 'IDREFS',\r\n\tinitialize : function() {\r\n\t\tJsonix.Schema.XSD.List.prototype.initialize.apply(this, [ Jsonix.Schema.XSD.IDREF.INSTANCE, Jsonix.Schema.XSD.qname('IDREFS'), ' ' ]);\r\n\t},\r\n\t// TODO Constraints\r\n\tCLASS_NAME : 'Jsonix.Schema.XSD.IDREFS'\r\n});\r\nJsonix.Schema.XSD.IDREFS.INSTANCE = new Jsonix.Schema.XSD.IDREFS();\r\nJsonix.Schema.XSI = {};\r\nJsonix.Schema.XSI.NAMESPACE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\r\nJsonix.Schema.XSI.PREFIX = 'xsi';\r\nJsonix.Schema.XSI.TYPE = 'type';\r\nJsonix.Schema.XSI.NIL = 'nil';\r\nJsonix.Schema.XSI.qname = function(localPart) {\r\n\tJsonix.Util.Ensure.ensureString(localPart);\r\n\treturn new Jsonix.XML.QName(Jsonix.Schema.XSI.NAMESPACE_URI, localPart,\r\n\t\t\tJsonix.Schema.XSI.PREFIX);\r\n};\r\nJsonix.Schema.XSI.TYPE_QNAME = Jsonix.Schema.XSI.qname(Jsonix.Schema.XSI.TYPE);\r\n\r\nJsonix.Context = Jsonix\r\n\t\t.Class(Jsonix.Mapping.Styled, {\r\n\t\t\tmodules : [],\r\n\t\t\ttypeInfos : null,\r\n\t\t\ttypeNameKeyToTypeInfo : null,\r\n\t\t\telementInfos : null,\r\n\t\t\toptions : null,\r\n\t\t\tsubstitutionMembersMap : null,\r\n\t\t\tscopedElementInfosMap : null,\r\n\t\t\tsupportXsiType : true,\r\n\t\t\tinitialize : function(mappings, options) {\r\n\t\t\t\tJsonix.Mapping.Styled.prototype.initialize.apply(this, [options]);\r\n\t\t\t\tthis.modules = [];\r\n\t\t\t\tthis.elementInfos = [];\r\n\t\t\t\tthis.typeInfos = {};\r\n\t\t\t\tthis.typeNameKeyToTypeInfo = {};\r\n\t\t\t\tthis.registerBuiltinTypeInfos();\r\n\t\t\t\tthis.namespacePrefixes = {};\r\n\t\t\t\tthis.prefixNamespaces = {};\r\n\t\t\t\tthis.substitutionMembersMap = {};\r\n\t\t\t\tthis.scopedElementInfosMap = {};\r\n\r\n\t\t\t\t// Initialize options\r\n\t\t\t\tif (Jsonix.Util.Type.exists(options)) {\r\n\t\t\t\t\tJsonix.Util.Ensure.ensureObject(options);\r\n\t\t\t\t\tif (Jsonix.Util.Type\r\n\t\t\t\t\t\t\t.isObject(options.namespacePrefixes)) {\r\n\t\t\t\t\t\tthis.namespacePrefixes = \r\n\t\t\t\t\t\t\tJsonix.Util.Type.cloneObject(options.namespacePrefixes, {});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Jsonix.Util.Type\r\n\t\t\t\t\t\t\t.isBoolean(options.supportXsiType)) {\r\n\t\t\t\t\t\tthis.supportXsiType = options.supportXsiType; \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Initialize prefix/namespace mapping\r\n\t\t\t\tfor (var ns in this.namespacePrefixes)\r\n\t\t\t\t{\r\n\t\t\t\t\tif (this.namespacePrefixes.hasOwnProperty(ns))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tp = this.namespacePrefixes[ns];\r\n\t\t\t\t\t\tthis.prefixNamespaces[p] = ns;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// Initialize modules\r\n\t\t\t\tif (Jsonix.Util.Type.exists(mappings)) {\r\n\t\t\t\t\tJsonix.Util.Ensure.ensureArray(mappings);\r\n\t\t\t\t\t// Initialize modules\r\n\t\t\t\t\tvar index, mapping, module;\r\n\t\t\t\t\tfor (index = 0; index < mappings.length; index++) {\r\n\t\t\t\t\t\tmapping = mappings[index];\r\n\t\t\t\t\t\tmodule = this.createModule(mapping);\r\n\t\t\t\t\t\tthis.modules[index] = module;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.processModules();\r\n\t\t\t},\r\n\t\t\tcreateModule : function(mapping) {\r\n\t\t\t\tvar module;\r\n\t\t\t\tif (mapping instanceof this.mappingStyle.module) {\r\n\t\t\t\t\tmodule = mapping;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmapping = Jsonix.Util.Type.cloneObject(mapping);\r\n\t\t\t\t\tmodule = new this.mappingStyle.module(mapping, \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmappingStyle : this.mappingStyle\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn module;\r\n\t\t\t},\r\n\t\t\tregisterBuiltinTypeInfos : function() {\r\n\t\t\t\tfor ( var index = 0; index < this.builtinTypeInfos.length; index++) {\r\n\t\t\t\t\tthis.registerTypeInfo(this.builtinTypeInfos[index]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tprocessModules : function() {\r\n\t\t\t\tvar index, module;\r\n\t\t\t\tfor (index = 0; index < this.modules.length; index++) {\r\n\t\t\t\t\tmodule = this.modules[index];\r\n\t\t\t\t\tmodule.registerTypeInfos(this);\r\n\t\t\t\t}\r\n\t\t\t\tfor (index = 0; index < this.modules.length; index++) {\r\n\t\t\t\t\tmodule = this.modules[index];\r\n\t\t\t\t\tmodule.registerElementInfos(this);\r\n\t\t\t\t}\r\n\t\t\t\tfor (index = 0; index < this.modules.length; index++) {\r\n\t\t\t\t\tmodule = this.modules[index];\r\n\t\t\t\t\tmodule.buildTypeInfos(this);\r\n\t\t\t\t}\r\n\t\t\t\tfor (index = 0; index < this.modules.length; index++) {\r\n\t\t\t\t\tmodule = this.modules[index];\r\n\t\t\t\t\tmodule.buildElementInfos(this);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tregisterTypeInfo : function(typeInfo) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureObject(typeInfo);\r\n\t\t\t\tvar n = typeInfo.name||typeInfo.n||null;\r\n\t\t\t\tJsonix.Util.Ensure.ensureString(n);\r\n\t\t\t\tthis.typeInfos[n] = typeInfo;\r\n\t\t\t\tif (typeInfo.typeName && typeInfo.typeName.key)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.typeNameKeyToTypeInfo[typeInfo.typeName.key] = typeInfo;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tresolveTypeInfo : function(mapping, module) {\r\n\t\t\t\tif (!Jsonix.Util.Type.exists(mapping)) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else if (mapping instanceof Jsonix.Model.TypeInfo) {\r\n\t\t\t\t\treturn mapping;\r\n\t\t\t\t} else if (Jsonix.Util.Type.isString(mapping)) {\r\n\t\t\t\t\tvar typeInfoName;\r\n\t\t\t\t\t// If mapping starts with '.' consider it to be a local type name in this module\r\n\t\t\t\t\tif (mapping.length > 0 && mapping.charAt(0) === '.')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar n = module.name || module.n || undefined;\r\n\t\t\t\t\t\tJsonix.Util.Ensure.ensureObject(module, 'Type info mapping can only be resolved if module is provided.');\r\n\t\t\t\t\t\tJsonix.Util.Ensure.ensureString(n, 'Type info mapping can only be resolved if module name is provided.');\r\n\t\t\t\t\t\ttypeInfoName = n + mapping;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttypeInfoName = mapping;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.typeInfos[typeInfoName]) {\r\n\t\t\t\t\t\tthrow new Error('Type info [' + typeInfoName + '] is not known in this context.');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn this.typeInfos[typeInfoName];\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tJsonix.Util.Ensure.ensureObject(module, 'Type info mapping can only be resolved if module is provided.');\r\n\t\t\t\t\tvar typeInfo = module.createTypeInfo(mapping);\r\n\t\t\t\t\ttypeInfo.build(this, module);\r\n\t\t\t\t\treturn typeInfo;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tregisterElementInfo : function(elementInfo, module) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureObject(elementInfo);\r\n\t\t\t\tthis.elementInfos.push(elementInfo);\r\n\r\n\t\t\t\tif (Jsonix.Util.Type.exists(elementInfo.substitutionHead)) {\r\n\t\t\t\t\tvar substitutionHead = elementInfo.substitutionHead;\r\n\t\t\t\t\tvar substitutionHeadKey = substitutionHead.key;\r\n\t\t\t\t\tvar substitutionMembers = this.substitutionMembersMap[substitutionHeadKey];\r\n\r\n\t\t\t\t\tif (!Jsonix.Util.Type.isArray(substitutionMembers)) {\r\n\t\t\t\t\t\tsubstitutionMembers = [];\r\n\t\t\t\t\t\tthis.substitutionMembersMap[substitutionHeadKey] = substitutionMembers;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubstitutionMembers.push(elementInfo);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar scopeKey;\r\n\t\t\t\tif (Jsonix.Util.Type.exists(elementInfo.scope)) {\r\n\t\t\t\t\tscopeKey = this.resolveTypeInfo(elementInfo.scope, module).name;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscopeKey = '##global';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar scopedElementInfos = this.scopedElementInfosMap[scopeKey];\r\n\r\n\t\t\t\tif (!Jsonix.Util.Type.isObject(scopedElementInfos)) {\r\n\t\t\t\t\tscopedElementInfos = {};\r\n\t\t\t\t\tthis.scopedElementInfosMap[scopeKey] = scopedElementInfos;\r\n\t\t\t\t}\r\n\t\t\t\tscopedElementInfos[elementInfo.elementName.key] = elementInfo;\r\n\r\n\t\t\t},\r\n\t\t\tgetTypeInfoByValue : function(value)\r\n\t\t\t{\r\n\t\t\t\tif (!Jsonix.Util.Type.exists(value))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t\tif (Jsonix.Util.Type.isObject(value))\r\n\t\t\t\t{\r\n\t\t\t\t\tvar typeName = value.TYPE_NAME;\r\n\t\t\t\t\tif (Jsonix.Util.Type.isString(typeName))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar typeInfoByName = this.getTypeInfoByName(typeName);\r\n\t\t\t\t\t\tif (typeInfoByName)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\treturn typeInfoByName;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined;\r\n\t\t\t},\r\n\t\t\t// TODO public API\r\n\t\t\tgetTypeInfoByName : function(name) {\r\n\t\t\t\treturn this.typeInfos[name];\r\n\t\t\t},\r\n\t\t\tgetTypeInfoByTypeName : function(typeName) {\r\n\t\t\t\tvar tn = Jsonix.XML.QName.fromObjectOrString(typeName, this);\r\n\t\t\t\treturn this.typeNameKeyToTypeInfo[tn.key];\r\n\t\t\t},\r\n\t\t\tgetTypeInfoByTypeNameKey : function(typeNameKey) {\r\n\t\t\t\treturn this.typeNameKeyToTypeInfo[typeNameKey];\r\n\t\t\t},\r\n\t\t\tgetElementInfo : function(name, scope) {\r\n\t\t\t\tif (Jsonix.Util.Type.exists(scope)) {\r\n\t\t\t\t\tvar scopeKey = scope.name;\r\n\t\t\t\t\tvar scopedElementInfos = this.scopedElementInfosMap[scopeKey];\r\n\t\t\t\t\tif (Jsonix.Util.Type.exists(scopedElementInfos)) {\r\n\t\t\t\t\t\tvar scopedElementInfo = scopedElementInfos[name.key];\r\n\t\t\t\t\t\tif (Jsonix.Util.Type.exists(scopedElementInfo)) {\r\n\t\t\t\t\t\t\treturn scopedElementInfo;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar globalScopeKey = '##global';\r\n\t\t\t\tvar globalScopedElementInfos = this.scopedElementInfosMap[globalScopeKey];\r\n\t\t\t\tif (Jsonix.Util.Type.exists(globalScopedElementInfos)) {\r\n\t\t\t\t\tvar globalScopedElementInfo = globalScopedElementInfos[name.key];\r\n\t\t\t\t\tif (Jsonix.Util.Type.exists(globalScopedElementInfo)) {\r\n\t\t\t\t\t\treturn globalScopedElementInfo;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t\t//\r\n\t\t\t\t// throw new Error(\"Element [\" + name.key\r\n\t\t\t\t// + \"] could not be found in the given context.\");\r\n\t\t\t},\r\n\t\t\tgetSubstitutionMembers : function(name) {\r\n\t\t\t\treturn this.substitutionMembersMap[Jsonix.XML.QName\r\n\t\t\t\t\t\t.fromObject(name).key];\r\n\t\t\t},\r\n\t\t\tcreateMarshaller : function() {\r\n\t\t\t\treturn new this.mappingStyle.marshaller(this);\r\n\t\t\t},\r\n\t\t\tcreateUnmarshaller : function() {\r\n\t\t\t\treturn new this.mappingStyle.unmarshaller(this);\r\n\t\t\t},\r\n\t\t\tgetNamespaceURI : function(prefix) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureString(prefix);\r\n\t\t\t\treturn this.prefixNamespaces[prefix];\r\n\t\t\t},\r\n\t\t\tgetPrefix : function(namespaceURI, defaultPrefix) {\r\n\t\t\t\tJsonix.Util.Ensure.ensureString(namespaceURI);\r\n\t\t\t\tvar prefix = this.namespacePrefixes[namespaceURI];\r\n\t\t\t\tif (Jsonix.Util.Type.isString(prefix))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn prefix;\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\treturn defaultPrefix;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * Builtin type infos.\r\n\t\t\t */\r\n\t\t\tbuiltinTypeInfos : [\r\n\t\t\t        Jsonix.Schema.XSD.AnyType.INSTANCE,\r\n\t\t\t        Jsonix.Schema.XSD.AnySimpleType.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.AnyURI.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Base64Binary.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Boolean.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Byte.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Calendar.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.DateAsDate.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Date.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.DateTimeAsDate.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.DateTime.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Decimal.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Double.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Duration.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Float.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.GDay.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.GMonth.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.GMonthDay.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.GYear.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.GYearMonth.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.HexBinary.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.ID.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.IDREF.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.IDREFS.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Int.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Integer.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Language.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Long.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Name.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.NCName.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.NegativeInteger.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.NMToken.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.NMTokens.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.NonNegativeInteger.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.NonPositiveInteger.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.NormalizedString.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Number.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.PositiveInteger.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.QName.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Short.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.String.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Strings.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.TimeAsDate.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Time.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.Token.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.UnsignedByte.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.UnsignedInt.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.UnsignedLong.INSTANCE,\r\n\t\t\t\t\tJsonix.Schema.XSD.UnsignedShort.INSTANCE ],\r\n\t\t\tCLASS_NAME : 'Jsonix.Context'\r\n\t\t});\r\n\t// Complete Jsonix script is included above\r\n\treturn { Jsonix: Jsonix };\r\n};\r\n\r\n// If the require function exists ...\r\nif (typeof require === 'function') {\r\n\t// ... but the define function does not exists\r\n\tif (typeof define !== 'function') {\r\n\t\tif (!process.browser) {\r\n\t\t\t// Load the define function via amdefine\r\n\t\t\tdefine = require('amdefine')(module);\r\n\t\t\t// Require xmldom, xmlhttprequest and fs\r\n\t\t\tdefine([\"xmldom\", \"xmlhttprequest\", \"fs\"], _jsonix_factory);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// We're probably in browser, maybe browserify\r\n\t\t\t// Do not require xmldom, xmlhttprequest as they'r provided by the browser\r\n\t\t\t// Do not require fs since file system is not available anyway\r\n\t\t\tdefine([], _jsonix_factory);\r\n\t\t}\r\n\t}\r\n\telse {\r\n\t\t// Otherwise assume we're in the browser/RequireJS environment\r\n\t\t// Load the module without xmldom and xmlhttprequests dependencies\r\n\t\tdefine([], _jsonix_factory);\r\n\t}\r\n}\r\n// If the require function does not exists, we're not in Node.js and therefore in browser environment\r\nelse\r\n{\r\n\t// Just call the factory and set Jsonix as global.\r\n\tvar Jsonix = _jsonix_factory().Jsonix;\r\n}\r\n","var scesim_Module_Factory = function () {\n  var scesim = {\n    name: 'scesim',\n    typeInfos: [{\n        localName: 'ScenarioType',\n        propertyInfos: [{\n            name: 'factMappingValues',\n            required: true,\n            elementName: {\n              localPart: 'factMappingValues'\n            },\n            typeInfo: '.FactMappingValuesType'\n          }]\n      }, {\n        localName: 'SimulationType',\n        typeName: 'simulationType',\n        propertyInfos: [{\n            name: 'simulationDescriptor',\n            required: true,\n            elementName: {\n              localPart: 'simulationDescriptor'\n            },\n            typeInfo: '.SimulationDescriptorType'\n          }, {\n            name: 'scenarios',\n            required: true,\n            elementName: {\n              localPart: 'scenarios'\n            },\n            typeInfo: '.ScenariosType'\n          }]\n      }, {\n        localName: 'WrappedImportsType',\n        typeName: 'wrappedImportsType',\n        propertyInfos: [{\n            name: '_import',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'Import'\n            },\n            typeInfo: '.ImportType'\n          }]\n      }, {\n        localName: 'ExpressionElementType',\n        propertyInfos: [{\n            name: 'step',\n            required: true,\n            elementName: {\n              localPart: 'step'\n            }\n          }]\n      }, {\n        localName: 'GenericTypes',\n        typeName: 'genericTypes',\n        propertyInfos: [{\n            name: 'string',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'string'\n            }\n          }]\n      }, {\n        localName: 'FactMappingType',\n        propertyInfos: [{\n            name: 'expressionElements',\n            required: true,\n            elementName: {\n              localPart: 'expressionElements'\n            },\n            typeInfo: '.ExpressionElementsType'\n          }, {\n            name: 'expressionIdentifier',\n            required: true,\n            elementName: {\n              localPart: 'expressionIdentifier'\n            },\n            typeInfo: '.ExpressionIdentifierType'\n          }, {\n            name: 'factIdentifier',\n            required: true,\n            elementName: {\n              localPart: 'factIdentifier'\n            },\n            typeInfo: '.FactIdentifierType'\n          }, {\n            name: 'className',\n            required: true,\n            elementName: {\n              localPart: 'className'\n            }\n          }, {\n            name: 'factAlias',\n            required: true,\n            elementName: {\n              localPart: 'factAlias'\n            }\n          }, {\n            name: 'expressionAlias',\n            elementName: {\n              localPart: 'expressionAlias'\n            }\n          }, {\n            name: 'genericTypes',\n            required: true,\n            elementName: {\n              localPart: 'genericTypes'\n            },\n            typeInfo: '.GenericTypes'\n          }]\n      }, {\n        localName: 'FactMappingValuesType',\n        typeName: 'factMappingValuesType',\n        propertyInfos: [{\n            name: 'factMappingValue',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'FactMappingValue'\n            },\n            typeInfo: '.FactMappingValueType'\n          }]\n      }, {\n        localName: 'ScenarioSimulationModelType',\n        propertyInfos: [{\n            name: 'simulation',\n            required: true,\n            elementName: {\n              localPart: 'simulation'\n            },\n            typeInfo: '.SimulationType'\n          }, {\n            name: 'imports',\n            required: true,\n            elementName: {\n              localPart: 'imports'\n            },\n            typeInfo: '.ImportsType'\n          }, {\n            name: 'version',\n            attributeName: {\n              localPart: 'version'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'FactMappingsType',\n        typeName: 'factMappingsType',\n        propertyInfos: [{\n            name: 'factMapping',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'FactMapping'\n            },\n            typeInfo: '.FactMappingType'\n          }]\n      }, {\n        localName: 'FactIdentifierType',\n        typeName: 'factIdentifierType',\n        propertyInfos: [{\n            name: 'name',\n            elementName: {\n              localPart: 'name'\n            }\n          }, {\n            name: 'className',\n            elementName: {\n              localPart: 'className'\n            }\n          }]\n      }, {\n        localName: 'ScenariosType',\n        typeName: 'scenariosType',\n        propertyInfos: [{\n            name: 'scenario',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'Scenario'\n            },\n            typeInfo: '.ScenarioType'\n          }]\n      }, {\n        localName: 'RawValueType',\n        typeName: 'rawValueType',\n        propertyInfos: [{\n            name: 'value',\n            type: 'value'\n          }, {\n            name: 'clazz',\n            attributeName: {\n              localPart: 'class'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'SimulationDescriptorType',\n        typeName: 'simulationDescriptorType',\n        propertyInfos: [{\n            name: 'factMappings',\n            elementName: {\n              localPart: 'factMappings'\n            },\n            typeInfo: '.FactMappingsType'\n          }, {\n            name: 'dmoSession',\n            elementName: {\n              localPart: 'dmoSession'\n            }\n          }, {\n            name: 'dmnFilePath',\n            elementName: {\n              localPart: 'dmnFilePath'\n            }\n          }, {\n            name: 'type',\n            elementName: {\n              localPart: 'type'\n            }\n          }, {\n            name: 'fileName',\n            elementName: {\n              localPart: 'fileName'\n            }\n          }, {\n            name: 'kieSession',\n            elementName: {\n              localPart: 'kieSession'\n            }\n          }, {\n            name: 'kieBase',\n            elementName: {\n              localPart: 'kieBase'\n            }\n          }, {\n            name: 'ruleFlowGroup',\n            elementName: {\n              localPart: 'ruleFlowGroup'\n            }\n          }, {\n            name: 'dmnNamespace',\n            elementName: {\n              localPart: 'dmnNamespace'\n            }\n          }, {\n            name: 'dmnName',\n            elementName: {\n              localPart: 'dmnName'\n            }\n          }, {\n            name: 'skipFromBuild',\n            elementName: {\n              localPart: 'skipFromBuild'\n            },\n            typeInfo: 'Boolean'\n          }]\n      }, {\n        localName: 'ExpressionElementsType',\n        typeName: 'expressionElementsType',\n        propertyInfos: [{\n            name: 'expressionElement',\n            required: true,\n            collection: true,\n            elementName: {\n              localPart: 'ExpressionElement'\n            },\n            typeInfo: '.ExpressionElementType'\n          }]\n      }, {\n        localName: 'FactMappingValueType',\n        propertyInfos: [{\n            name: 'factIdentifier',\n            required: true,\n            elementName: {\n              localPart: 'factIdentifier'\n            },\n            typeInfo: '.FactIdentifierType'\n          }, {\n            name: 'expressionIdentifier',\n            required: true,\n            elementName: {\n              localPart: 'expressionIdentifier'\n            },\n            typeInfo: '.ExpressionIdentifierType'\n          }, {\n            name: 'rawValue',\n            elementName: {\n              localPart: 'rawValue'\n            },\n            typeInfo: '.RawValueType'\n          }]\n      }, {\n        localName: 'ExpressionIdentifierType',\n        typeName: 'expressionIdentifierType',\n        propertyInfos: [{\n            name: 'name',\n            elementName: {\n              localPart: 'name'\n            }\n          }, {\n            name: 'type',\n            elementName: {\n              localPart: 'type'\n            }\n          }]\n      }, {\n        localName: 'ImportType',\n        propertyInfos: [{\n            name: 'type',\n            required: true,\n            elementName: {\n              localPart: 'type'\n            }\n          }]\n      }, {\n        localName: 'ImportsType',\n        typeName: 'importsType',\n        propertyInfos: [{\n            name: 'imports',\n            elementName: {\n              localPart: 'imports'\n            },\n            typeInfo: '.WrappedImportsType'\n          }]\n      }],\n    elementInfos: [{\n        typeInfo: '.ScenarioSimulationModelType',\n        elementName: {\n          localPart: 'ScenarioSimulationModel'\n        }\n      }]\n  };\n  return {\n    scesim: scesim\n  };\n};\nif (typeof define === 'function' && define.amd) {\n  define([], scesim_Module_Factory);\n}\nelse {\n  var scesim_Module = scesim_Module_Factory();\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports.scesim = scesim_Module.scesim;\n  }\n  else {\n    var scesim = scesim_Module.scesim;\n  }\n}","var dmn_Module_Factory = function () {\n  var dmn = {\n    name: 'dmn',\n    defaultElementNamespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/MODEL\\/',\n    typeInfos: [{\n        localName: 'TBusinessKnowledgeModel',\n        typeName: 'tBusinessKnowledgeModel',\n        baseTypeInfo: '.TInvocable',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'encapsulatedLogic',\n            typeInfo: '.TFunctionDefinition'\n          }, {\n            name: 'knowledgeRequirement',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TKnowledgeRequirement'\n          }, {\n            name: 'authorityRequirement',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TAuthorityRequirement'\n          }]\n      }, {\n        localName: 'DMNStyle',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/',\n          localPart: 'DMNStyle'\n        },\n        baseTypeInfo: '.Style',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'fillColor',\n            elementName: {\n              localPart: 'FillColor',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.Color'\n          }, {\n            name: 'strokeColor',\n            elementName: {\n              localPart: 'StrokeColor',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.Color'\n          }, {\n            name: 'fontColor',\n            elementName: {\n              localPart: 'FontColor',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.Color'\n          }, {\n            name: 'fontFamily',\n            attributeName: {\n              localPart: 'fontFamily'\n            },\n            type: 'attribute'\n          }, {\n            name: 'fontSize',\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'fontSize'\n            },\n            type: 'attribute'\n          }, {\n            name: 'fontItalic',\n            typeInfo: 'Boolean',\n            attributeName: {\n              localPart: 'fontItalic'\n            },\n            type: 'attribute'\n          }, {\n            name: 'fontBold',\n            typeInfo: 'Boolean',\n            attributeName: {\n              localPart: 'fontBold'\n            },\n            type: 'attribute'\n          }, {\n            name: 'fontUnderline',\n            typeInfo: 'Boolean',\n            attributeName: {\n              localPart: 'fontUnderline'\n            },\n            type: 'attribute'\n          }, {\n            name: 'fontStrikeThrough',\n            typeInfo: 'Boolean',\n            attributeName: {\n              localPart: 'fontStrikeThrough'\n            },\n            type: 'attribute'\n          }, {\n            name: 'labelHorizontalAlignement',\n            typeInfo: '.AlignmentKind',\n            attributeName: {\n              localPart: 'labelHorizontalAlignement'\n            },\n            type: 'attribute'\n          }, {\n            name: 'labelVerticalAlignment',\n            typeInfo: '.AlignmentKind',\n            attributeName: {\n              localPart: 'labelVerticalAlignment'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'DMNShape',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/',\n          localPart: 'DMNShape'\n        },\n        baseTypeInfo: '.Shape',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'dmnLabel',\n            elementName: {\n              localPart: 'DMNLabel',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.DMNLabel'\n          }, {\n            name: 'dmnDecisionServiceDividerLine',\n            elementName: {\n              localPart: 'DMNDecisionServiceDividerLine',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.DMNDecisionServiceDividerLine'\n          }, {\n            name: 'dmnElementRef',\n            required: true,\n            typeInfo: 'QName',\n            attributeName: {\n              localPart: 'dmnElementRef'\n            },\n            type: 'attribute'\n          }, {\n            name: 'isListedInputData',\n            typeInfo: 'Boolean',\n            attributeName: {\n              localPart: 'isListedInputData'\n            },\n            type: 'attribute'\n          }, {\n            name: 'isCollapsed',\n            typeInfo: 'Boolean',\n            attributeName: {\n              localPart: 'isCollapsed'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TOutputClause',\n        typeName: 'tOutputClause',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'outputValues',\n            typeInfo: '.TUnaryTests'\n          }, {\n            name: 'defaultOutputEntry',\n            typeInfo: '.TLiteralExpression'\n          }, {\n            name: 'name',\n            attributeName: {\n              localPart: 'name'\n            },\n            type: 'attribute'\n          }, {\n            name: 'typeRef',\n            attributeName: {\n              localPart: 'typeRef'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'Color',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/',\n          localPart: 'Color'\n        },\n        propertyInfos: [{\n            name: 'red',\n            required: true,\n            typeInfo: 'Int',\n            attributeName: {\n              localPart: 'red'\n            },\n            type: 'attribute'\n          }, {\n            name: 'green',\n            required: true,\n            typeInfo: 'Int',\n            attributeName: {\n              localPart: 'green'\n            },\n            type: 'attribute'\n          }, {\n            name: 'blue',\n            required: true,\n            typeInfo: 'Int',\n            attributeName: {\n              localPart: 'blue'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'DMNLabel',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/',\n          localPart: 'DMNLabel'\n        },\n        baseTypeInfo: '.Shape',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'text',\n            elementName: {\n              localPart: 'Text',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            }\n          }]\n      }, {\n        localName: 'TInvocable',\n        typeName: 'tInvocable',\n        baseTypeInfo: '.TDRGElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'variable',\n            typeInfo: '.TInformationItem'\n          }]\n      }, {\n        localName: 'TTextAnnotation',\n        typeName: 'tTextAnnotation',\n        baseTypeInfo: '.TArtifact',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'text'\n          }, {\n            name: 'textFormat',\n            attributeName: {\n              localPart: 'textFormat'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TOrganizationUnit',\n        typeName: 'tOrganizationUnit',\n        baseTypeInfo: '.TBusinessContextElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'decisionMade',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'decisionOwned',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }]\n      }, {\n        localName: 'TBusinessContextElement',\n        typeName: 'tBusinessContextElement',\n        baseTypeInfo: '.TNamedElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'uri',\n            attributeName: {\n              localPart: 'URI'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TPerformanceIndicator',\n        typeName: 'tPerformanceIndicator',\n        baseTypeInfo: '.TBusinessContextElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'impactingDecision',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }]\n      }, {\n        localName: 'TFunctionDefinition',\n        typeName: 'tFunctionDefinition',\n        baseTypeInfo: '.TExpression',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'formalParameter',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TInformationItem'\n          }, {\n            name: 'expression',\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TExpression',\n            type: 'elementRef'\n          }, {\n            name: 'kind',\n            typeInfo: '.TFunctionKind',\n            attributeName: {\n              localPart: 'kind'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TLiteralExpression',\n        typeName: 'tLiteralExpression',\n        baseTypeInfo: '.TExpression',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'text',\n            required: true\n          }, {\n            name: 'importedValues',\n            required: true,\n            typeInfo: '.TImportedValues'\n          }, {\n            name: 'expressionLanguage',\n            attributeName: {\n              localPart: 'expressionLanguage'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TInvocation',\n        typeName: 'tInvocation',\n        baseTypeInfo: '.TExpression',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'expression',\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TExpression',\n            type: 'elementRef'\n          }, {\n            name: 'binding',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TBinding'\n          }]\n      }, {\n        localName: 'DMNDiagram',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/',\n          localPart: 'DMNDiagram'\n        },\n        baseTypeInfo: '.Diagram',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'size',\n            elementName: {\n              localPart: 'Size',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.Dimension'\n          }, {\n            name: 'dmnDiagramElement',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            allowDom: false,\n            elementName: {\n              localPart: 'DMNDiagramElement',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.DiagramElement',\n            type: 'elementRef'\n          }]\n      }, {\n        localName: 'TExpression',\n        typeName: 'tExpression',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'typeRef',\n            attributeName: {\n              localPart: 'typeRef'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'DiagramElement.Extension',\n        typeName: null,\n        propertyInfos: [{\n            name: 'any',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            type: 'anyElement'\n          }]\n      }, {\n        localName: 'TUnaryTests',\n        typeName: 'tUnaryTests',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'text',\n            required: true\n          }, {\n            name: 'expressionLanguage',\n            attributeName: {\n              localPart: 'expressionLanguage'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'Point',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/',\n          localPart: 'Point'\n        },\n        propertyInfos: [{\n            name: 'x',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'x'\n            },\n            type: 'attribute'\n          }, {\n            name: 'y',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'y'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'Edge',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/',\n          localPart: 'Edge'\n        },\n        baseTypeInfo: '.DiagramElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'waypoint',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'waypoint',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/'\n            },\n            typeInfo: '.Point'\n          }]\n      }, {\n        localName: 'TDefinitions',\n        typeName: 'tDefinitions',\n        baseTypeInfo: '.TNamedElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: '_import',\n            minOccurs: 0,\n            collection: true,\n            elementName: 'import',\n            typeInfo: '.TImport'\n          }, {\n            name: 'itemDefinition',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TItemDefinition'\n          }, {\n            name: 'drgElement',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TDRGElement',\n            type: 'elementRef'\n          }, {\n            name: 'artifact',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TArtifact',\n            type: 'elementRef'\n          }, {\n            name: 'elementCollection',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TElementCollection'\n          }, {\n            name: 'businessContextElement',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TBusinessContextElement',\n            type: 'elementRef'\n          }, {\n            name: 'dmndi',\n            elementName: {\n              localPart: 'DMNDI',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.DMNDI'\n          }, {\n            name: 'expressionLanguage',\n            attributeName: {\n              localPart: 'expressionLanguage'\n            },\n            type: 'attribute'\n          }, {\n            name: 'typeLanguage',\n            attributeName: {\n              localPart: 'typeLanguage'\n            },\n            type: 'attribute'\n          }, {\n            name: 'namespace',\n            required: true,\n            attributeName: {\n              localPart: 'namespace'\n            },\n            type: 'attribute'\n          }, {\n            name: 'exporter',\n            attributeName: {\n              localPart: 'exporter'\n            },\n            type: 'attribute'\n          }, {\n            name: 'exporterVersion',\n            attributeName: {\n              localPart: 'exporterVersion'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'Bounds',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/',\n          localPart: 'Bounds'\n        },\n        propertyInfos: [{\n            name: 'x',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'x'\n            },\n            type: 'attribute'\n          }, {\n            name: 'y',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'y'\n            },\n            type: 'attribute'\n          }, {\n            name: 'width',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'width'\n            },\n            type: 'attribute'\n          }, {\n            name: 'height',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'height'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TDecisionService',\n        typeName: 'tDecisionService',\n        baseTypeInfo: '.TInvocable',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'outputDecision',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'encapsulatedDecision',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'inputDecision',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'inputData',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }]\n      }, {\n        localName: 'TKnowledgeRequirement',\n        typeName: 'tKnowledgeRequirement',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'requiredKnowledge',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }]\n      }, {\n        localName: 'TItemDefinition',\n        typeName: 'tItemDefinition',\n        baseTypeInfo: '.TNamedElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'typeRef',\n            required: true\n          }, {\n            name: 'allowedValues',\n            typeInfo: '.TUnaryTests'\n          }, {\n            name: 'itemComponent',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TItemDefinition'\n          }, {\n            name: 'typeLanguage',\n            attributeName: {\n              localPart: 'typeLanguage'\n            },\n            type: 'attribute'\n          }, {\n            name: 'isCollection',\n            typeInfo: 'Boolean',\n            attributeName: {\n              localPart: 'isCollection'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TImport',\n        typeName: 'tImport',\n        baseTypeInfo: '.TNamedElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'namespace',\n            required: true,\n            attributeName: {\n              localPart: 'namespace'\n            },\n            type: 'attribute'\n          }, {\n            name: 'locationURI',\n            attributeName: {\n              localPart: 'locationURI'\n            },\n            type: 'attribute'\n          }, {\n            name: 'importType',\n            required: true,\n            attributeName: {\n              localPart: 'importType'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'DMNDI',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/',\n          localPart: 'DMNDI'\n        },\n        propertyInfos: [{\n            name: 'dmnDiagram',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'DMNDiagram',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.DMNDiagram'\n          }, {\n            name: 'dmnStyle',\n            minOccurs: 0,\n            collection: true,\n            elementName: {\n              localPart: 'DMNStyle',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.DMNStyle'\n          }]\n      }, {\n        localName: 'TKnowledgeSource',\n        typeName: 'tKnowledgeSource',\n        baseTypeInfo: '.TDRGElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'authorityRequirement',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TAuthorityRequirement'\n          }, {\n            name: 'type'\n          }, {\n            name: 'owner',\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'locationURI',\n            attributeName: {\n              localPart: 'locationURI'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TRelation',\n        typeName: 'tRelation',\n        baseTypeInfo: '.TExpression',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'column',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TInformationItem'\n          }, {\n            name: 'row',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TList'\n          }]\n      }, {\n        localName: 'Style.Extension',\n        typeName: null,\n        propertyInfos: [{\n            name: 'any',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            type: 'anyElement'\n          }]\n      }, {\n        localName: 'TRuleAnnotationClause',\n        typeName: 'tRuleAnnotationClause',\n        propertyInfos: [{\n            name: 'name',\n            attributeName: {\n              localPart: 'name'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TDecisionTable',\n        typeName: 'tDecisionTable',\n        baseTypeInfo: '.TExpression',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'input',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TInputClause'\n          }, {\n            name: 'output',\n            required: true,\n            collection: true,\n            typeInfo: '.TOutputClause'\n          }, {\n            name: 'annotation',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TRuleAnnotationClause'\n          }, {\n            name: 'rule',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDecisionRule'\n          }, {\n            name: 'hitPolicy',\n            typeInfo: '.THitPolicy',\n            attributeName: {\n              localPart: 'hitPolicy'\n            },\n            type: 'attribute'\n          }, {\n            name: 'aggregation',\n            typeInfo: '.TBuiltinAggregator',\n            attributeName: {\n              localPart: 'aggregation'\n            },\n            type: 'attribute'\n          }, {\n            name: 'preferredOrientation',\n            typeInfo: '.TDecisionTableOrientation',\n            attributeName: {\n              localPart: 'preferredOrientation'\n            },\n            type: 'attribute'\n          }, {\n            name: 'outputLabel',\n            attributeName: {\n              localPart: 'outputLabel'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TDecision',\n        typeName: 'tDecision',\n        baseTypeInfo: '.TDRGElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'question'\n          }, {\n            name: 'allowedAnswers'\n          }, {\n            name: 'variable',\n            typeInfo: '.TInformationItem'\n          }, {\n            name: 'informationRequirement',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TInformationRequirement'\n          }, {\n            name: 'knowledgeRequirement',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TKnowledgeRequirement'\n          }, {\n            name: 'authorityRequirement',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TAuthorityRequirement'\n          }, {\n            name: 'supportedObjective',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'impactedPerformanceIndicator',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'decisionMaker',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'decisionOwner',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'usingProcess',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'usingTask',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'expression',\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TExpression',\n            type: 'elementRef'\n          }]\n      }, {\n        localName: 'DiagramElement',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/',\n          localPart: 'DiagramElement'\n        },\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'extension',\n            elementName: {\n              localPart: 'extension',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/'\n            },\n            typeInfo: '.DiagramElement.Extension'\n          }, {\n            name: 'style',\n            mixed: false,\n            allowDom: false,\n            elementName: {\n              localPart: 'Style',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/'\n            },\n            typeInfo: '.Style',\n            type: 'elementRef'\n          }, {\n            name: 'sharedStyle',\n            typeInfo: 'IDREF',\n            attributeName: {\n              localPart: 'sharedStyle'\n            },\n            type: 'attribute'\n          }, {\n            name: 'id',\n            typeInfo: 'ID',\n            attributeName: {\n              localPart: 'id'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'Dimension',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/',\n          localPart: 'Dimension'\n        },\n        propertyInfos: [{\n            name: 'width',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'width'\n            },\n            type: 'attribute'\n          }, {\n            name: 'height',\n            required: true,\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'height'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'Diagram',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/',\n          localPart: 'Diagram'\n        },\n        baseTypeInfo: '.DiagramElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'name',\n            attributeName: {\n              localPart: 'name'\n            },\n            type: 'attribute'\n          }, {\n            name: 'documentation',\n            attributeName: {\n              localPart: 'documentation'\n            },\n            type: 'attribute'\n          }, {\n            name: 'resolution',\n            typeInfo: 'Double',\n            attributeName: {\n              localPart: 'resolution'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'DMNDecisionServiceDividerLine',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/',\n          localPart: 'DMNDecisionServiceDividerLine'\n        },\n        baseTypeInfo: '.Edge',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }]\n      }, {\n        localName: 'TRuleAnnotation',\n        typeName: 'tRuleAnnotation',\n        propertyInfos: [{\n            name: 'text'\n          }]\n      }, {\n        localName: 'TInformationRequirement',\n        typeName: 'tInformationRequirement',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'requiredDecision',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'requiredInput',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }]\n      }, {\n        localName: 'TDRGElement',\n        typeName: 'tDRGElement',\n        baseTypeInfo: '.TNamedElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }]\n      }, {\n        localName: 'TAssociation',\n        typeName: 'tAssociation',\n        baseTypeInfo: '.TArtifact',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'sourceRef',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'targetRef',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'associationDirection',\n            typeInfo: '.TAssociationDirection',\n            attributeName: {\n              localPart: 'associationDirection'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TContext',\n        typeName: 'tContext',\n        baseTypeInfo: '.TExpression',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'contextEntry',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TContextEntry'\n          }]\n      }, {\n        localName: 'TDMNElement',\n        typeName: 'tDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'description'\n          }, {\n            name: 'extensionElements',\n            typeInfo: '.TDMNElement.ExtensionElements'\n          }, {\n            name: 'id',\n            typeInfo: 'ID',\n            attributeName: {\n              localPart: 'id'\n            },\n            type: 'attribute'\n          }, {\n            name: 'label',\n            attributeName: {\n              localPart: 'label'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TNamedElement',\n        typeName: 'tNamedElement',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'name',\n            required: true,\n            attributeName: {\n              localPart: 'name'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TContextEntry',\n        typeName: 'tContextEntry',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'variable',\n            typeInfo: '.TInformationItem'\n          }, {\n            name: 'expression',\n            required: true,\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TExpression',\n            type: 'elementRef'\n          }]\n      }, {\n        localName: 'TInputData',\n        typeName: 'tInputData',\n        baseTypeInfo: '.TDRGElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'variable',\n            typeInfo: '.TInformationItem'\n          }]\n      }, {\n        localName: 'TDMNElementReference',\n        typeName: 'tDMNElementReference',\n        propertyInfos: [{\n            name: 'href',\n            required: true,\n            attributeName: {\n              localPart: 'href'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TImportedValues',\n        typeName: 'tImportedValues',\n        baseTypeInfo: '.TImport',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'importedElement',\n            required: true\n          }, {\n            name: 'expressionLanguage',\n            attributeName: {\n              localPart: 'expressionLanguage'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TAuthorityRequirement',\n        typeName: 'tAuthorityRequirement',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'requiredDecision',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'requiredInput',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }, {\n            name: 'requiredAuthority',\n            required: true,\n            typeInfo: '.TDMNElementReference'\n          }]\n      }, {\n        localName: 'TDecisionRule',\n        typeName: 'tDecisionRule',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'inputEntry',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TUnaryTests'\n          }, {\n            name: 'outputEntry',\n            required: true,\n            collection: true,\n            typeInfo: '.TLiteralExpression'\n          }, {\n            name: 'annotationEntry',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TRuleAnnotation'\n          }]\n      }, {\n        localName: 'TInputClause',\n        typeName: 'tInputClause',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'inputExpression',\n            required: true,\n            typeInfo: '.TLiteralExpression'\n          }, {\n            name: 'inputValues',\n            typeInfo: '.TUnaryTests'\n          }]\n      }, {\n        localName: 'TDMNElement.ExtensionElements',\n        typeName: null,\n        propertyInfos: [{\n            name: 'any',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            type: 'anyElement'\n          }]\n      }, {\n        localName: 'Shape',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/',\n          localPart: 'Shape'\n        },\n        baseTypeInfo: '.DiagramElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'bounds',\n            elementName: {\n              localPart: 'Bounds',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/'\n            },\n            typeInfo: '.Bounds'\n          }]\n      }, {\n        localName: 'TArtifact',\n        typeName: 'tArtifact',\n        baseTypeInfo: '.TDMNElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }]\n      }, {\n        localName: 'Style',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/',\n          localPart: 'Style'\n        },\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'extension',\n            elementName: {\n              localPart: 'extension',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/'\n            },\n            typeInfo: '.Style.Extension'\n          }, {\n            name: 'id',\n            typeInfo: 'ID',\n            attributeName: {\n              localPart: 'id'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'DMNEdge',\n        typeName: {\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/',\n          localPart: 'DMNEdge'\n        },\n        baseTypeInfo: '.Edge',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'dmnLabel',\n            elementName: {\n              localPart: 'DMNLabel',\n              namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n            },\n            typeInfo: '.DMNLabel'\n          }, {\n            name: 'dmnElementRef',\n            required: true,\n            typeInfo: 'QName',\n            attributeName: {\n              localPart: 'dmnElementRef'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        localName: 'TBinding',\n        typeName: 'tBinding',\n        propertyInfos: [{\n            name: 'parameter',\n            required: true,\n            typeInfo: '.TInformationItem'\n          }, {\n            name: 'expression',\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TExpression',\n            type: 'elementRef'\n          }]\n      }, {\n        localName: 'TList',\n        typeName: 'tList',\n        baseTypeInfo: '.TExpression',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'expression',\n            minOccurs: 0,\n            collection: true,\n            mixed: false,\n            allowDom: false,\n            typeInfo: '.TExpression',\n            type: 'elementRef'\n          }]\n      }, {\n        localName: 'TElementCollection',\n        typeName: 'tElementCollection',\n        baseTypeInfo: '.TNamedElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'drgElement',\n            minOccurs: 0,\n            collection: true,\n            typeInfo: '.TDMNElementReference'\n          }]\n      }, {\n        localName: 'TInformationItem',\n        typeName: 'tInformationItem',\n        baseTypeInfo: '.TNamedElement',\n        propertyInfos: [{\n            name: 'otherAttributes',\n            type: 'anyAttribute'\n          }, {\n            name: 'typeRef',\n            attributeName: {\n              localPart: 'typeRef'\n            },\n            type: 'attribute'\n          }]\n      }, {\n        type: 'enumInfo',\n        localName: 'TDecisionTableOrientation',\n        values: ['Rule-as-Row', 'Rule-as-Column', 'CrossTable']\n      }, {\n        type: 'enumInfo',\n        localName: 'TBuiltinAggregator',\n        values: ['SUM', 'COUNT', 'MIN', 'MAX']\n      }, {\n        type: 'enumInfo',\n        localName: 'TAssociationDirection',\n        values: ['None', 'One', 'Both']\n      }, {\n        type: 'enumInfo',\n        localName: 'AlignmentKind',\n        values: ['start', 'end', 'center']\n      }, {\n        type: 'enumInfo',\n        localName: 'THitPolicy',\n        values: ['UNIQUE', 'FIRST', 'PRIORITY', 'ANY', 'COLLECT', 'RULE ORDER', 'OUTPUT ORDER']\n      }, {\n        type: 'enumInfo',\n        localName: 'KnownColor',\n        values: ['maroon', 'red', 'orange', 'yellow', 'olive', 'purple', 'fuchsia', 'white', 'lime', 'green', 'navy', 'blue', 'aqua', 'teal', 'black', 'silver', 'gray']\n      }, {\n        type: 'enumInfo',\n        localName: 'TFunctionKind',\n        values: ['FEEL', 'Java', 'PMML']\n      }],\n    elementInfos: [{\n        typeInfo: '.TAssociation',\n        elementName: 'association',\n        substitutionHead: 'artifact'\n      }, {\n        typeInfo: '.DiagramElement',\n        elementName: {\n          localPart: 'DMNDiagramElement',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        }\n      }, {\n        typeInfo: '.TInputData',\n        elementName: 'inputData',\n        substitutionHead: 'drgElement'\n      }, {\n        typeInfo: '.TDRGElement',\n        elementName: 'drgElement',\n        substitutionHead: 'namedElement'\n      }, {\n        typeInfo: '.DMNLabel',\n        elementName: {\n          localPart: 'DMNLabel',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        }\n      }, {\n        typeInfo: '.TRelation',\n        elementName: 'relation',\n        substitutionHead: 'expression'\n      }, {\n        typeInfo: '.TKnowledgeRequirement',\n        elementName: 'knowledgeRequirement',\n        substitutionHead: 'DMNElement'\n      }, {\n        typeInfo: '.TContextEntry',\n        elementName: 'contextEntry',\n        substitutionHead: 'DMNElement'\n      }, {\n        typeInfo: '.TOrganizationUnit',\n        elementName: 'organizationUnit',\n        substitutionHead: 'businessContextElement'\n      }, {\n        typeInfo: '.Dimension',\n        elementName: {\n          localPart: 'Dimension',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/'\n        }\n      }, {\n        typeInfo: '.DMNDecisionServiceDividerLine',\n        elementName: {\n          localPart: 'DMNDecisionServiceDividerLine',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        }\n      }, {\n        typeInfo: '.TItemDefinition',\n        elementName: 'itemDefinition',\n        substitutionHead: 'namedElement'\n      }, {\n        typeInfo: '.TElementCollection',\n        elementName: 'elementCollection',\n        substitutionHead: 'namedElement'\n      }, {\n        typeInfo: '.TLiteralExpression',\n        elementName: 'literalExpression',\n        substitutionHead: 'expression'\n      }, {\n        typeInfo: '.TAuthorityRequirement',\n        elementName: 'authorityRequirement',\n        substitutionHead: 'DMNElement'\n      }, {\n        typeInfo: '.TExpression',\n        elementName: 'expression'\n      }, {\n        typeInfo: '.TPerformanceIndicator',\n        elementName: 'performanceIndicator',\n        substitutionHead: 'businessContextElement'\n      }, {\n        typeInfo: '.TInformationRequirement',\n        elementName: 'informationRequirement',\n        substitutionHead: 'DMNElement'\n      }, {\n        typeInfo: '.DMNDI',\n        elementName: {\n          localPart: 'DMNDI',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        }\n      }, {\n        typeInfo: '.TBusinessContextElement',\n        elementName: 'businessContextElement'\n      }, {\n        typeInfo: '.TDecision',\n        elementName: 'decision',\n        substitutionHead: 'drgElement'\n      }, {\n        typeInfo: '.TInvocation',\n        elementName: 'invocation',\n        substitutionHead: 'expression'\n      }, {\n        typeInfo: '.TInformationItem',\n        elementName: 'informationItem',\n        substitutionHead: 'namedElement'\n      }, {\n        typeInfo: '.TTextAnnotation',\n        elementName: 'textAnnotation',\n        substitutionHead: 'artifact'\n      }, {\n        typeInfo: '.TDecisionService',\n        elementName: 'decisionService',\n        substitutionHead: 'invocable'\n      }, {\n        typeInfo: '.DMNDiagram',\n        elementName: {\n          localPart: 'DMNDiagram',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        }\n      }, {\n        typeInfo: '.TArtifact',\n        elementName: 'artifact',\n        substitutionHead: 'DMNElement'\n      }, {\n        typeInfo: '.TContext',\n        elementName: 'context',\n        substitutionHead: 'expression'\n      }, {\n        typeInfo: '.TImport',\n        elementName: 'import',\n        substitutionHead: 'namedElement'\n      }, {\n        typeInfo: '.TDecisionTable',\n        elementName: 'decisionTable',\n        substitutionHead: 'expression'\n      }, {\n        typeInfo: '.TFunctionDefinition',\n        elementName: 'functionDefinition',\n        substitutionHead: 'expression'\n      }, {\n        typeInfo: '.TKnowledgeSource',\n        elementName: 'knowledgeSource',\n        substitutionHead: 'drgElement'\n      }, {\n        typeInfo: '.TInvocable',\n        elementName: 'invocable',\n        substitutionHead: 'drgElement'\n      }, {\n        typeInfo: '.DMNStyle',\n        elementName: {\n          localPart: 'DMNStyle',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        },\n        substitutionHead: {\n          localPart: 'Style',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/'\n        }\n      }, {\n        typeInfo: '.TDMNElement',\n        elementName: 'DMNElement'\n      }, {\n        typeInfo: '.TDefinitions',\n        elementName: 'definitions',\n        substitutionHead: 'namedElement'\n      }, {\n        typeInfo: '.Bounds',\n        elementName: {\n          localPart: 'Bounds',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/'\n        }\n      }, {\n        typeInfo: '.TNamedElement',\n        elementName: 'namedElement',\n        substitutionHead: 'DMNElement'\n      }, {\n        typeInfo: '.Color',\n        elementName: {\n          localPart: 'Color',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/'\n        }\n      }, {\n        typeInfo: '.TList',\n        elementName: 'list',\n        substitutionHead: 'expression'\n      }, {\n        typeInfo: '.DMNShape',\n        elementName: {\n          localPart: 'DMNShape',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        },\n        substitutionHead: {\n          localPart: 'DMNDiagramElement',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        }\n      }, {\n        typeInfo: '.Point',\n        elementName: {\n          localPart: 'Point',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DC\\/'\n        }\n      }, {\n        typeInfo: '.TBusinessKnowledgeModel',\n        elementName: 'businessKnowledgeModel',\n        substitutionHead: 'invocable'\n      }, {\n        typeInfo: '.Style',\n        elementName: {\n          localPart: 'Style',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DI\\/'\n        }\n      }, {\n        typeInfo: '.DMNEdge',\n        elementName: {\n          localPart: 'DMNEdge',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        },\n        substitutionHead: {\n          localPart: 'DMNDiagramElement',\n          namespaceURI: 'http:\\/\\/www.omg.org\\/spec\\/DMN\\/20180521\\/DMNDI\\/'\n        }\n      }]\n  };\n  return {\n    dmn: dmn\n  };\n};\nif (typeof define === 'function' && define.amd) {\n  define([], dmn_Module_Factory);\n}\nelse {\n  var dmn_Module = dmn_Module_Factory();\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports.dmn = dmn_Module.dmn;\n  }\n  else {\n    var dmn = dmn_Module.dmn;\n  }\n}","module.exports = require(\"@patternfly/patternfly/patternfly.css\");","module.exports = require(\"@patternfly/patternfly/patternfly-addons.css\");","import { Scesim } from '../../types/SceSim';\n\nconst Jsonix = require('./jsonix').Jsonix;\n\n// Load the schema rules\nconst SceSimRules = require('../../schemas/scesim').scesim;\nconst DmnRules = require('../../schemas/dmn').dmn;\n\n// Construct a Jsonix context - a factory for unmarshaller (parser) and marshaller (serializer)\nconst sceSimContext = new Jsonix.Context([SceSimRules]);\nconst dmnContext = new Jsonix.Context([DmnRules]);\n\n// Create an unmarshaller (scesim => json)\nconst sceSimUnmarshaller = sceSimContext.createUnmarshaller();\nconst dmnUnmarshaller = dmnContext.createUnmarshaller();\n\n// Create a marshaller (json => scesim)\nconst sceSimMarshaller = sceSimContext.createMarshaller();\nconst dmnMarshaller = dmnContext.createMarshaller();\n\n/**\n * Convert a scesim XML string into JSON\n */\nexport const getJsonFromSceSim = (scesim: string) => {\n  const unmarshalled = sceSimUnmarshaller.unmarshalString(scesim);\n  // console.log(unmarshalled);\n  return unmarshalled;\n};\n\n/**\n * Convert JSON to scesim XML string\n */\nexport const setSceSimFromJson = (json: Scesim) => {\n  const marshalled = sceSimMarshaller.marshalString(json);\n  // console.log(marshalled);\n  return marshalled;\n};\n\n/**\n *\n * @param dmn Convert dmn XML string into JSON\n */\nexport const getJsonFromDmn = (dmn: string) => {\n  const unmarshalled = dmnUnmarshaller.unmarshalString(dmn);\n  // console.log(unmarshalled);\n  return unmarshalled;\n};\n\n/**\n * Convert JSON to dmn XML string\n */\nexport const setDmnFromJson = (json: any) => {\n  const marshalled = dmnMarshaller.marshalString(json);\n  // console.log(marshalled);\n  return marshalled;\n};\n"," import { useEffect } from 'react';\n\n export const useKeyPress = (targetKey: any, fn: any, options?: any) => {\n  useEffect(() => {\n    const ref = (options && options.hasOwnProperty('ref')) ? options.ref : null;\n    const id = (options && options.hasOwnProperty('id')) ? options.id : null;\n    const withModifier = (options && options.hasOwnProperty('withModifier')) ? options.withModifier : false;\n    const withShift = (options && options.hasOwnProperty('withShift')) ? options.withShift : false;\n    const isActive = (options && options.hasOwnProperty('isActive')) ? options.isActive : true;\n    // const log = (options && options.hasOwnProperty('log')) ? options.log : '';\n\n    if (isActive === false) {\n      return;\n    }\n    function downHandler(event: any) {\n      const { key, keyCode } = event;\n      if (id && event.target.getAttribute('id') !== id) {\n        return;\n      }\n      if (!withModifier && (event.ctrlKey || event.metaKey)) {\n        // ignore key combination like ctrl+c/command+c unless we specifically asked to use with modifier\n        return;\n      }\n      if (\n        (typeof targetKey === 'string' && key === targetKey) ||\n        (typeof targetKey === 'number' && keyCode === targetKey) ||\n        (targetKey.test && targetKey.test(key))) {\n          if (withModifier && !withShift) {\n            if ((event.ctrlKey || event.metaKey) && !event.shiftKey) {\n              fn(event);\n            }\n          } else if (!withModifier && withShift) {\n            if (!event.ctrlKey && !event.metaKey && event.shiftKey) {\n              fn(event);\n            }\n          } else if (withModifier && withShift) {\n            if ((event.ctrlKey || event.metaKey) && event.shiftKey) {\n              fn(event);\n            }\n          } else {\n            fn(event);\n          }\n      }\n    }\n    if (ref && ref.current) {\n      // console.log(`add event listener ${log} - ref`);\n      ref.current.addEventListener('keydown', downHandler);\n    } else {\n      // console.log(`add event listener ${log} - window`);\n      window.addEventListener('keydown', downHandler);\n    }\n    return () => {\n      if (ref && ref.current) {\n        // console.log(`remove event listener ${log} - ref`);\n        ref.current.removeEventListener('keydown', downHandler);\n      } else {\n        // console.log(`remove event listener ${log} - window`);\n        window.removeEventListener('keydown', downHandler);\n      }\n    };\n  });\n};\n","export const setCaretPosition = (element: any, caretPos: number) => {\n  // (el.selectionStart === 0 added for Firefox bug)\n  if (element.selectionStart || element.selectionStart === 0) {\n    element.focus();\n    element.setSelectionRange(caretPos, caretPos);\n    return true;\n  }\n  return false;\n};\n\nexport const setCaretPositionAtEnd = (element: HTMLInputElement) => {\n  const end = element.value.length;\n  setCaretPosition(element, end);\n};\n\nexport const focusCell = (id: string, focusTimeout: number = 1, scrollTo: boolean = false) => {\n  const element = document.getElementById(id);\n  if (element) {\n    if (scrollTo) {\n      element.scrollIntoView({behavior: 'smooth', block: 'end', inline: 'nearest'});\n    }\n    setTimeout(() => {\n      element.focus();\n    }, focusTimeout);\n  }\n};\n\nexport const getRowColumnFromId = (id: string) => {\n  const currentIdArr: string[] = id.split(' ');\n  const row = Number.parseInt(currentIdArr[1], 10);\n  const column = Number.parseInt(currentIdArr[3], 10);\n  return {\n    row,\n    column,\n  };\n};\n","// https://dev.to/gabe_ragland/debouncing-with-react-hooks-jci\n\nimport React, { useEffect, useState } from 'react';\n\n// Our hook\nexport function useDebounce(value: string, delay: number) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Set debouncedValue to value (passed in) after the specified delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      // Return a cleanup function that will be called every time ...\n      // ... useEffect is re-called. useEffect will only be re-called ...\n      // ... if value changes (see the inputs array below).\n      // This is how we prevent debouncedValue from changing if value is ...\n      // ... changed within the delay period. Timeout gets cleared and restarted.\n      // To put it in context, if the user is typing within our app's ...\n      // ... search box, we don't want the debouncedValue to update until ...\n      // ... they've stopped typing for more than 500ms.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    // Only re-call effect if value changes\n    // You could also add the \"delay\" var to inputs array if you ...\n    // ... need to be able to change that dynamically.\n    [value],\n  );\n\n  return debouncedValue;\n}\n","import { Tooltip } from '@patternfly/react-core';\nimport * as React from 'react';\nimport { focusCell, setCaretPositionAtEnd, useKeyPress  } from '../utils';\nimport './Input.css';\n\nconst Input = React.memo<{\n  originalValue: any,\n  path: string,\n  id?: any,\n  type?: string,\n  isReadOnly: boolean,\n  deactivateAndFocusCell: any,\n  setEditable: any,\n  onSave: any,\n}>(({\n  originalValue,\n  path,\n  id,\n  type,\n  isReadOnly,\n  deactivateAndFocusCell,\n  setEditable,\n  onSave,\n}) => {\n  // console.log(`render Input`);\n  const [value, setValue] = React.useState<any>(originalValue);\n  const [savedValue, setSavedValue] = React.useState<any>(originalValue);\n  const [overflown, setOverflown] = React.useState<boolean>(false);\n  // const [changes, setChanges] = React.useState<any[]>([]);\n  const [isReadOnlyState, setReadOnlyState] = React.useState<boolean>(isReadOnly);\n\n  React.useEffect(() => {\n    // sync prop to state\n    if (isReadOnly !== isReadOnlyState) {\n      setReadOnlyState(isReadOnly);\n    }\n  }, [isReadOnly]);\n\n  React.useEffect(() => {\n    if (isReadOnlyState) {\n      // update cell on data changes coming from EditorContainer -> Editor\n      if (value !== originalValue) {\n        setValue(originalValue);\n        setSavedValue(originalValue);\n      }\n    }\n  }, [originalValue]);\n\n  /**\n   * Returns the current DOM element\n   *\n   * TODO: Possibly change to React refs\n   */\n  const thisElement = () => {\n    return document.getElementById(id) as HTMLInputElement;\n  };\n\n  React.useEffect(() => {\n    if (!isReadOnlyState) {\n      // set caret at the end of the input\n      setTimeout(() => {\n        setCaretPositionAtEnd(thisElement());\n      }, 1);\n    }\n  });\n\n  /**\n   * Set the value on input\n   */\n  const handleTextInputChange = (event: any) => {\n    setValue(event.currentTarget.value);\n  };\n\n  /**\n   * Saves the current value\n   */\n  const save = () => {\n    if (savedValue !== value) {\n      // setChanges((prevState: any) => ([...prevState, {\n      //   value,\n      //   previousValue: savedValue\n      // }]));\n      setSavedValue(value);\n      if (onSave) {\n        onSave(id, value, originalValue);\n      }\n    }\n  };\n\n  /**\n   * save current input\n   */\n  const onEnter = (event: any) => {\n    // save operation\n    save();\n    // mark itself as not editable but maintain focus\n    // deactivateAndFocusCell(event.target.id);\n    setEditable('');\n    setReadOnlyState(true);\n  };\n\n  /**\n   * Reverts input to previous saved value if changed\n   */\n  const onEscape = (event: any) => {\n    if (savedValue !== value) {\n      setValue(savedValue);\n    }\n    // mark itself as not editable but maintain focus\n    // deactivateAndFocusCell(event.target.id);\n    setEditable('');\n    setReadOnlyState(true);\n  };\n\n  useKeyPress('Escape', onEscape, {\n    log: 'input',\n    id,\n    isActive: !isReadOnlyState,\n  });\n  useKeyPress('Enter', onEnter, {\n    log: 'input',\n    id,\n    isActive: !isReadOnlyState,\n  });\n\n  /**\n   * When the element loses focus\n   * Save the value and notify the Editor that we're not editable anymore\n   */\n  const onLoseFocus = (event: any) => {\n    if (!isReadOnlyState) {\n      setReadOnlyState(true);\n      // setEditable('');\n      save();\n    }\n  };\n\n  /**\n   * Check if the element is overflown\n   */\n  const checkForOverflow = (event?: any) => {\n    const element = event ? event.target : thisElement();\n    const isOverflown = element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;\n    setOverflown(isOverflown);\n  };\n\n  const input = (\n    <input\n      onMouseOver={checkForOverflow}\n      className=\"editor-input truncate\"\n      style={{ cursor: isReadOnlyState ? 'default' : 'text', textAlign: type === 'string' ? 'left' : 'center' }}\n      value={value}\n      type=\"text\"\n      onChange={handleTextInputChange}\n      onBlur={onLoseFocus}\n      aria-label={value}\n      id={id}\n      readOnly={isReadOnlyState}\n    />\n  );\n  return <Tooltip content={value} distance={0} exitDelay={0} trigger={overflown ? 'mouseenter focus' : 'manual'}>{input}</Tooltip>;\n}, (prevProps, nextProps) => {\n  const shouldRerender = (prevProps.isReadOnly !== nextProps.isReadOnly) || (prevProps.originalValue !== nextProps.originalValue);\n  if (shouldRerender) {\n    // console.log(`re-render Input ${nextProps.id}`)\n    return false;\n  }\n  return true;\n});\n\n// @ts-ignore\nInput.whyDidYouRender = {\n  customName: 'Input',\n};\n\nexport { Input };\n","import { Select as PfSelect, SelectOption, SelectOptionObject, SelectVariant, Tooltip } from '@patternfly/react-core';\nimport * as React from 'react';\nimport './Input.css';\nimport './Select.css';\n\nconst Select = React.memo<{\n  originalValue?: any,\n  path?: string,\n  id?: any,\n  type?: string,\n  isReadOnly?: boolean,\n  onSelectToggleCallback?: any,\n  options?: any,\n  deactivateAndFocusCell?: any,\n  setEditable: any,\n  onSave: any,\n}>(({\n  originalValue,\n  path,\n  id,\n  type,\n  isReadOnly,\n  onSelectToggleCallback,\n  options,\n  deactivateAndFocusCell,\n  setEditable,\n  onSave,\n}) => {\n  // console.log('render Select');\n  const [isExpanded, setExpanded] = React.useState<boolean>(true);\n  const [selected, setSelected] = React.useState<any>(originalValue);\n  const [savedSelection, setSavedSelection] = React.useState<any>(originalValue);\n  const [overflown, setOverflown] = React.useState<boolean>(false);\n\n  React.useEffect(() => {\n    // workaround to focus on the first list item to enable keyboard navigation\n    if (!isReadOnly) {\n      onToggle(true);\n      setTimeout(() => {\n        const element = document.querySelector(`button[id=\"${id}\"]`);\n        if (element && element.parentNode && (element.parentNode as HTMLElement).querySelector('.pf-c-select__menu-item')) {\n          ((element.parentNode as HTMLElement).querySelector('.pf-c-select__menu-item') as HTMLButtonElement).focus();\n        }\n      }, 1);\n    }\n  }, [isReadOnly]);\n\n  React.useEffect(() => {\n    setSelected(originalValue);\n    setSavedSelection(originalValue);\n  }, [originalValue]);\n\n  /**\n   * Returns the current DOM element\n   *\n   * TODO: Possibly change to React refs\n   */\n  const thisElement = () => {\n    return document.getElementById(id) as HTMLInputElement;\n  };\n\n  /**\n   * Saves the current value\n   */\n  const save = (selection: string) => {\n    setSelected(selection);\n    if (savedSelection !== selection) {\n      setSavedSelection(selection);\n      if (onSave) {\n        onSave(id, selection, originalValue);\n      }\n    }\n  };\n\n  /**\n   * The Select options\n   */\n  const selectOptions = options.map((option: string, index: number) => (\n    <SelectOption key={index} value={option} isSelected={true} />\n  ));\n\n  /**\n   * Toggle the Select\n   */\n  const onToggle = (expanded: boolean) => {\n    setExpanded(expanded);\n    onSelectToggleCallback(id, expanded);\n  };\n\n  /**\n   * Set the selection\n   */\n  const onSelect = (event: React.MouseEvent | React.ChangeEvent, selection: string | SelectOptionObject) => {\n    // close the dropdown\n    onToggle(false);\n    // save operation\n    save(selection as string);\n    // mark itself as not editable but maintain focus\n    setTimeout(() => {\n      deactivateAndFocusCell(id);\n    }, 1);\n  };\n\n  const onKeyDown = (event: any) => {\n    const { key } = event;\n    if (key === 'Escape') {\n      onSelectToggleCallback(false);\n      setTimeout(() => {\n        deactivateAndFocusCell(id);\n      }, 1);\n    }\n  };\n\n  /**\n   * Check if the element is overflown\n   */\n  const checkForOverflow = (event?: any) => {\n    const element = event ? event.target : thisElement();\n    const isOverflown = element.scrollHeight > element.clientHeight || element.scrollWidth > element.clientWidth;\n    setOverflown(isOverflown);\n  };\n\n  return (\n    <>\n      {isReadOnly ? (\n        <Tooltip content={selected} distance={0} exitDelay={0} trigger={overflown ? 'mouseenter focus' : 'manual'}>\n          <input\n            onMouseOver={checkForOverflow}\n            className=\"editor-input truncate\"\n            style={{ cursor: 'default', textAlign: type === 'string' ? 'left' : 'center' }}\n            type=\"text\"\n            value={selected}\n            id={id}\n            aria-label={selected}\n            readOnly={true}\n          />\n        </Tooltip>\n      ) : (\n        <PfSelect\n          toggleId={id}\n          variant={SelectVariant.single}\n          aria-label=\"Select Input\"\n          onToggle={onToggle}\n          onSelect={onSelect}\n          selections={selected}\n          isExpanded={isExpanded}\n          ariaLabelledBy=\"typeahead-select-id\"\n          onKeyDown={onKeyDown}\n        >\n          {selectOptions}\n        </PfSelect>\n      )}\n    </>);\n}, (prevProps, nextProps) => {\n  const shouldRerender = (prevProps.isReadOnly !== nextProps.isReadOnly) || (prevProps.originalValue !== nextProps.originalValue);\n  if (shouldRerender) {\n    // console.log(`prevProps ${prevProps.originalValue}, nextProps ${nextProps.originalValue}`);\n    return false;\n  }\n  return true;\n});\n\nexport { Select };\n","/**\n * Loading spinner used when loading the app and when loading the next page for the grid infinite scrolling\n */\nimport { Bullseye, Title } from '@patternfly/react-core';\nimport { Spinner as PfSpinner, SpinnerProps } from '@patternfly/react-core/dist/js/experimental';\nimport * as React from 'react';\n\nconst Spinner: React.SFC<{ text?: string, className?: string, size?: SpinnerProps['size'] }> = ({ text, className, size = 'xl' }) => (\n  <Bullseye className={className}>\n    <div className=\"pf-l-flex pf-m-column\">\n      <div className=\"pf-l-flex__item\" style={{ textAlign: 'center' }}>\n        <PfSpinner size={size} />\n      </div>\n      {text && <div>\n        <Title headingLevel=\"h1\" size=\"xl\" className=\"pf-u-mt-md\">{text}</Title>\n      </div>}\n    </div>\n  </Bullseye>\n);\n\nexport { Spinner };\n","import * as React from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { Input, Select } from '../Cell';\nimport { Spinner } from '../Spinner';\nimport { focusCell, setCaretPositionAtEnd, useKeyPress } from '../utils';\nimport './Editor.css';\n\nconst Editor = React.memo<{\n  columns: any,\n  filteredRows: any,\n  definitions: any,\n  columnNames: any,\n  onSave: any,\n  lastForcedUpdate: string,\n  readOnly: boolean,\n}>(({\n  columns: columnDefs,\n  filteredRows,\n  definitions,\n  columnNames,\n  onSave,\n  lastForcedUpdate,\n  readOnly,\n}) => {\n  // console.log('render Editor');\n\n  const rowsToFetch = 50;\n\n  const [editableCell, setEditable] = React.useState<string>('');\n  const [expandedSelect, setExpandedSelect] = React.useState(false);\n  const [currentPage, setCurrentPage] = React.useState(1);\n\n  // state from props\n  const [columnDefsState, setColumnDefsState] = React.useState(columnDefs);\n  const [fetchedRows, setFetchedRows] = React.useState(filteredRows.slice(0, rowsToFetch));\n  const [definitionsState, setDefinitionsState] = React.useState(definitions);\n  const [columnNamesState, setColumnNamesState] = React.useState(columnNames);\n  const [lastForcedUpdateState, setLastForcedUpdateState] = React.useState(lastForcedUpdate);\n\n  const editorRef = React.useRef(null);\n\n  React.useEffect(() => {\n    setTimeout(() => {\n      setNumGivenColumns(columnDefs.numGiven);\n      setNumExpectColumns(columnDefs.numExpect);\n    }, 1);\n  }, [columnDefs]);\n\n  React.useEffect(() => {\n    // render depends on updated value of fetchedRows\n    if (JSON.stringify(columnDefsState) !== JSON.stringify(columnDefs)) {\n      setColumnDefsState(columnDefs);\n    }\n    if (lastForcedUpdateState !== lastForcedUpdate || JSON.stringify(fetchedRows) !== JSON.stringify(filteredRows.slice(0, rowsToFetch))) {\n      setFetchedRows(filteredRows.slice(0, rowsToFetch));\n    }\n    if (JSON.stringify(definitionsState) !== JSON.stringify(definitions)) {\n      setDefinitionsState(definitions);\n    }\n    if (JSON.stringify(columnNamesState) !== JSON.stringify(columnNames)) {\n      setColumnNamesState(columnNames);\n    }\n  }, [columnDefs, filteredRows, definitions, columnNames, lastForcedUpdate]);\n\n  const setNumGivenColumns = (num: number) => {\n    document\n      .getElementById('kie-grid')!\n      .style.setProperty('--num-given-columns', num.toString());\n  };\n\n  const setNumExpectColumns = (num: number) => {\n    document\n      .getElementById('kie-grid')!\n      .style.setProperty('--num-expect-columns', num.toString());\n  };\n\n  const activateCell = (id: string) => {\n    if (id) {\n      setEditable(id);\n    }\n  };\n\n  const deactivateCell = () => {\n    setEditable('');\n  };\n\n  const activateAndFocusCell = (id: string) => {\n    activateCell(id);\n    focusCell(id);\n  };\n\n  const deactivateAndFocusCell = (id: string) => {\n    deactivateCell(); // expensive, causes re-renders?\n    focusCell(id);\n  };\n\n  const onCellClick = (event: any) => {\n    const { id } = event.target;\n    if (id === editableCell) {\n      // already active\n      return null;\n    }\n    if (editableCell) {\n      // get out of a previous cell editing mode\n      deactivateCell();\n    }\n    return id;\n  };\n\n  /**\n   * Enter editing mode\n   */\n  const onCellDoubleClick = (event: any) => {\n    if (readOnly) {\n      return;\n    }\n    const id = onCellClick(event);\n    if (id) {\n      activateAndFocusCell(id);\n    }\n  };\n\n  /**\n   * Enter editing mode\n   */\n  const onEnter = (event: any) => {\n    // don't want Input's onEnter listener to fire\n    event.stopPropagation();\n    onCellDoubleClick(event);\n  };\n\n  /**\n   * Up arrow key\n   */\n  const onUpKeyPress = (event: any) => {\n    const activeElement = (document && document.activeElement && document.activeElement.getAttribute('id')) || '';\n    if (expandedSelect) {\n      return;\n    }\n    if (editableCell) {\n      return;\n    }\n    const currentId = activeElement;\n    const minRow = 0;\n    let targetId;\n    if (currentId) {\n      // ['row', '1', 'column', '2']\n      const currentIdArr: string[] = currentId.split(' ');\n      const currentRow = Number.parseInt(currentIdArr[1], 10);\n      // going up means decrementing the row\n      const newRow = currentRow - 1;\n      if (newRow < minRow) {\n        return;\n      } else {\n        targetId = `row ${newRow} column ${currentIdArr[3]}`;\n        focusCell(targetId);\n      }\n    }\n  };\n\n  /**\n   * Down arrow key\n   */\n  const onDownKeyPress = (event: any) => {\n    const activeElement = (document && document.activeElement && document.activeElement.getAttribute('id')) || '';\n    if (expandedSelect) {\n      return;\n    }\n    if (editableCell) {\n      return;\n    }\n    const currentId = activeElement;\n    const maxRow = filteredRows.length - 1;\n    let targetId;\n    if (currentId) {\n      // ['row', '1', 'column', '2']\n      const currentIdArr: string[] = currentId.split(' ');\n      const currentRow = Number.parseInt(currentIdArr[1], 10);\n      // going down means incrementing the row\n      const newRow = currentRow + 1;\n      if (newRow > maxRow) {\n        return;\n      } else {\n        targetId = `row ${newRow} column ${currentIdArr[3]}`;\n        focusCell(targetId);\n      }\n    }\n  };\n\n  /**\n   * Left arrow key\n   */\n  const onLeftKeyPress = (event: any) => {\n    const activeElement = (document && document.activeElement && document.activeElement.getAttribute('id')) || '';\n    if (expandedSelect) {\n      return;\n    }\n    if (editableCell) {\n      return;\n    }\n    const currentId = activeElement;\n    const minCol = 1;\n    let targetId;\n    if (currentId) {\n      // ['row', '1', 'column', '2']\n      const currentIdArr: string[] = currentId.split(' ');\n      const currentCol = Number.parseInt(currentIdArr[3], 10);\n      // going left means decrementing the column\n      const newCol = currentCol - 1;\n      if (newCol < minCol) {\n        return;\n      } else {\n        targetId = `row ${currentIdArr[1]} column ${newCol}`;\n        focusCell(targetId);\n      }\n    }\n  };\n\n  /**\n   * Right arrow key\n   */\n  const onRightKeyPress = (event: any) => {\n    const activeElement = (document && document.activeElement && document.activeElement.getAttribute('id')) || '';\n    if (expandedSelect) {\n      return;\n    }\n    if (editableCell) {\n      return;\n    }\n    const currentId = activeElement;\n    const maxCol = columnDefs.numGiven + columnDefs.numExpect + 1;\n    let targetId;\n    if (currentId) {\n      // ['row', '1', 'column', '2']\n      const currentIdArr: string[] = currentId.split(' ');\n      const currentCol = Number.parseInt(currentIdArr[3], 10);\n      // going right means incrementing the column\n      const newCol = currentCol + 1;\n      if (newCol > maxCol) {\n        return;\n      } else {\n        targetId = `row ${currentIdArr[1]} column ${newCol}`;\n        focusCell(targetId);\n      }\n    }\n  };\n\n  /**\n   * Copy cell listener\n   */\n  const onCopy = (event: any) => {\n    /* Get the text field */\n    const copyText = event.target;\n    if (copyText && copyText.select) {\n      /* Select the text field */\n      copyText.select();\n      copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n      /* Copy the text inside the text field */\n      document.execCommand('copy');\n      // do not mark the whole text as selected\n      setCaretPositionAtEnd(copyText);\n    }\n  };\n\n  // Command + C / CTRL + C copies the focused cell content\n  useKeyPress(/c/i, onCopy, { log: 'editor', withModifier: true });\n  useKeyPress('Enter', onEnter, { log: 'editor', isActive: (!editableCell && !readOnly) });\n  useKeyPress(38, onUpKeyPress, { log: 'editor' });\n  useKeyPress(40, onDownKeyPress, { log: 'editor' });\n  useKeyPress(37, onLeftKeyPress, { log: 'editor' });\n  useKeyPress(39, onRightKeyPress, { log: 'editor' });\n\n  const onSelectToggleCallback = (id: any, isExpanded: boolean) => {\n    setExpandedSelect(isExpanded);\n  };\n\n  // rowData\n  const fetchMoreRows = (page?: number) => {\n    if (page) {\n      setFetchedRows((prevState: any) => ([...prevState, ...filteredRows.slice(page * rowsToFetch, page * rowsToFetch + rowsToFetch)]));\n    } else {\n      setFetchedRows((prevState: any) => ([...prevState, ...filteredRows.slice(currentPage * rowsToFetch, currentPage * rowsToFetch + rowsToFetch)]));\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  // console.log(fetchedRows);\n  // console.log(columnNamesState);\n  return !fetchedRows ? null : (\n    <>\n      <div id=\"kie-grid\" className=\"kie-grid\" ref={editorRef}>\n        {columnDefsState.other.map((other: { name: string }, index: number) => {\n          if (index === 0) {\n            return <div className=\"kie-grid__item kie-grid__number\" key=\"other-number\">{other.name}</div>;\n          } else {\n            return (\n              <div className=\"kie-grid__item kie-grid__description\" key=\"other-description\">{other.name}</div>\n            );\n          }\n        })}\n        {/* The GIVEN and EXPECT groups are always there so this can be hardcoded */}\n        <div className=\"kie-grid__header--given\">\n          <div className=\"kie-grid__item kie-grid__given\">GIVEN</div>\n        </div>\n        <div className=\"kie-grid__header--expect\">\n          <div className=\"kie-grid__item kie-grid__expect\">EXPECT</div>\n        </div>\n\n        {/* <!-- grid instance headers need to have a grid-column span set --> */}\n        <div className=\"kie-grid__header--given\">\n          {columnDefsState.given.map((given: any, index: number) => (\n            <div\n              key={`given instance ${index}`}\n              className=\"kie-grid__item kie-grid__instance\"\n              style={{ gridColumn: `span ${given.children.length}` }}\n            >\n              {given.group}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"kie-grid__header--expect\">\n          {columnDefsState.expect.map((expect: any, index: number) => (\n            <div\n              key={`expect instance ${index}`}\n              className=\"kie-grid__item kie-grid__instance\"\n              style={{ gridColumn: `span ${expect.children.length}` }}\n            >\n              {expect.group}\n            </div>\n          ))}\n        </div>\n\n        <div className=\"kie-grid__header--given\">\n          {columnDefsState.given.map((given: any) => {\n            return given.children.map((givenChild: any, index: number) => (\n              <div key={`given property ${index}`} className=\"kie-grid__item kie-grid__property\">{givenChild.name}</div>\n            ));\n          })}\n        </div>\n        <div className=\"kie-grid__header--expect\">\n          {columnDefsState.expect.map((expect: any) => {\n            return expect.children.map((expectChild: any, index: number) => (\n              <div key={`expect property ${index}`} className=\"kie-grid__item kie-grid__property\">{expectChild.name}</div>\n            ));\n          })}\n        </div>\n\n        <div className=\"kie-grid__body\">\n          <InfiniteScroll\n            dataLength={fetchedRows.length}\n            next={fetchMoreRows}\n            hasMore={fetchedRows.length < filteredRows.length}\n            loader={<Spinner className=\"kie-grid__item kie-grid__item--loading pf-u-pt-sm\" size=\"md\" />}\n            scrollableTarget=\"sce-sim-grid__main\"\n          >\n              {fetchedRows.map((row: any, rowIndex: number) => (\n                <div className=\"kie-grid__rule\" style={{}} key={`row ${row[0].value}`}>\n                  {row.map((cell: any, index: number) => {\n                    // get the type of the column to pass on to the input for formatting / validation\n                    let type = 'string';\n                    let columnGroup = '';\n                    let columnName = '';\n                    if (index === 0) {\n                      // row index\n                      type = 'number';\n                    } else if (index === 1) {\n                      // description\n                      type = 'string';\n                    } else if (index > 1) {\n                      columnGroup = columnNamesState[index].group;\n                      columnName = columnNamesState[index].name;\n                      type = (definitionsState && definitionsState.map[columnNamesState[index].group] && definitionsState.map[columnGroup][columnName]) || 'string';\n                    }\n                    const cellIndex = index;\n                    const value = cell && cell.value ? cell.value : '';\n                    const path = cell && cell.path ? cell.path : '';\n                    // const cellId = `cell ${cellIndex}`;\n                    const inputId = `row ${rowIndex} column ${cellIndex}`;\n                    let component;\n                    const typeArr = type.split(',');\n                    if (typeArr.length > 1) {\n                      // Multiple options, render Select\n                      component = (\n                        <Select\n                          isReadOnly={inputId !== editableCell}\n                          id={inputId}\n                          originalValue={value}\n                          onSelectToggleCallback={onSelectToggleCallback}\n                          options={typeArr.map((typeString) => typeString.trim())}\n                          deactivateAndFocusCell={deactivateAndFocusCell}\n                          setEditable={setEditable}\n                          onSave={onSave}\n                        />\n                      );\n                    } else {\n                      component = (\n                        <Input\n                          isReadOnly={inputId !== editableCell}\n                          id={inputId}\n                          originalValue={value}\n                          path={path}\n                          type={type}\n                          deactivateAndFocusCell={deactivateAndFocusCell}\n                          setEditable={setEditable}\n                          onSave={onSave}\n                        />\n                      );\n                    }\n                    return (\n                      <div className=\"kie-grid__item\" key={inputId} onClick={onCellClick} onDoubleClick={onCellDoubleClick}>\n                        {cellIndex === 0 ? value : component}\n                      </div>\n                    );\n                  })}\n                </div>\n              ))}\n          </InfiniteScroll>\n        </div>\n      </div>\n    </>\n  );\n}, (prevProps, nextProps) => {\n  if (prevProps.lastForcedUpdate !== nextProps.lastForcedUpdate) {\n    // console.log('re-render Editor');\n    return false;\n  }\n  if (prevProps.filteredRows.length !== nextProps.filteredRows.length ||\n    JSON.stringify(prevProps.filteredRows) !== JSON.stringify(nextProps.filteredRows)) {\n    // filteredRows have changed, re-render\n    // console.log('re-render Editor');\n    return false;\n  }\n  // console.log('not re-rendering Editor');\n  return true;\n});\n\n// @ts-ignore\nEditor.whyDidYouRender = {\n  customName: 'Editor',\n};\n\nexport { Editor };\n","import { Button, Expandable, TextContent } from '@patternfly/react-core';\nimport { AngleRightIcon, CopyIcon } from '@patternfly/react-icons';\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { setCaretPositionAtEnd } from '../utils';\nimport './Sidebar.css';\n\nconst DefinitionsDrawerPanel = React.memo<{\n  definitions: any,\n  dmnFilePath: string,\n}>(({ definitions, dmnFilePath }) => {\n  // console.log('render DefinitionsDrawerPanel');\n\n  // DMN file path ClipboardCopy expansion\n  const [isExpanded, setExpanded] = React.useState(false);\n  const [definitionsState, setDefinitionsState] = React.useState(definitions);\n  const [dmnFilePathState, setDmnFilePathState] = React.useState(dmnFilePath);\n\n  React.useEffect(() => {\n    // scroll towards the end of the DMN file path input\n    setTimeout(() => {\n      const element = document.getElementById('dmnFilePath') as HTMLInputElement;\n      if (element) {\n        setCaretPositionAtEnd(element);\n      }\n    }, 1);\n  }, [dmnFilePath]);\n\n  React.useEffect(() => {\n    if (definitions !== definitionsState) {\n      setDefinitionsState(definitions);\n    }\n    if (dmnFilePath !== dmnFilePathState) {\n      setDmnFilePathState(dmnFilePath);\n    }\n  }, [definitions, dmnFilePath]);\n\n  /**\n   * Toggles the DMN file path\n   */\n  const onToggle = () => {\n    setExpanded(!isExpanded);\n  };\n\n  /**\n   * Copy the DMN file path\n   */\n  const onCopy = (event: any) => {\n    /* Get the text field */\n    const copyText = document.getElementById('dmnFilePath') as HTMLInputElement;\n    if (copyText && copyText.select) {\n      /* Select the text field */\n      copyText.select();\n      copyText.setSelectionRange(0, 99999); /*For mobile devices*/\n      /* Copy the text inside the text field */\n      document.execCommand('copy');\n      // do not mark the whole text as selected\n      setCaretPositionAtEnd(copyText);\n    }\n  };\n\n  const ClipboardCopy = () => (\n    <div className={classNames('pf-c-clipboard-copy', isExpanded && 'pf-m-expanded')}>\n      <div className=\"pf-c-clipboard-copy__group\">\n        <button\n          className=\"pf-c-clipboard-copy__group-toggle\"\n          id=\"dmnPathToggle\"\n          aria-labelledby=\"dmnPathToggle dmnFilePath\"\n          aria-controls=\"content-6\"\n          aria-expanded=\"true\"\n          aria-label=\"Show content\"\n          onClick={onToggle}\n        >\n          <AngleRightIcon\n            className=\"pf-c-clipboard-copy__group-toggle-icon\"\n          />\n        </button>\n        <input className=\"pf-c-form-control\" readOnly={true} type=\"text\" value={dmnFilePathState} id=\"dmnFilePath\" aria-label=\"Copyable input\"/>\n        <button\n          className=\"pf-c-clipboard-copy__group-copy\"\n          aria-label=\"Copy to clipboard\"\n          id=\"dmnPathCopy\"\n          aria-labelledby=\"dmnPathCopy dmnFilePath\"\n          onClick={onCopy}\n        >\n          <CopyIcon />\n        </button>\n      </div>\n      {isExpanded && (\n        <div\n          className=\"pf-c-clipboard-copy__expandable-content\"\n          id=\"dmnPathContent\"\n          style={{ color: 'rgb(33, 36, 39)' }}\n        >\n          {dmnFilePathState}\n        </div>\n      )}\n    </div>\n  );\n  return (\n    <div>\n      <TextContent className=\"pf-u-m-lg\">\n        <div className=\"pf-u-mb-xl\">\n          <div>DMN file path</div>\n          <ClipboardCopy />\n        </div>\n        <p>To create a test template, define the \"Given\" and \"Expect\" columns by using the expression editor below.</p>\n        <h2>Select Data Object</h2>\n        <h3>Complex Types</h3>\n        {definitionsState.complex.map((item: any) => (\n          <Expandable key={item.typeRef} toggleText={item.text}>\n            {Object.keys(item.elements).map((elementKey: any) => (\n              <div className=\"pf-u-mb-sm\" key={elementKey}>\n                <Button variant=\"link\">{elementKey}</Button>\n                <span> [{item.elements[elementKey]}]</span>\n              </div>\n            ))}\n          </Expandable>\n        ))}\n\n        <h3>Simple Types</h3>\n        {definitionsState.simple.map((item: any) => (\n          <Expandable key={item.typeRef} toggleText={item.text}>\n            {Object.keys(item.elements).map((elementKey: any) => (\n              <div className=\"pf-u-mb-sm\" key={elementKey}>\n                <Button variant=\"link\">{elementKey}</Button>\n                <span> [{item.elements[elementKey]}]</span>\n              </div>\n            ))}\n          </Expandable>\n        ))}\n      </TextContent>\n    </div>\n  );\n}, (prevProps, nextProps) => {\n  if (JSON.stringify(prevProps.definitions) !== JSON.stringify(nextProps.definitions)) {\n    // definitions have changed, re-render\n    return false;\n  }\n  if (prevProps.dmnFilePath !== nextProps.dmnFilePath) {\n    // dmnFilePath have changed, re-render\n    return false;\n  }\n  return true;\n});\n\nexport { DefinitionsDrawerPanel };\n","import {\n  Button,\n  Expandable,\n  ToolbarItem,\n} from '@patternfly/react-core';\nimport { RedoIcon, UndoIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\nimport { focusCell } from '../utils';\n\nconst ChangeTracker = React.memo<{\n  undoRedo: any,\n  onUndo: any,\n  onRedo: any,\n}>(({ undoRedo, onUndo, onRedo }) => {\n  // console.log('render ChangeTracker');\n\n  const [stateFromProps, setStateFromProps] = React.useState({\n    undoRedo,\n  });\n\n  React.useEffect(() => {\n    // sync props to state\n    setStateFromProps({ undoRedo });\n  }, [ undoRedo ]);\n\n  /**\n   * The text to display for the change-tracker\n   */\n  const getChangeText = () => {\n    if (stateFromProps.undoRedo.undoList.length === 1) {\n      return `1 change`;\n    } else {\n      return `${stateFromProps.undoRedo.undoList.length} changes`;\n    }\n  };\n\n  /**\n   * When a cell id is clicked in the change-tracker, it scrolls and focuses the corresponding element in the grid\n   */\n  const focusElement = (id: string) => {\n    focusCell(id, 250, true);\n  };\n\n  /**\n   * The change-tracker element\n   */\n  const changeTracker = () => {\n    const input = (\n      <input\n        className=\"pf-c-form-control pf-u-px-md\"\n        type=\"button\"\n        id=\"textInput10\"\n        name=\"textInput10\"\n        aria-label=\"Input example with popover\"\n        value={getChangeText()}\n      />\n    );\n    if (stateFromProps.undoRedo.undoList.length) {\n      return (\n        <Expandable toggleText={getChangeText()} className=\"kie-changes pf-u-mx-sm\">\n          <div className=\"pf-c-content\">\n            <dl>\n              {stateFromProps.undoRedo.undoList.map((change: any, index: number) => (\n                <React.Fragment key={index}>\n                  <dt><Button variant=\"link\" onClick={() => focusElement(change.id)} isInline={true}>{change.id}</Button></dt>\n                  <dd>{change.value}</dd>\n                </React.Fragment>\n              ))}\n            </dl>\n          </div>\n        </Expandable>\n      );\n    } else {\n      return input;\n    }\n  };\n\n  // const redoTracker = () => {\n  //   return (\n  //     <Expandable toggleText={(stateFromProps.redoList.length).toString()} className=\"kie-changes pf-u-mx-sm\">\n  //       <div className=\"pf-c-content\">\n  //         <dl>\n  //           {stateFromProps.redoList.map((redo: any, index: number) => (\n  //             <React.Fragment key={index}>\n  //               <dt><Button variant=\"link\" onClick={() => focusElement(redo.id)} isInline>{redo.id}</Button></dt>\n  //               <dd>{redo.value}</dd>\n  //             </React.Fragment>\n  //           ))}\n  //         </dl>\n  //       </div>\n  //     </Expandable>\n  //   );\n  // }\n\n  return (\n    <ToolbarItem>\n      <div className=\"pf-c-input-group\">\n        <Button onClick={onUndo} variant=\"control\" isDisabled={stateFromProps.undoRedo.undoList.length === 0}>\n          <UndoIcon />\n        </Button>\n        {changeTracker()}\n        {/* {redoTracker()} */}\n        <Button onClick={onRedo} variant=\"control\" isDisabled={stateFromProps.undoRedo.redoList.length === 0}>\n          <RedoIcon />\n        </Button>\n      </div>\n    </ToolbarItem>\n  );\n}, (prevProps, nextProps) => {\n  if (prevProps.undoRedo.undoList.length !== nextProps.undoRedo.undoList.length ||\n    JSON.stringify(prevProps.undoRedo.undoList) !== JSON.stringify(nextProps.undoRedo.undoList)) {\n    // last changed cell has changed, re-render\n    return false;\n  }\n  if (prevProps.undoRedo.redoList.length !== nextProps.undoRedo.redoList.length ||\n    JSON.stringify(prevProps.undoRedo.redoList) !== JSON.stringify(nextProps.undoRedo.redoList)) {\n    // last changed cell has changed, re-render\n    return false;\n  }\n  return true;\n});\n\n// @ts-ignore\nChangeTracker.whyDidYouRender = {\n  customName: 'ChangeTracker',\n};\n\nexport { ChangeTracker };\n","import { Button, Modal } from '@patternfly/react-core';\nimport * as React from 'react';\n\nconst HelpModal: React.SFC<{ isOpen: boolean, onClose: any, readOnly: boolean }> = ({ isOpen, onClose, readOnly }) => {\n  // console.log('render HelpModal');\n\n  return (\n    <Modal\n      isSmall={true}\n      title=\"Help\"\n      isOpen={isOpen}\n      onClose={onClose}\n      actions={[\n        <Button key=\"confirm\" variant=\"primary\" onClick={onClose}>\n          Close\n        </Button>,\n      ]}\n      isFooterLeftAligned={true}\n    >\n      <div className=\"pf-c-content\">\n        <p>The following keyboard interactions are available:</p>\n        <ul>\n          <li>Once a cell is selected, arrow keys can be used to navigate between the cells.</li>\n          <li>The Tab and Shift+Tab keys can be used to tab to the next and previous cell.</li>\n          <li>CMD+C / CTRL+C copies the cell content.</li>\n          {!readOnly && <>\n            <li>Use the Enter key on a cell to enter editing mode.</li>\n            <li>CMD+Z / CTRL+Z undoes the last change.</li>\n            <li>CMD+Shift+Z / CTRL+Shift+Z redoes the last change.</li>\n            <li>When in editing mode:\n              <ul>\n                <li>The Enter key will save the current cell contents.</li>\n                <li>THe Escape key will reset the cell contents.</li>\n              </ul>\n            </li>\n          </>}\n        </ul>\n      </div>\n    </Modal>\n  );\n};\n\nexport { HelpModal };\n","import {\n  Select,\n  SelectGroup,\n  SelectOption,\n  TextInput,\n  ToolbarItem\n} from '@patternfly/react-core';\nimport * as React from 'react';\nimport { useDebounce } from '../utils';\n\nconst Search = React.memo<{\n  data: any,\n  columnNames: any,\n  onChange: any,\n}>(({ data, columnNames, onChange }) => {\n  // console.log('render Search');\n\n  const [isExpanded, setExpanded] = React.useState(false);\n  const [selected, setSelected] = React.useState<any[]>([]);\n  const [searchValue, setSearchValue] = React.useState('');\n\n  const debouncedSearchTerm = useDebounce(searchValue, 500);\n\n  React.useEffect(() => {\n    // this gets triggered after the debounce timer\n    onChange(debouncedSearchTerm, selected);\n  }, [debouncedSearchTerm]);\n\n  React.useEffect(() => {\n    // When selections in the filter change, update the filtered rows\n    if (searchValue) {\n      onChange(searchValue, selected);\n    }\n  }, [ selected ]);\n\n  React.useEffect(() => {\n    // reset search and selection if the underlying data has changed\n    setSelected([]);\n    setSearchValue('');\n  }, [ data ]);\n\n  /**\n   * Update filtered rows on search change\n   */\n  const handleSearchChange = (value: string) => {\n    setSearchValue(value);\n  };\n\n  /**\n   * Toggles the filter select\n   */\n  const onSelectToggle = (isOpen: boolean) => {\n    setExpanded(isOpen);\n  };\n\n  /**\n   * Updates selection on filter select change\n   */\n  const onSelect = (event: any, currentSelection: any) => {\n    let selections: string[];\n    if (selected.indexOf(currentSelection) > -1) {\n      // was previously selected, now deselect\n      selections = selected.filter((item: any) => item !== currentSelection);\n    } else {\n      // select new\n      selections = [...selected, currentSelection];\n    }\n    setSelected(selections);\n  };\n\n  /**\n   * Builds the search box\n   */\n  const buildSearchBox = () => {\n    return (\n      <TextInput\n        type=\"text\"\n        id=\"gridSearch\"\n        name=\"gridSearch\"\n        placeholder=\"Search grid\"\n        aria-label=\"Search grid\"\n        value={searchValue}\n        onChange={handleSearchChange}\n      />\n    );\n  };\n\n  /**\n   * Builds the filter select\n   */\n  const buildSelect = () => {\n    let otherItems: any[] = [];\n    let givenItems: any[] = [];\n    let expectItems: any[] = [];\n    columnNames.forEach((item: any, index: number) => {\n      const value = item.name ? `${item.group} | ${item.name}` : item.group;\n      if (item.type === 'OTHER') {\n        otherItems.push(<SelectOption key={index} index={index} value={value} />);\n      } else if (item.type === 'GIVEN') {\n        givenItems.push(<SelectOption key={index} index={index} value={value} />);\n      } else {\n        // EXPECT\n        expectItems.push(<SelectOption key={index} index={index} value={value} />);\n      }\n    });\n    return (\n      <Select\n        variant=\"checkbox\"\n        aria-label=\"Select Input\"\n        onToggle={onSelectToggle}\n        onSelect={onSelect}\n        selections={selected}\n        isExpanded={isExpanded}\n        placeholderText=\"Filter on column\"\n        ariaLabelledBy=\"Filter on column\"\n        isGrouped\n      >\n        <SelectGroup label=\"Other\">{otherItems}</SelectGroup>\n        <SelectGroup label=\"Given\">{givenItems}</SelectGroup>\n        <SelectGroup label=\"Expect\">{expectItems}</SelectGroup>\n      </Select>\n    );\n  };\n\n  return (\n    <>\n      <ToolbarItem className=\"pf-u-mr-md\">{buildSearchBox()}</ToolbarItem>\n      <ToolbarItem>{buildSelect()}</ToolbarItem>\n    </>\n  );\n}, (prevProps, nextProps) => {\n  if (JSON.stringify(prevProps.data) !== JSON.stringify(nextProps.data)) {\n    // data has changed, re-render\n    return false;\n  }\n  if (JSON.stringify(prevProps.columnNames) !== JSON.stringify(nextProps.columnNames)) {\n    // allRows have changed, re-render\n    return false;\n  }\n  return true;\n});\n\n// @ts-ignore\nSearch.whyDidYouRender = {\n  customName: 'Search',\n};\n\nexport { Search };\n","import {\n  Button,\n  Toolbar,\n  ToolbarGroup,\n  ToolbarItem,\n} from '@patternfly/react-core';\nimport { OutlinedQuestionCircleIcon } from '@patternfly/react-icons';\nimport * as React from 'react';\nimport { ChangeTracker } from './ChangeTracker';\nimport './EditorToolbar.css';\nimport { HelpModal } from './HelpModal';\nimport { Search } from './Search';\n\nconst EditorToolbar = React.memo<{\n  data: any,\n  allRowsLength: any,\n  filteredRowsLength: number,\n  filterRows: any,\n  columnNames: any,\n  undoRedo: any,\n  onUndo: any,\n  onRedo: any,\n  readOnly: boolean,\n}>(({ data, allRowsLength, filteredRowsLength, filterRows, columnNames, undoRedo, onUndo, onRedo, readOnly }) => {\n  // console.log('render EditorToolbar');\n\n  const [isModelOpen, setModalOpen] = React.useState(false);\n\n  const [toolbarStateFromProps, setToolbarStateFromProps] = React.useState({\n    data,\n    allRowsLength,\n    filteredRowsLength,\n    columnNames,\n    undoRedo,\n  });\n\n  React.useEffect(() => {\n    // update state from props\n    setToolbarStateFromProps({\n      data,\n      allRowsLength,\n      filteredRowsLength,\n      columnNames,\n      undoRedo,\n    });\n  }, [\n    data,\n    allRowsLength,\n    filteredRowsLength,\n    columnNames,\n    undoRedo,\n  ]);\n\n  const onSearchChange = (value: string, selected: any[]) => {\n    filterRows(value, selected);\n  };\n\n  /**\n   * Opens the Help modal\n   */\n  const openModal = () => {\n    setModalOpen(true);\n  };\n\n  /**\n   * Closes the Help modal\n   */\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  return (\n    <>\n      <Toolbar className=\"pf-l-toolbar pf-u-justify-content-space-between pf-u-mx-xl pf-u-my-md\">\n        {!readOnly && <ToolbarGroup>\n          <ChangeTracker undoRedo={toolbarStateFromProps.undoRedo} onUndo={onUndo} onRedo={onRedo} />\n        </ToolbarGroup>}\n        <ToolbarGroup>\n          {toolbarStateFromProps.allRowsLength === filteredRowsLength ? (\n            <ToolbarItem className=\"pf-u-mr-md\">{toolbarStateFromProps.allRowsLength} items</ToolbarItem>\n          ) : (\n            <ToolbarItem className=\"pf-u-mr-md\">{filteredRowsLength} of {toolbarStateFromProps.allRowsLength} items</ToolbarItem>\n          )}\n          <Search data={data} columnNames={toolbarStateFromProps.columnNames} onChange={onSearchChange} />\n          <ToolbarItem><Button variant=\"plain\" onClick={openModal}><OutlinedQuestionCircleIcon size=\"md\" /></Button></ToolbarItem>\n        </ToolbarGroup>\n      </Toolbar>\n      <HelpModal isOpen={isModelOpen} onClose={closeModal} readOnly={readOnly} />\n    </>\n  );\n}, (prevProps, nextProps) => {\n  if (prevProps.allRowsLength !== nextProps.allRowsLength) {\n    // filteredRows have changed, re-render\n    return false;\n  }\n  if (prevProps.filteredRowsLength !== nextProps.filteredRowsLength) {\n    // filteredRows have changed, re-render\n    return false;\n  }\n  if (prevProps.undoRedo.undoList.length !== nextProps.undoRedo.undoList.length ||\n    JSON.stringify(prevProps.undoRedo.undoList) !== JSON.stringify(nextProps.undoRedo.undoList)) {\n    // last changed cell has changed, re-render\n    return false;\n  }\n  if (prevProps.undoRedo.redoList.length !== nextProps.undoRedo.redoList.length ||\n    JSON.stringify(prevProps.undoRedo.redoList) !== JSON.stringify(nextProps.undoRedo.redoList)) {\n    // last changed cell has changed, re-render\n    return false;\n  }\n  return true;\n});\n\n// @ts-ignore\nEditorToolbar.whyDidYouRender = {\n  customName: 'EditorToolbar',\n};\n\nexport { EditorToolbar };\n","import { FactMapping, Scesim } from '../../types/SceSim';\n\nexport const getDmnFilePath = (data: Scesim): string => {\n  const {\n    dmnFilePath,\n  } = data.value.simulation.simulationDescriptor;\n  return dmnFilePath;\n};\n\nexport const getDmnName = (data: Scesim): string => {\n  const {\n    dmnName,\n  } = data.value.simulation.simulationDescriptor;\n  return dmnName;\n};\n\nexport const getColumnNames = (data: Scesim) => {\n  const columns: any[] = [];\n  const {\n    factMapping,\n  } = data.value.simulation.simulationDescriptor.factMappings;\n  factMapping.forEach(\n    (col: FactMapping) => {\n      const name = col.expressionAlias || '';\n      const group = col.factAlias || '';\n      const { type } = col.expressionIdentifier;\n      columns.push({\n        name,\n        group,\n        type\n      });\n    },\n  );\n  return columns;\n};\n\ntype Column = Array<({ name?: string; field?: string; group?: string; children?: Array<{ name?: string; field?: string; }>; })>;\n\nexport const getColumns = (data: Scesim, byGroup: boolean = false) => {\n  const columnDefsOther: Column = [];\n  const columnDefsGiven: Column = [];\n  const columnDefsExpect: Column = [];\n  let numOther: number = 0;\n  let numGiven: number = 0;\n  let numExpect: number = 0;\n  const fieldIndices: any = {};\n  const {\n    factMapping,\n  } = data.value.simulation.simulationDescriptor.factMappings;\n  factMapping.forEach(\n    (col: FactMapping, index: number) => {\n      const type = col.expressionIdentifier.type; // OTHER | GIVEN | EXPECT\n      const field = col.expressionIdentifier.name; // this relates the column to the row cell\n      fieldIndices[field] = index;\n      if (type === 'OTHER') {\n        numOther = numOther + 1;\n        const name = col.factAlias;\n        columnDefsOther.push({ name, field });\n      } else {\n        const name = col.expressionAlias;\n        const group = col.factAlias;\n        if (!byGroup) {\n          if (type === 'GIVEN') {\n            numGiven = numGiven + 1;\n            columnDefsGiven.push({ name, field, group });\n          } else {\n            // EXPECT\n            numExpect = numExpect + 1;\n            columnDefsExpect.push({ name, field, group });\n          }\n        } else {\n          if (type === 'GIVEN') {\n            numGiven = numGiven + 1;\n            // check if the group already exists, if so push to it, otherwise create a new group\n            if (columnDefsGiven.length === 0 || columnDefsGiven[columnDefsGiven.length - 1].group !== group) {\n              // new group\n              columnDefsGiven.push({ group, children: [{ name, field }] });\n            } else {\n              // push to last group\n              columnDefsGiven[columnDefsGiven.length - 1].children!.push({ name, field });\n            }\n          } else {\n            // EXPECT\n            numExpect = numExpect + 1;\n            // check if the group already exists, if so push to it, otherwise create a new group\n            if (columnDefsExpect.length === 0 || columnDefsExpect[columnDefsExpect.length - 1].group !== group) {\n              // new group\n              columnDefsExpect.push({ group, children: [{ name, field }] });\n            } else {\n              // push to last group\n              columnDefsExpect[columnDefsExpect.length - 1].children!.push({ name, field });\n            }\n          }\n        }\n      }\n    },\n  );\n  return {\n    fieldIndices,\n    other: columnDefsOther,\n    given: columnDefsGiven,\n    expect: columnDefsExpect,\n    numOther,\n    numGiven,\n    numExpect,\n  };\n};\n\nexport const getRows = (data: Scesim, columns?: any) => {\n  // construct the path so we can save back to the same location in the json file\n  const dataPathRoot: string = 'value.simulation.scenarios.scenario';\n  const rows: any[] = [];\n  const { scenario } = data.value.simulation.scenarios;\n  scenario.forEach(\n    (dataRow: { factMappingValues: { factMappingValue: any } }, rowIndex: number) => {\n      const dataPath = `${dataPathRoot}[${rowIndex}].factMappingValues.factMappingValue`;\n      const totalColumnsLength = columns.numOther + columns.numGiven + columns.numExpect;\n      let hasExpressionIdentifierName = true;\n      // create the row with a predetermined length so we can insert the cell in the correct column order\n      const row: any[] = Array.from(Array(totalColumnsLength).keys());\n      const entries = dataRow.factMappingValues.factMappingValue;\n      entries.forEach((col: { rawValue?: { value: any }, expressionIdentifier: { name: string } }, index: number) => {\n        const { name } = col.expressionIdentifier;\n        const path = `${dataPath}[${index}].rawValue.value`;\n        if (!col.rawValue) {\n          if (name) {\n            row[columns.fieldIndices[name]] = {\n              value: null,\n              path,\n            };\n          } else {\n            hasExpressionIdentifierName = false;\n            row[index] = {\n              value: null,\n              path,\n            };\n          }\n        } else {\n          const { value } = col.rawValue;\n          if (name) {\n            row[columns.fieldIndices[name]] = {\n              value,\n              path,\n            };\n          } else {\n            hasExpressionIdentifierName = false;\n            row[index] = {\n              value,\n              path,\n            };\n          }\n        }\n      });\n      if (!hasExpressionIdentifierName && row.length) {\n        // this might be a workaround, but one of the scesim datasets did not have expressionIdentifier.name for the simulations\n        // and for some reason the last item is the index, it should be at the front\n        if (row.length) {\n          row.unshift(row.pop()!);\n        }\n      }\n      rows.push(row);\n    },\n  );\n  return rows;\n};\n\nexport const getDefinitions = (data: { value: { itemDefinition?: any; drgElement?: any; name?: any; }; }) => {\n  const definitions: any = {};\n  const title = data.value.name;\n  const { itemDefinition } = data.value;\n  itemDefinition.forEach((def: any) => {\n    // let definitionName = def.name.substring(1);\n    const definitionTypes = {} as any;\n    const { itemComponent } = def;\n    itemComponent.forEach((type: { name: any; typeRef: any; allowedValues?: any }) => {\n      if (type.allowedValues) {\n        // enumeration\n        definitionTypes[type.name] = type.allowedValues.text;\n      } else {\n        definitionTypes[type.name] = type.typeRef;\n      }\n    });\n    definitions[def.name] = definitionTypes;\n  });\n\n  const { drgElement } = data.value;\n  const typeDefinitions: any = {\n    _title: title,\n    simple: [],\n    complex: [],\n    map: {},\n  };\n  drgElement.forEach((element: any) => {\n    const type = element.name.localPart; // inputData | decision\n    const text = element.value.name;\n    const question = element.value.question;\n    const choices = element.value.allowedAnswers || null;\n    const typeRef = element.value.variable.typeRef; // e.g. tViolation, tFine, tDriver, string\n    typeDefinitions[typeRef.charAt(0) === 't' ? 'complex' : 'simple'].push(\n      {\n        typeRef,\n        type,\n        text,\n        choices,\n        question,\n        elements: definitions[typeRef] || {\n          value: choices,\n        },\n      },\n    );\n    typeDefinitions.map[text] = definitions[typeRef] || {\n      value: choices,\n    };\n  });\n  return typeDefinitions;\n};\n","import \"@patternfly/patternfly/patternfly.css\";\nimport \"@patternfly/patternfly/patternfly-addons.css\";\nimport { Button } from '@patternfly/react-core';\nimport { BarsIcon } from '@patternfly/react-icons';\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { Editor } from '../Editor';\nimport { DefinitionsDrawerPanel } from '../Sidebar';\nimport { EditorToolbar } from '../Toolbar';\nimport { getRowColumnFromId, getJsonFromSceSim, getJsonFromDmn, useKeyPress } from '../utils';\nimport { getColumnNames, getColumns, getDefinitions, getDmnFilePath, getDmnName, getRows } from './scesimUtils';\n\nconst EditorContainer = React.memo<{\n  data: string,\n  model?: string,\n  showSidePanel?: boolean,\n  readOnly?: boolean,\n}>(({ data, model, showSidePanel = true, readOnly = false }) => {\n  // console.log('render EditorContainer');\n\n  const increaseRows = (rows: any) => {\n    // increase rows for performance testing / infinite sroll testing etc\n    const enabled = false;\n    const numRowsToAdd = 2000;\n    if (enabled) {\n      for (let i = 0; i < numRowsToAdd; i++) {\n        const clonedRow = JSON.parse(JSON.stringify(rows[0]));\n        // update the Index\n        clonedRow[0].value = (i + 6).toString();\n        rows.push(clonedRow);\n      }\n    }\n    return rows;\n  };\n\n  const dataJson = getJsonFromSceSim(data);\n  const initialColumns = getColumns(dataJson, true);\n  let initialRows = getRows(dataJson, initialColumns);\n  initialRows = increaseRows(initialRows);\n  const [isDrawerExpanded, setDrawerExpanded] = React.useState(true);\n  const [undoRedo, setUndoRedo] = React.useState<any>({\n    undoList: [],\n    redoList: [],\n    skipUpdate: false,\n  });\n  const [allRows, setAllRows] = React.useState(initialRows);\n  const [filteredRows, setFilteredRows] = React.useState(initialRows);\n  const [dmnFilePath, setDmnFilePath] = React.useState(getDmnFilePath(dataJson));\n  const [dmnName, setDmnName] = React.useState(getDmnName(dataJson));\n  const [columns, setColumns] = React.useState(initialColumns);\n\n  const initialColumnNames = getColumnNames(dataJson);\n  const [columnNames, setColumnNames] = React.useState(initialColumnNames);\n  const initialItemToColumnIndexMap: any = [];\n  initialColumnNames.forEach((item: any, index: number) => {\n    const value = item.name ? `${item.group} | ${item.name}` : item.group;\n    initialItemToColumnIndexMap[value] = index;\n  });\n  const [itemToColumnIndexMap, setItemToColumnIndexMap] = React.useState(initialItemToColumnIndexMap);\n  \n  const [filterSelection, setFilterSelection] = React.useState<any[]>([]);\n  const [lastForcedUpdateState, setLastForcedUpdateState] = React.useState((Date.now()).toString());\n\n  // optional model\n  const initialDefinitions = model ? getDefinitions(getJsonFromDmn(model)) : null;\n  const [definitions, setDefinitions] = React.useState(initialDefinitions);\n\n  React.useEffect(() => {\n    // when data or model changes, recompute rows and columns\n    const dataJson = getJsonFromSceSim(data);\n    const updatedColumns = getColumns(dataJson, true);\n    let updatedRows = getRows(dataJson, updatedColumns);\n    updatedRows = increaseRows(updatedRows);\n    \n    if (JSON.stringify(allRows) !== JSON.stringify(updatedRows)) {\n      setDmnFilePath(getDmnFilePath(dataJson));\n      setColumns(updatedColumns);\n      setColumnNames(getColumnNames(dataJson));\n      setAllRows(updatedRows);\n      setFilteredRows(updatedRows);\n      setUndoRedo({\n        undoList: [],\n        redoList: [],\n        skipUpdate: false,\n      });\n      const indexMap: any = [];\n      initialColumnNames.forEach((item: any, index: number) => {\n        const value = item.name ? `${item.group} | ${item.name}` : item.group;\n        indexMap[value] = index;\n      });\n      setItemToColumnIndexMap(initialColumnNames);\n    }\n\n    // update the optional model\n    const updatedDefinitions = model ? getDefinitions(getJsonFromDmn(model)): null;\n    if (JSON.stringify(definitions) !== JSON.stringify(updatedDefinitions)) {\n      setDefinitions(updatedDefinitions);\n    }\n  }, [data, model]);\n\n  React.useEffect(() => {\n    const searchValue = (document.getElementById('gridSearch') as HTMLInputElement).value;\n    filterRows(searchValue, filterSelection, allRows);\n    if (undoRedo.skipUpdate) {\n      return;\n    }\n    setLastForcedUpdateState((Date.now()).toString());\n  }, [ undoRedo ]);\n\n  /**\n   * Toggle the sidebar\n   */\n  const toggleDrawer = () => {\n    setDrawerExpanded(!isDrawerExpanded);\n  };\n\n  /**\n   * Callback function for Editor inputs. When they're saved we add it to the list of changes for change-tracking.\n   */\n  const addToChanges = (id: string, value: string, previousValue: string) => {\n    const { row, column } = getRowColumnFromId(id);\n    // const clonedAllRows = cloneDeep(allRows);\n    console.log(`changing ${allRows[row][column].value} to ${value}`)\n    allRows[row][column].value = value;\n    // setAllRows(allRows);\n    // new change clears the redoList\n    setUndoRedo((previousState: any) => ({\n      undoList: [...previousState.undoList, { id, value, previousValue }],\n      redoList: [],\n      skipUpdate: true,\n    }));\n  };\n\n  /**\n   * Reverts the last Input change\n   * Pop the undo stack and push it onto redo stack\n   */\n  const onUndo = () => {\n    if (undoRedo.undoList.length > 0) {\n      const clonedChanges = [...undoRedo.undoList];\n      const lastChange = clonedChanges.pop();\n      setUndoRedo((previousState: any) => ({\n        undoList: clonedChanges,\n        redoList: [...previousState.redoList, lastChange],\n        skipUpdate: false,\n      }));\n\n      const { id, previousValue } = lastChange;\n      const { row, column } = getRowColumnFromId(id);\n      allRows[row][column].value = previousValue;\n      // let clonedAllRows = cloneDeep(allRows);\n      // clonedAllRows[row][column].value = previousValue;\n      // setAllRows(clonedAllRows);\n      // filterRows(searchValueState, filterSelection, clonedAllRows);\n    }\n  };\n\n  /**\n   * Pop it from the redo stack and push it onto undo stack\n   * a new change clears the redo stack\n   */\n  const onRedo = () => {\n    if (undoRedo.redoList.length > 0) {\n      const clonedRedoList = [...undoRedo.redoList];\n      const lastRedo = clonedRedoList.pop();\n      setUndoRedo((previousState: any) => ({\n        undoList: [...previousState.undoList, lastRedo],\n        redoList: clonedRedoList,\n        skipUpdate: false,\n      }));\n\n      const { id, value } = lastRedo;\n      const { row, column } = getRowColumnFromId(id);\n      allRows[row][column].value = value;\n      // const clonedAllRows = cloneDeep(allRows);\n      // clonedAllRows[row][column].value = value;\n      // setAllRows(clonedAllRows);\n      // filterRows(searchValueState, filterSelection, clonedAllRows);\n    }\n  };\n\n   // Command + Z / CTRL + Z undo the last change\n   useKeyPress(/z/i, onUndo, { log: 'editor-container', withModifier: true, isActive: !readOnly });\n   // Command + Shift + Z / CTRL + Shift + Z redo the last change\n   useKeyPress(/z/i, onRedo, { log: 'editor-container', withModifier: true, withShift: true, isActive: !readOnly });\n\n  /**\n   * Filter the rows based on search and filter selection\n   * Callback function for EditorToolbar, called on filter/search change\n   */\n  const filterRows = (value: string, selected: any[], rowsToFilter?: any[]) => {\n    const rows = rowsToFilter || allRows;\n    if (JSON.stringify(filterSelection) !== JSON.stringify(selected)) {\n      setFilterSelection(selected);\n    }\n    if (!value) {\n      // no search term, show all rows\n      return setFilteredRows(rows);\n    }\n    const searchRE = new RegExp(value, 'i');\n    const rowsAfterFilter = rows.filter((row: any) => {\n      let found = false;\n      if (selected.length === 0) {\n        // search all columns\n        for (const col of row) {\n          if (col && searchRE.test(col.value)) {\n            found = true;\n            break;\n          }\n        }\n      } else {\n        // search only the selected columns\n        for (const sel of selected) {\n          const columnIndex = itemToColumnIndexMap[sel];\n          if (row[columnIndex] && searchRE.test(row[columnIndex].value)) {\n            found = true;\n            break;\n          }\n        }\n      }\n      return found;\n    });\n    setFilteredRows(rowsAfterFilter);\n  };\n\n  return (\n    <div className=\"pf-m-redhat-font\">\n      <div className=\"pf-c-page\">\n        <header role=\"banner\" className=\"pf-c-page__header\">\n        <div className=\"pf-c-page__header-brand\">\n          {showSidePanel && <div className=\"pf-c-page__header-brand-toggle\">\n            <Button\n              id=\"nav-toggle\"\n              onClick={toggleDrawer}\n              aria-label=\"Toggle drawer\"\n              aria-controls=\"page-sidebar\"\n              aria-expanded={isDrawerExpanded ? 'true' : 'false'}\n              variant=\"plain\"\n            >\n              <BarsIcon />\n            </Button>\n          </div>}\n          <div className=\"pf-c-page__header-brand-link\">\n            {(definitions && definitions._title) || dmnName}\n          </div>\n        </div>\n          <div className=\"pf-c-page__header-tools\">\n            <EditorToolbar\n              data={data}\n              allRowsLength={allRows.length}\n              filteredRowsLength={filteredRows.length}\n              filterRows={filterRows}\n              columnNames={columnNames}\n              readOnly={readOnly}\n              undoRedo={undoRedo}\n              onUndo={onUndo}\n              onRedo={onRedo}\n            />\n          </div>\n        </header>\n        {showSidePanel && definitions && <div className={classNames('pf-c-page__sidebar pf-m-dark', isDrawerExpanded && 'pf-m-expanded', !isDrawerExpanded && 'pf-m-collapsed')}>\n          <div className=\"pf-c-page__sidebar-body\">\n            <DefinitionsDrawerPanel\n              definitions={definitions}\n              dmnFilePath={dmnFilePath}\n            />\n          </div>\n        </div>}\n        <main role=\"main\" className=\"pf-c-page__main\" id=\"sce-sim-grid__main\" tabIndex={-1}>\n          <section className=\"pf-c-page__main-section pf-m-light\">\n            <Editor\n              columns={columns}\n              filteredRows={filteredRows}\n              definitions={definitions}\n              columnNames={columnNames}\n              onSave={addToChanges}\n              lastForcedUpdate={lastForcedUpdateState}\n              readOnly={readOnly}\n            />\n          </section>\n        </main>\n      </div>\n    </div>\n  );\n}, (prevProps, nextProps) => {\n  if (JSON.stringify(prevProps.data) !== JSON.stringify(nextProps.data)) {\n    // data has changed, re-render\n    // console.log('re-render EditorContainer');\n    return false;\n  }\n  if (JSON.stringify(prevProps.model) !== JSON.stringify(nextProps.model)) {\n    // model has changed, re-render\n    // console.log('re-render EditorContainer');\n    return false;\n  }\n  // console.log('not re-rendering EditorContainer');\n  return true;\n});\n\n// @ts-ignore\nEditorContainer.whyDidYouRender = {\n  customName: 'EditorContainer',\n};\n\nexport { EditorContainer };\n","export * from './components';\n"],"sourceRoot":""}